{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///exobot.js","webpack:///webpack/bootstrap c0d2a6454ec9e6d64ab7","webpack:///./src/plugins/chat.js","webpack:///./src/plugins/plugin.js","webpack:///./src/messages/message.js","webpack:///./src/messages/text.js","webpack:///./src/user.js","webpack:///./src/adapters/adapter.js","webpack:///./src/messages/presence.js","webpack:///external \"node-uuid\"","webpack:///./src/adapters/index.js","webpack:///./src/plugins/index.js","webpack:///external \"eventemitter3\"","webpack:///external \"log\"","webpack:///external \"superagent\"","webpack:///external \"superagent-promise-plugin\"","webpack:///./src/adapters/adapters/shell.js","webpack:///./src/db/db.js","webpack:///./src/plugins/event.js","webpack:///./src/plugins/http.js","webpack:///./src/plugins/plugins/greetings.js","webpack:///./src/plugins/plugins/help.js","webpack:///./src/plugins/plugins/permissions.js","webpack:///external \"cryptr\"","webpack:///external \"fs-extra\"","webpack:///external \"lodash/array\"","webpack:///external \"lowdb\"","webpack:///external \"readline\"","webpack:///external \"underscore-db\"","webpack:///./src/exobot.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_25__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_26__","__WEBPACK_EXTERNAL_MODULE_27__","__WEBPACK_EXTERNAL_MODULE_14__","__WEBPACK_EXTERNAL_MODULE_28__","__WEBPACK_EXTERNAL_MODULE_9__","__WEBPACK_EXTERNAL_MODULE_29__","__WEBPACK_EXTERNAL_MODULE_15__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_30__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","_toConsumableArray","arr","Array","isArray","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__plugin__","__WEBPACK_IMPORTED_MODULE_1__messages_text__","__WEBPACK_IMPORTED_MODULE_2_lodash_array__","ChatPlugin","listen","respond","help","permissionGroup","_extends","assign","target","source","_slicedToArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","push","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","DEFAULT_REGEXP","_Plugin","_this","regexp","respondFunctions","listenFunctions","_this2","map","bot","_this3","botNameRegex","RegExp","alias","postConstructor","forEach","_ref","_ref2","args","bind","emitter","on","message","v","process","concat","_x","_x2","_x3","_x4","_x5","_ref3","regeneratorRuntime","mark","_callee","validation","response","fnName","text","_text","res","_text2","newMessage","_this4","isResponder","wrap","_context","prev","validateBotName","abrupt","direct","exec","validate","checkPermissions","user","id","sent","t","send","t0","log","warning","stop","_x7","_x8","_ref4","_callee2","userId","commandPermissionGroup","roles","groups","_context2","usePermissions","databaseInitialized","db","admin","keys","requirePermissions","regex","permissionGoup","setHelp","setPermissionGroup","Plugin","options","_requiresDatabase","Error","database","defaultDatabase","val","set","__WEBPACK_IMPORTED_MODULE_0__db__","__WEBPACK_IMPORT_KEY__","__WEBPACK_IMPORTED_MODULE_0_node_uuid__","Message","channel","adapter","_ref$id","__WEBPACK_IMPORTED_MODULE_0__message__","TextMessage","_Message","_ref$whisper","whisper","trim","__WEBPACK_IMPORTED_MODULE_0__greetings__","__WEBPACK_IMPORTED_MODULE_1__help__","__WEBPACK_IMPORTED_MODULE_2__permissions__","User","__WEBPACK_IMPORTED_MODULE_2__messages_presence__","Adapter","_class","_temp","status","STATUS","UNINITIALIZED","CONNECTING","emit","prependNameForWhisper","receive","type","TYPES","ENTER","LEAVE","console","pong","CONNECTED","DISCONNECTED","RECONNECTING","ERROR","PresenceMessage","__WEBPACK_IMPORTED_MODULE_1__adapter__","__WEBPACK_IMPORTED_MODULE_0__adapters__","adapters","__WEBPACK_IMPORTED_MODULE_1__presence__","__WEBPACK_IMPORTED_MODULE_2__text__","__WEBPACK_IMPORTED_MODULE_1__plugin__","__WEBPACK_IMPORTED_MODULE_2__event__","__WEBPACK_IMPORTED_MODULE_3__http__","__WEBPACK_IMPORTED_MODULE_4__chat__","__WEBPACK_IMPORTED_MODULE_0__plugins__","plugins","__WEBPACK_IMPORTED_MODULE_0__shell__","__WEBPACK_IMPORTED_MODULE_0_readline__","__WEBPACK_IMPORTED_MODULE_0_readline___default","__WEBPACK_IMPORTED_MODULE_2__user__","ShellAdapter","SHELL","SHELL_USER","EXIT_COMMANDS","_Adapter","rl","a","createInterface","input","stdin","output","stdout","question","answer","includes","exit","prompt","__WEBPACK_IMPORTED_MODULE_0_cryptr__","__WEBPACK_IMPORTED_MODULE_0_cryptr___default","__WEBPACK_IMPORTED_MODULE_1_lowdb__","__WEBPACK_IMPORTED_MODULE_1_lowdb___default","__WEBPACK_IMPORTED_MODULE_2_fs_extra__","__WEBPACK_IMPORTED_MODULE_2_fs_extra___default","__WEBPACK_IMPORTED_MODULE_3_underscore_db__","__WEBPACK_IMPORTED_MODULE_3_underscore_db___default","deserialize","serialize","read","write","readLocal","writeLocal","DB","cryptr","str","decrypted","decrypt","obj","JSON","parse","stringify","encrypted","encrypt","readFile","path","data","e","writeFile","ensureFile","dbPath","_ref2$readFile","_ref2$writeFile","storage","format","_","mixin","EventPlugin","HTTPPlugin","_applyDecoratedDescriptor","decorators","context","initializer","slice","reverse","reduce","decorator","__WEBPACK_IMPORTED_MODULE_0__chat__","Greetings","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","GREETINGS","FAREWELLS","shouldGreet","toLowerCase","shouldFarewell","_ChatPlugin","_ret","_len","_key","randomGreeting","parseInt","Math","random","randomFarewell","Help","filter","helpText","join","search","indexOf","Permissions","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_class2","permissions","adminPassword","nameToId","addRoleToUser","_ref5","_ref6","role","getUserIdByUserName","viewUser","_x6","_ref7","_callee3","_ref8","perms","_ref9","_context3","removeRoleFromUser","_ref10","_callee4","_ref11","_ref12","_context4","addRoleToGroup","_x9","_ref13","_callee5","_ref14","_ref15","_context5","removeRoleFromGroup","_x10","_ref16","_callee6","_ref17","group","_ref18","_context6","viewGroup","_x11","_ref19","_callee7","_ref20","_ref21","_context7","replace","__WEBPACK_IMPORTED_MODULE_0_eventemitter3__","__WEBPACK_IMPORTED_MODULE_0_eventemitter3___default","__WEBPACK_IMPORTED_MODULE_1_log__","__WEBPACK_IMPORTED_MODULE_1_log___default","__WEBPACK_IMPORTED_MODULE_2_superagent__","__WEBPACK_IMPORTED_MODULE_2_superagent___default","__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__","__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default","__WEBPACK_IMPORTED_MODULE_4__plugins_plugins__","__WEBPACK_IMPORTED_MODULE_5__db__","__WEBPACK_IMPORTED_MODULE_6__adapters__","__WEBPACK_IMPORTED_MODULE_7__messages__","__WEBPACK_IMPORTED_MODULE_8__plugins__","__WEBPACK_IMPORTED_MODULE_9__user__","Exobot","LogLevels","_initialiseProps","http","patch","initLog","logLevel","WARNING","initAdapters","initPlugins","initDB","plugin","register","getAdapterByName","getAdapterByMessage","find","addAdapter","addPlugin","DEBUG","setInterval","logProcess","critical","debug","memoryUsage","cpuUsage"],"mappings":"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","file":"exobot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"cryptr\", \"eventemitter3\", \"fs-extra\", \"lodash/array\", \"log\", \"lowdb\", \"node-uuid\", \"readline\", \"superagent\", \"superagent-promise-plugin\", \"underscore-db\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exobot.js\"] = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse\n\t\troot[\"exobot.js\"] = factory(root[\"cryptr\"], root[\"eventemitter3\"], root[\"fs-extra\"], root[\"lodash/array\"], root[\"log\"], root[\"lowdb\"], root[\"node-uuid\"], root[\"readline\"], root[\"superagent\"], root[\"superagent-promise-plugin\"], root[\"underscore-db\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_30__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"cryptr\", \"eventemitter3\", \"fs-extra\", \"lodash/array\", \"log\", \"lowdb\", \"node-uuid\", \"readline\", \"superagent\", \"superagent-promise-plugin\", \"underscore-db\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exobot.js\"] = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse\n\t\troot[\"exobot.js\"] = factory(root[\"cryptr\"], root[\"eventemitter3\"], root[\"fs-extra\"], root[\"lodash/array\"], root[\"log\"], root[\"lowdb\"], root[\"node-uuid\"], root[\"readline\"], root[\"superagent\"], root[\"superagent-promise-plugin\"], root[\"underscore-db\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_30__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 31);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__messages_text__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash_array__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash_array___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash_array__);\n\n/* harmony export */ __webpack_require__.d(exports, \"d\", function() { return ChatPlugin; });\n/* harmony export */ __webpack_require__.d(exports, \"c\", function() { return listen; });\n/* harmony export */ __webpack_require__.d(exports, \"e\", function() { return respond; });\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return help; });\n/* harmony export */ __webpack_require__.d(exports, \"b\", function() { return permissionGroup; });var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar DEFAULT_REGEXP = /.+/;\n\nvar ChatPlugin = function (_Plugin) {\n  _inherits(ChatPlugin, _Plugin);\n\n  function ChatPlugin() {\n    _classCallCheck(this, ChatPlugin);\n\n    var _this = _possibleConstructorReturn(this, (ChatPlugin.__proto__ || Object.getPrototypeOf(ChatPlugin)).apply(this, arguments));\n\n    _this.regexp = DEFAULT_REGEXP;\n    _this.respondFunctions = [];\n    _this.listenFunctions = [];\n    _this.help = [];\n    return _this;\n  }\n\n  _createClass(ChatPlugin, [{\n    key: 'helpText',\n    value: function helpText() {\n      var _this2 = this;\n\n      return this.help.map(function (n) {\n        return '[' + _this2[n].permissionGroup + '] ' + _this2[n].help;\n      });\n    }\n  }, {\n    key: 'register',\n    value: function register(bot) {\n      var _this3 = this;\n\n      _get(ChatPlugin.prototype.__proto__ || Object.getPrototypeOf(ChatPlugin.prototype), 'register', this).call(this, bot);\n      this.bot = bot;\n      this.botNameRegex = new RegExp('^(?:(?:@?' + bot.name + '|' + bot.alias + ')[,\\\\s:.-]*)(.+)', 'i');\n\n      if (this.postConstructor) {\n        this.postConstructor.forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2);\n\n          var fn = _ref2[0];\n          var args = _ref2[1];\n          return fn.bind(_this3).apply(undefined, _toConsumableArray(args));\n        });\n      }\n\n      bot.emitter.on('receive-message', function (message) {\n        // v = [\n        //   validation function or regex,\n        //   the response function from the plugin,\n        //   the name of the function (the class.property name)\n        // ];\n        // as pushed by the listen/respond functions below\n        _this3.respondFunctions.forEach(function (v) {\n          return _this3.process.apply(_this3, _toConsumableArray(v).concat([message, true]));\n        });\n        _this3.listenFunctions.forEach(function (v) {\n          return _this3.process.apply(_this3, _toConsumableArray(v).concat([message]));\n        });\n      });\n    }\n  }, {\n    key: 'process',\n    value: function () {\n      var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(validation, response, fnName, message) {\n        var _this4 = this;\n\n        var isResponder = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\n        var text, _text, res, _text2, newMessage;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n\n                if (!isResponder) {\n                  _context.next = 8;\n                  break;\n                }\n\n                text = this.validateBotName(message);\n\n                if (text) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 5:\n\n                message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: text, direct: true }));\n                _context.next = 12;\n                break;\n\n              case 8:\n                // if it's a listener on a whisper, remove the botname first so it still\n                // works\n                _text = this.validateBotName(message);\n\n                if (_text) {\n                  _context.next = 11;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 11:\n\n                message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: _text, direct: true }));\n\n              case 12:\n\n                if (validation.exec) {\n                  validation = this.validate(validation);\n                }\n\n                res = validation(message);\n\n                if (!res) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.next = 17;\n                return this.checkPermissions(message.user.id, this[fnName].permissionGroup);\n\n              case 17:\n                if (!_context.sent) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _text2 = response.bind(this)(res, message);\n\n                if (_text2) {\n                  _context.next = 21;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 21:\n\n                if (_text2 instanceof Promise) {\n                  _text2.then(function (t) {\n                    var newMessage = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: t }));\n                    _this4.bot.send(newMessage);\n                  });\n                } else {\n                  newMessage = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: _text2 }));\n\n                  this.bot.send(newMessage);\n                }\n\n              case 22:\n                _context.next = 27;\n                break;\n\n              case 24:\n                _context.prev = 24;\n                _context.t0 = _context['catch'](0);\n\n                this.bot.log.warning(_context.t0);\n\n              case 27:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 24]]);\n      }));\n\n      function process(_x, _x2, _x3, _x4, _x5) {\n        return _ref3.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: 'checkPermissions',\n    value: function () {\n      var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(userId, commandPermissionGroup) {\n        var roles, groups;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.bot.usePermissions) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 2:\n                if (!(commandPermissionGroup === 'permissions.public')) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 4:\n                _context2.next = 6;\n                return this.databaseInitialized();\n\n              case 6:\n\n                // get user's roles\n                roles = this.bot.db.get('permissions.users.' + userId + '.roles').value();\n\n                // if user has `admin` role, allow it\n\n                if (!(roles && roles.admin)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 9:\n\n                // get roles assigned to the command group\n                groups = this.bot.db.get('permissions.groups.' + commandPermissionGroup).value();\n\n                // if there are no groups, and requirePermissions is false, allow it\n                // requirePermissions = false == (public by default)\n\n                if (!(!groups || !Object.keys(groups))) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                if (this.bot.requirePermissions) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 13:\n                return _context2.abrupt('return', false);\n\n              case 14:\n                if (!groups.public) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 16:\n                if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_lodash_array__[\"intersection\"])(Object.keys(roles), Object.keys(groups)).length) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 18:\n                return _context2.abrupt('return', false);\n\n              case 19:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function checkPermissions(_x7, _x8) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: 'validate',\n    value: function validate(regex) {\n      return function (message) {\n        return regex.exec(message.text);\n      };\n    }\n  }, {\n    key: 'validateBotName',\n    value: function validateBotName(message) {\n      var exec = this.botNameRegex.exec(message.text);\n      if (!exec) {\n        return;\n      }\n\n      return exec[1];\n    }\n  }, {\n    key: 'respond',\n    value: function respond(validation, fn, name) {\n      this.respondFunctions.push([validation, fn, name]);\n    }\n  }, {\n    key: 'listen',\n    value: function listen(validation, fn, name) {\n      this.listenFunctions.push([validation, fn, name]);\n    }\n  }, {\n    key: 'setHelp',\n    value: function setHelp(text, fnName) {\n      this.help.push(fnName);\n      this[fnName].help = text;\n    }\n  }, {\n    key: 'setPermissionGroup',\n    value: function setPermissionGroup(fn, name) {\n      this[fn].permissionGroup = this.name + '.' + name;\n    }\n  }]);\n\n  return ChatPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\nvar listen = function listen(validation) {\n  return function (target, name, descriptor) {\n    var fn = descriptor.value;\n\n    if (!fn.permissionGroup) {\n      fn.permissionGoup = target.name + '.' + name;\n    }\n\n    target.postConstructor = target.postConstructor || [];\n    target.postConstructor.push([target.listen, [validation, fn, name]]);\n  };\n};\n\nvar respond = function respond(validation) {\n  return function (target, name, descriptor) {\n    var fn = descriptor.value;\n\n    if (!fn.permissionGroup) {\n      fn.permissionGoup = target.name + '.' + name;\n    }\n\n    target.postConstructor = target.postConstructor || [];\n    target.postConstructor.push([target.respond, [validation, fn, name]]);\n  };\n};\n\nvar help = function help(text) {\n  return function (target, fnName) {\n    target.postConstructor.push([target.setHelp, [text, fnName]]);\n  };\n};\n\nvar permissionGroup = function permissionGroup(name) {\n  return function (target, fnName) {\n    target.postConstructor.push([target.setPermissionGroup, [fnName, name]]);\n  };\n};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Plugin; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Plugin = function () {\n  function Plugin() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Plugin);\n\n    this.help = undefined;\n    this._requiresDatabase = false;\n\n    this.options = options;\n  }\n\n  _createClass(Plugin, [{\n    key: 'register',\n    value: function register(bot) {\n      if (!bot) {\n        throw new Error('No bot passed to register; fatal.');\n      }\n\n      if (!this.name) {\n        throw new Error('This plugin has a missing `name` property; some functionality will not work.');\n      }\n\n      this.bot = bot;\n      this.database();\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      if (!this.bot) {\n        throw new Error('No bot to listen on; fatal.');\n      }\n    }\n  }, {\n    key: 'database',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.defaultDatabase) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n\n                Object.keys(this.defaultDatabase).forEach(function (name) {\n                  var val = _this.bot.db.get(name).value();\n\n                  if (typeof val === 'undefined') {\n                    _this.bot.db.set(name, _this.defaultDatabase[name]).value();\n                  }\n                });\n\n              case 4:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function database() {\n        return _ref.apply(this, arguments);\n      }\n\n      return database;\n    }()\n  }, {\n    key: 'databaseInitialized',\n    value: function () {\n      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this._requiresDatabase = true;\n\n                if (!(this._requiresDatabase && this.bot.db)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 3:\n                return _context2.abrupt('return', new Promise(function (resolve) {\n                  _this2.bot.emitter.on('dbLoaded', resolve);\n                }));\n\n              case 4:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function databaseInitialized() {\n        return _ref2.apply(this, arguments);\n      }\n\n      return databaseInitialized;\n    }()\n  }]);\n\n  return Plugin;\n}();\n\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__db__ = __webpack_require__(19);\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_0__db__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_0__db__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_uuid__);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Message; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Message = function Message(_ref) {\n  var user = _ref.user;\n  var channel = _ref.channel;\n  var adapter = _ref.adapter;\n  var _ref$id = _ref.id;\n  var id = _ref$id === undefined ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_node_uuid__[\"v4\"])() : _ref$id;\n\n  _classCallCheck(this, Message);\n\n  this.user = user;\n  this.channel = channel;\n  this.adapter = adapter;\n  this.id = id;\n};\n\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(3);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return TextMessage; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar TextMessage = function (_Message) {\n  _inherits(TextMessage, _Message);\n\n  function TextMessage(_ref) {\n    var text = _ref.text;\n    var _ref$whisper = _ref.whisper;\n    var whisper = _ref$whisper === undefined ? false : _ref$whisper;\n\n    _classCallCheck(this, TextMessage);\n\n    var _this = _possibleConstructorReturn(this, (TextMessage.__proto__ || Object.getPrototypeOf(TextMessage)).apply(this, arguments));\n\n    if (text) {\n      _this.text = text.trim();\n    }\n\n    _this.whisper = !!whisper;\n    return _this;\n  }\n\n  return TextMessage;\n}(__WEBPACK_IMPORTED_MODULE_0__message__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__greetings__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__help__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__permissions__ = __webpack_require__(24);\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_0__greetings__, \"a\")) __webpack_require__.d(exports, \"Greetings\", function() { return __WEBPACK_IMPORTED_MODULE_0__greetings__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__help__, \"a\")) __webpack_require__.d(exports, \"Help\", function() { return __WEBPACK_IMPORTED_MODULE_1__help__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_2__permissions__, \"a\")) __webpack_require__.d(exports, \"Permissions\", function() { return __WEBPACK_IMPORTED_MODULE_2__permissions__[\"a\"]; });\n\n\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return User; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar User = function User(name) {\n  var id = arguments.length <= 1 || arguments[1] === undefined ? name : arguments[1];\n\n  _classCallCheck(this, User);\n\n  this.name = name;\n  this.id = id;\n};\n\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_uuid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__messages_text__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__messages_presence__ = __webpack_require__(8);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Adapter; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar Adapter = (_temp = _class = function () {\n  function Adapter() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Adapter);\n\n    this.options = options;\n    this.id = options.id || __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_node_uuid__[\"v4\"])();\n    this.status = Adapter.STATUS.UNINITIALIZED;\n  }\n\n  _createClass(Adapter, [{\n    key: 'register',\n    value: function register(bot) {\n      if (!bot) {\n        throw new Error('No bot passed to register; fatal.');\n      }\n      if (!this.name) {\n        throw new Error('This adapter has no `name` property; some plugins will not work.');\n      }\n\n      this.bot = bot;\n\n      this.status = Adapter.STATUS.CONNECTING;\n      this.listen();\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      if (!this.bot) {\n        throw new Error('No bot to listen on; fatal.');\n      }\n    }\n  }, {\n    key: 'receive',\n    value: function receive(_ref) {\n      var user = _ref.user;\n      var text = _ref.text;\n      var channel = _ref.channel;\n      var whisper = _ref.whisper;\n\n      if (!text) {\n        this.bot.log.warning('Message received with undefined text.');\n        return;\n      }\n\n      var message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */]({ user: user, text: text, channel: channel, whisper: whisper, adapter: this.id });\n      this.bot.emitter.emit('receive-message', message);\n    }\n  }, {\n    key: 'receiveWhisper',\n    value: function receiveWhisper(_ref2) {\n      var user = _ref2.user;\n      var text = _ref2.text;\n      var channel = _ref2.channel;\n\n      if (!text) {\n        this.bot.log.warning('Message received with undefined text.');\n        return;\n      }\n\n      text = this.bot.prependNameForWhisper(text);\n      this.receive({ user: user, text: text, channel: channel, whisper: true });\n    }\n  }, {\n    key: 'enter',\n    value: function enter(_ref3) {\n      var user = _ref3.user;\n      var channel = _ref3.channel;\n\n      var message = new __WEBPACK_IMPORTED_MODULE_2__messages_presence__[\"a\" /* default */]({\n        user: user,\n        channel: channel,\n        adapter: this.id,\n        type: __WEBPACK_IMPORTED_MODULE_2__messages_presence__[\"a\" /* default */].TYPES.ENTER\n      });\n\n      this.bot.emitter.emit('enter', message);\n    }\n  }, {\n    key: 'leave',\n    value: function leave(_ref4) {\n      var user = _ref4.user;\n      var channel = _ref4.channel;\n\n      var message = new __WEBPACK_IMPORTED_MODULE_2__messages_presence__[\"a\" /* default */]({\n        user: user,\n        channel: channel,\n        adapter: this.id,\n        type: __WEBPACK_IMPORTED_MODULE_2__messages_presence__[\"a\" /* default */].TYPES.LEAVE\n      });\n\n      this.bot.emitter.emit('leave', message);\n    }\n  }, {\n    key: 'send',\n    value: function send(message) {\n      console.log(message.text);\n    }\n  }, {\n    key: 'ping',\n    value: function ping() {\n      this.pong();\n    }\n  }, {\n    key: 'pong',\n    value: function pong() {\n      console.log('Ping received, this.pong() not implemented.');\n    }\n  }, {\n    key: 'getUserIdByUserName',\n    value: function getUserIdByUserName(name) {\n      console.log('getUserIdByUserName not implemented by this adapter.');\n      return name;\n    }\n  }]);\n\n  return Adapter;\n}(), _class.STATUS = {\n  UNINITIALIZED: 0,\n  CONNECTING: 1,\n  CONNECTED: 2,\n  DISCONNECTED: 3,\n  RECONNECTING: 4,\n  ERROR: 5\n}, _temp);\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(3);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return PresenceMessage; });var _class, _temp;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar PresenceMessage = (_temp = _class = function (_Message) {\n  _inherits(PresenceMessage, _Message);\n\n  function PresenceMessage(_ref) {\n    var type = _ref.type;\n\n    _classCallCheck(this, PresenceMessage);\n\n    var _this = _possibleConstructorReturn(this, (PresenceMessage.__proto__ || Object.getPrototypeOf(PresenceMessage)).apply(this, arguments));\n\n    _this.type = type;\n    return _this;\n  }\n\n  return PresenceMessage;\n}(__WEBPACK_IMPORTED_MODULE_0__message__[\"a\" /* default */]), _class.TYPES = {\n  ENTER: 0,\n  LEAVE: 1\n}, _temp);\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"node-uuid\");\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapter__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__adapters__ = __webpack_require__(17);\n\n/* harmony export */ __webpack_require__.d(exports, \"adapters\", function() { return adapters; });/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__adapter__, \"a\")) __webpack_require__.d(exports, \"Adapter\", function() { return __WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\"]; });\n\n\n\nvar adapters = __WEBPACK_IMPORTED_MODULE_0__adapters__;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__presence__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__text__ = __webpack_require__(4);\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_0__message__, \"a\")) __webpack_require__.d(exports, \"Message\", function() { return __WEBPACK_IMPORTED_MODULE_0__message__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__presence__, \"a\")) __webpack_require__.d(exports, \"PresenceMessage\", function() { return __WEBPACK_IMPORTED_MODULE_1__presence__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_2__text__, \"a\")) __webpack_require__.d(exports, \"TextMessage\", function() { return __WEBPACK_IMPORTED_MODULE_2__text__[\"a\"]; });\n\n\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__http__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chat__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugins__ = __webpack_require__(5);\n\n/* harmony export */ __webpack_require__.d(exports, \"plugins\", function() { return plugins; });/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__plugin__, \"a\")) __webpack_require__.d(exports, \"Plugin\", function() { return __WEBPACK_IMPORTED_MODULE_1__plugin__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_2__event__, \"a\")) __webpack_require__.d(exports, \"EventPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_2__event__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_3__http__, \"a\")) __webpack_require__.d(exports, \"HTTPPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_3__http__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"d\")) __webpack_require__.d(exports, \"ChatPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"d\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"e\")) __webpack_require__.d(exports, \"respond\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"e\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"c\")) __webpack_require__.d(exports, \"listen\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"c\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"a\")) __webpack_require__.d(exports, \"help\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"b\")) __webpack_require__.d(exports, \"permissionGroup\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"b\"]; });\n\n\n\n\n\n\n\nvar plugins = __WEBPACK_IMPORTED_MODULE_0__plugins__;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"eventemitter3\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"log\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"superagent\");\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"superagent-promise-plugin\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shell__ = __webpack_require__(18);\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_0__shell__, \"a\")) __webpack_require__.d(exports, \"Shell\", function() { return __WEBPACK_IMPORTED_MODULE_0__shell__[\"a\"]; });\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_readline__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_readline___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_readline__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapter__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__user__ = __webpack_require__(6);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return ShellAdapter; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar SHELL = 'SHELL';\nvar SHELL_USER = new __WEBPACK_IMPORTED_MODULE_2__user__[\"a\" /* default */]('shell');\n\nvar EXIT_COMMANDS = ['exit', 'quit', 'q'];\n\nvar ShellAdapter = function (_Adapter) {\n  _inherits(ShellAdapter, _Adapter);\n\n  function ShellAdapter() {\n    _classCallCheck(this, ShellAdapter);\n\n    var _this = _possibleConstructorReturn(this, (ShellAdapter.__proto__ || Object.getPrototypeOf(ShellAdapter)).call(this));\n\n    _this.name = 'shell';\n\n    _this.rl = __WEBPACK_IMPORTED_MODULE_0_readline___default.a.createInterface({\n      input: process.stdin,\n      output: process.stdout\n    });\n    return _this;\n  }\n\n  _createClass(ShellAdapter, [{\n    key: 'prompt',\n    value: function prompt() {\n      var _this2 = this;\n\n      this.rl.question('Chat: ', function (answer) {\n        if (EXIT_COMMANDS.includes(answer)) {\n          return process.exit();\n        }\n\n        _get(ShellAdapter.prototype.__proto__ || Object.getPrototypeOf(ShellAdapter.prototype), 'receive', _this2).call(_this2, {\n          text: answer,\n          channel: SHELL,\n          user: SHELL_USER\n        });\n\n        _this2.prompt();\n      });\n    }\n  }, {\n    key: 'register',\n    value: function register(bot) {\n      _get(ShellAdapter.prototype.__proto__ || Object.getPrototypeOf(ShellAdapter.prototype), 'register', this).call(this, bot);\n      this.prompt();\n      this.status = __WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\" /* default */].STATUS.CONNECTED;\n    }\n  }, {\n    key: 'getUserIdByUserName',\n    value: function getUserIdByUserName() {\n      return 'shell';\n    }\n  }]);\n\n  return ShellAdapter;\n}(__WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cryptr__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cryptr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_cryptr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lowdb__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lowdb___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lowdb__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_fs_extra__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_fs_extra___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_fs_extra__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_underscore_db__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_underscore_db___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_underscore_db__);\n\n/* harmony export */ __webpack_require__.d(exports, \"deserialize\", function() { return deserialize; });\n/* harmony export */ __webpack_require__.d(exports, \"serialize\", function() { return serialize; });\n/* harmony export */ __webpack_require__.d(exports, \"read\", function() { return read; });\n/* harmony export */ __webpack_require__.d(exports, \"write\", function() { return write; });\n/* harmony export */ __webpack_require__.d(exports, \"readLocal\", function() { return readLocal; });\n/* harmony export */ __webpack_require__.d(exports, \"writeLocal\", function() { return writeLocal; });\n/* harmony export */ __webpack_require__.d(exports, \"DB\", function() { return DB; });function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\n\nvar deserialize = function deserialize(cryptr) {\n  return function (str) {\n    if (!str) {\n      return {};\n    }\n    var decrypted = cryptr.decrypt(str);\n    var obj = JSON.parse(decrypted);\n    return obj;\n  };\n};\n\nvar serialize = function serialize(cryptr) {\n  return function (obj) {\n    var str = JSON.stringify(obj);\n    var encrypted = cryptr.encrypt(str);\n    return encrypted;\n  };\n};\n\nvar read = function read(readFile) {\n  return function (path, deserialize) {\n    return new Promise(function (resolve, reject) {\n      readFile(path).then(function (data) {\n        try {\n          resolve(deserialize(data));\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  };\n};\n\nvar write = function write(writeFile) {\n  return function (path, obj, serialize) {\n    return new Promise(function (resolve, reject) {\n      try {\n        var data = serialize(obj);\n        writeFile(path, data).then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n};\n\nvar readLocal = function readLocal(path) {\n  return new Promise(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.ensureFile(path, function (err) {\n      if (err) {\n        return reject(err);\n      }\n      __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.readFile(path, 'utf8', function (err, data) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nvar writeLocal = function writeLocal(path, data) {\n  return new Promise(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.ensureFile(path, function (err) {\n      if (err) {\n        return reject(err);\n      }\n      __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.writeFile(path, data, 'utf8', function (err) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nvar DB = function () {\n  var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2) {\n    var path = _ref2.path;\n    var key = _ref2.key;\n    var _ref2$readFile = _ref2.readFile;\n    var readFile = _ref2$readFile === undefined ? readLocal : _ref2$readFile;\n    var _ref2$writeFile = _ref2.writeFile;\n    var writeFile = _ref2$writeFile === undefined ? writeLocal : _ref2$writeFile;\n    var cryptr, dbPath, db;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cryptr = new __WEBPACK_IMPORTED_MODULE_0_cryptr___default.a(key || name);\n            dbPath = path || './data/' + name + '.json';\n            _context.next = 4;\n            return new __WEBPACK_IMPORTED_MODULE_1_lowdb___default.a(dbPath, {\n              storage: {\n                read: read(readFile),\n                write: write(writeFile)\n              },\n              format: {\n                deserialize: deserialize(cryptr),\n                serialize: serialize(cryptr)\n              }\n            });\n\n          case 4:\n            db = _context.sent;\n\n\n            db._.mixin(__WEBPACK_IMPORTED_MODULE_3_underscore_db___default.a);\n            return _context.abrupt('return', db);\n\n          case 7:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function DB(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return EventPlugin; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar EventPlugin = function (_Plugin) {\n  _inherits(EventPlugin, _Plugin);\n\n  function EventPlugin() {\n    _classCallCheck(this, EventPlugin);\n\n    return _possibleConstructorReturn(this, (EventPlugin.__proto__ || Object.getPrototypeOf(EventPlugin)).apply(this, arguments));\n  }\n\n  return EventPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return HTTPPlugin; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar HTTPPlugin = function (_Plugin) {\n  _inherits(HTTPPlugin, _Plugin);\n\n  function HTTPPlugin() {\n    _classCallCheck(this, HTTPPlugin);\n\n    return _possibleConstructorReturn(this, (HTTPPlugin.__proto__ || Object.getPrototypeOf(HTTPPlugin)).apply(this, arguments));\n  }\n\n  return HTTPPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Greetings; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _desc, _value, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar GREETINGS = ['hi', 'hello', 'sup', 'greetings', 'yo', 'hey'];\n\nvar FAREWELLS = ['goodbye', 'farwell', 'bye', 'later', 'see ya', 'cya'];\n\nvar shouldGreet = function shouldGreet(m) {\n  return GREETINGS.includes(m.text.toLowerCase());\n};\nvar shouldFarewell = function shouldFarewell(m) {\n  return FAREWELLS.includes(m.text.toLowerCase());\n};\n\nvar Greetings = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('Greets you back when you greet the channel.'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('greetings'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"c\" /* listen */])(shouldGreet), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('Says goodbye when you do.'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('greetings'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"c\" /* listen */])(shouldFarewell), (_class = function (_ChatPlugin) {\n  _inherits(Greetings, _ChatPlugin);\n\n  function Greetings() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Greetings);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Greetings.__proto__ || Object.getPrototypeOf(Greetings)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'greeting', _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Greetings, [{\n    key: 'greeting',\n    value: function greeting(_, message) {\n      var randomGreeting = GREETINGS[parseInt(Math.random() * GREETINGS.length)];\n      return randomGreeting + ', ' + message.user.name + '!';\n    }\n  }, {\n    key: 'farewell',\n    value: function farewell(_, message) {\n      var randomFarewell = FAREWELLS[parseInt(Math.random() * FAREWELLS.length)];\n      return randomFarewell + ', ' + message.user.name + '!';\n    }\n  }]);\n\n  return Greetings;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* ChatPlugin */]), (_applyDecoratedDescriptor(_class.prototype, 'greeting', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'greeting'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'farewell', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'farewell'), _class.prototype)), _class));\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Help; });var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _desc, _value, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar Help = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/help explains commands.'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('help'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^help$/i), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/help <search> finds information about a specific command.'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('help'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^help (\\w+)$/i), (_class = function (_ChatPlugin) {\n  _inherits(Help, _ChatPlugin);\n\n  function Help() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Help);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Help.__proto__ || Object.getPrototypeOf(Help)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'help', _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Help, [{\n    key: 'pluginHelp',\n    value: function pluginHelp() {\n      return this.bot.plugins.filter(function (p) {\n        return p.help && p.help.length > 0;\n      }).map(function (p) {\n        return p.helpText().join('\\n');\n      }, []).join('\\n');\n    }\n  }, {\n    key: 'pluginHelpSearch',\n    value: function pluginHelpSearch(_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2);\n\n      var search = _ref3[1];\n\n      return this.bot.plugins.filter(function (p) {\n        return p.help && p.help.length > 0;\n      }).map(function (p) {\n        return p.helpText().filter(function (t) {\n          return t.toLowerCase().indexOf(search.toLowerCase()) > -1;\n        }).join('\\n');\n      }, []).join('\\n');\n    }\n  }]);\n\n  return Help;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* ChatPlugin */]), (_applyDecoratedDescriptor(_class.prototype, 'pluginHelp', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'pluginHelp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'pluginHelpSearch', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'pluginHelpSearch'), _class.prototype)), _class));\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Permissions; });var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _desc, _value, _class, _class2, _temp;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar Permissions = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions authorize admin <password> to authorize yourself as an admin'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('public'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions authorize admin (\\S+)$/i), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions add user <user> <role> to add a role to a user'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions add user (\\w+) (\\w+)$/i), _dec7 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view user <user> to view roles given to a user'), _dec8 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec9 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions view user (\\w+)$/i), _dec10 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions remove user <user> <role> to remove a role from a user'), _dec11 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec12 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions remove user (\\w+) (\\w+)$/i), _dec13 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions add role <permissiongroup> <role> to allow access to a permissionGroup'), _dec14 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec15 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions add role (\\S+) (\\w+)$/i), _dec16 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions remove group <permissionGroup> <role> to allow access to a permissionGroup'), _dec17 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec18 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions remove role (\\S+) (\\w+)$/i), _dec19 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view group <permissionGroup> to view roles with access to ' + 'commands under that permissionGroup'), _dec20 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec21 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions view group (\\S+)$/i), (_class = (_temp = _class2 = function (_ChatPlugin) {\n  _inherits(Permissions, _ChatPlugin);\n\n  function Permissions(options) {\n    _classCallCheck(this, Permissions);\n\n    var _this = _possibleConstructorReturn(this, (Permissions.__proto__ || Object.getPrototypeOf(Permissions)).apply(this, arguments));\n\n    _this.name = 'permissions';\n    _this.defaultDatabase = { permissions: {} };\n\n\n    if (options) {\n      _this.adminPassword = options.adminPassword;\n    }\n    return _this;\n  }\n\n  _createClass(Permissions, [{\n    key: 'register',\n    value: function register(bot) {\n      _get(Permissions.prototype.__proto__ || Object.getPrototypeOf(Permissions.prototype), 'register', this).call(this, bot);\n\n      if (!this.adminPassword) {\n        bot.log.error('No adminPassword provided to Permissions plugin');\n      }\n    }\n  }, {\n    key: 'admin',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2, message) {\n        var _ref3 = _slicedToArray(_ref2, 2);\n\n        var adminPassword = _ref3[1];\n        var id;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                if (!(this.adminPassword && adminPassword === this.adminPassword)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                id = Permissions.nameToId(message.user.id);\n\n                this.bot.db.set('permissions.users.' + id + '.roles.admin', true).value();\n                this.bot.db.write();\n                return _context.abrupt('return', 'User authorized as admin.');\n\n              case 7:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function admin(_x, _x2) {\n        return _ref.apply(this, arguments);\n      }\n\n      return admin;\n    }()\n  }, {\n    key: 'addRoleToUser',\n    value: function () {\n      var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref5, message) {\n        var _ref6 = _slicedToArray(_ref5, 3);\n\n        var match = _ref6[0];\n        var name = _ref6[1];\n        var role = _ref6[2];\n        var userId;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context2.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                userId = Permissions.nameToId(this.bot.adapters[message.adapter].getUserIdByUserName(name));\n\n                if (!userId) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                this.bot.db.set('permissions.users.' + userId + '.roles.' + role, true).value();\n                this.bot.db.write();\n                return _context2.abrupt('return', name + ' added to role ' + role + '.');\n\n              case 8:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function addRoleToUser(_x3, _x4) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return addRoleToUser;\n    }()\n  }, {\n    key: 'viewUser',\n    value: function () {\n      var _ref7 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref8, message) {\n        var _ref9 = _slicedToArray(_ref8, 2);\n\n        var match = _ref9[0];\n        var name = _ref9[1];\n        var userId, perms;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                userId = Permissions.nameToId(this.bot.adapters[message.adapter].getUserIdByUserName(name));\n\n                if (!userId) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                perms = Object.keys(this.bot.db.get('permissions.users.' + userId + '.roles').value());\n                return _context3.abrupt('return', perms.join(', '));\n\n              case 6:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function viewUser(_x5, _x6) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return viewUser;\n    }()\n  }, {\n    key: 'removeRoleFromUser',\n    value: function () {\n      var _ref10 = _asyncToGenerator(regeneratorRuntime.mark(function _callee4(_ref11, message) {\n        var _ref12 = _slicedToArray(_ref11, 3);\n\n        var match = _ref12[0];\n        var name = _ref12[1];\n        var role = _ref12[2];\n        var userId, roles;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context4.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                userId = Permissions.nameToId(this.bot.adapters[message.adapter].getUserIdByUserName(name));\n\n                if (!userId) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                roles = this.bot.db.get('permissions.users.' + userId + '.roles').value();\n\n                delete roles[role];\n                this.bot.db.set('permissions.users.' + userId + '.roles', roles).value();\n                this.bot.db.write();\n                return _context4.abrupt('return', name + ' removed from role ' + role + '.');\n\n              case 10:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function removeRoleFromUser(_x7, _x8) {\n        return _ref10.apply(this, arguments);\n      }\n\n      return removeRoleFromUser;\n    }()\n  }, {\n    key: 'addRoleToGroup',\n    value: function () {\n      var _ref13 = _asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref14 /*, message*/) {\n        var _ref15 = _slicedToArray(_ref14, 3);\n\n        var permissionGroup = _ref15[1];\n        var role = _ref15[2];\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context5.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n\n                this.bot.db.set('permissions.groups.' + permissionGroup + '.' + role, true).value();\n                this.bot.db.write();\n                return _context5.abrupt('return', 'role \"' + role + '\" given permission to commands under group \"' + permissionGroup + '\".');\n\n              case 6:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function addRoleToGroup(_x9) {\n        return _ref13.apply(this, arguments);\n      }\n\n      return addRoleToGroup;\n    }()\n  }, {\n    key: 'removeRoleFromGroup',\n    value: function () {\n      var _ref16 = _asyncToGenerator(regeneratorRuntime.mark(function _callee6(_ref17 /*, message*/) {\n        var _ref18 = _slicedToArray(_ref17, 3);\n\n        var permissionGroup = _ref18[1];\n        var role = _ref18[2];\n        var group;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context6.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                group = this.bot.db.get('permissions.groups.' + permissionGroup).value();\n\n                delete group[role];\n                this.bot.db.set('permissions.groups.' + permissionGroup, group).value();\n                this.bot.db.write();\n                return _context6.abrupt('return', 'role \"' + role + '\" removed permission to commands under group \"' + permissionGroup + '\".');\n\n              case 8:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function removeRoleFromGroup(_x10) {\n        return _ref16.apply(this, arguments);\n      }\n\n      return removeRoleFromGroup;\n    }()\n  }, {\n    key: 'viewGroup',\n    value: function () {\n      var _ref19 = _asyncToGenerator(regeneratorRuntime.mark(function _callee7(_ref20 /*, message*/) {\n        var _ref21 = _slicedToArray(_ref20, 2);\n\n        var group = _ref21[1];\n        var perms;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                perms = Object.keys(this.bot.db.get('permissions.groups.' + group).value());\n                return _context7.abrupt('return', perms.join(', '));\n\n              case 4:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function viewGroup(_x11) {\n        return _ref19.apply(this, arguments);\n      }\n\n      return viewGroup;\n    }()\n  }]);\n\n  return Permissions;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* ChatPlugin */]), _class2.nameToId = function (name) {\n  return name.replace(/[^\\w]/g, '').toLowerCase();\n}, _temp), (_applyDecoratedDescriptor(_class.prototype, 'admin', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'admin'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'addRoleToUser', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'addRoleToUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewUser', [_dec7, _dec8, _dec9], Object.getOwnPropertyDescriptor(_class.prototype, 'viewUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'removeRoleFromUser', [_dec10, _dec11, _dec12], Object.getOwnPropertyDescriptor(_class.prototype, 'removeRoleFromUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'addRoleToGroup', [_dec13, _dec14, _dec15], Object.getOwnPropertyDescriptor(_class.prototype, 'addRoleToGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'removeRoleFromGroup', [_dec16, _dec17, _dec18], Object.getOwnPropertyDescriptor(_class.prototype, 'removeRoleFromGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewGroup', [_dec19, _dec20, _dec21], Object.getOwnPropertyDescriptor(_class.prototype, 'viewGroup'), _class.prototype)), _class));\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"cryptr\");\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"fs-extra\");\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lodash/array\");\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lowdb\");\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"readline\");\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"underscore-db\");\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eventemitter3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_log__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_log___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_log__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_superagent__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_superagent___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_superagent__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__plugins_plugins__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__db__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__adapters__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__messages__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__plugins__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__user__ = __webpack_require__(6);\n\n/* harmony export */ __webpack_require__.d(exports, \"Exobot\", function() { return Exobot; });\n/* harmony export */ __webpack_require__.d(exports, \"LogLevels\", function() { return LogLevels; });/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_6__adapters__) if([\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_6__adapters__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_7__messages__) if([\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_7__messages__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_8__plugins__) if([\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_8__plugins__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_5__db__) if([\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_5__db__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_9__user__, \"a\")) __webpack_require__.d(exports, \"User\", function() { return __WEBPACK_IMPORTED_MODULE_9__user__[\"a\"]; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp, _initialiseProps;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default.a.Promise = Promise;\n\n\n\nvar http = __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default.a.patch(__WEBPACK_IMPORTED_MODULE_2_superagent___default.a);\n\n\n\nvar Exobot = (_temp = _class = function () {\n  function Exobot(name) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, Exobot);\n\n    _initialiseProps.call(this);\n\n    this.name = name;\n    this.alias = options.alias;\n    this.emitter = new __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default.a();\n    this.http = http;\n    this.requirePermissions = options.requirePermissions;\n\n    this.initLog(options.logLevel || __WEBPACK_IMPORTED_MODULE_1_log___default.a.WARNING);\n    this.initAdapters(options.adapters);\n    this.initPlugins(options.plugins);\n\n    var dbPath = options.dbPath || './data/' + name + '.json';\n    this.initDB(options.key, dbPath, options.readFile, options.writeFile);\n  }\n\n  _createClass(Exobot, [{\n    key: 'addPlugin',\n    value: function addPlugin(plugin) {\n      plugin.register(this);\n      this.plugins.push(plugin);\n    }\n  }, {\n    key: 'addAdapter',\n    value: function addAdapter(adapter) {\n      var name = adapter.name;\n\n      if (this.getAdapterByName(name)) {\n        this.log.warning('Multiple \"' + name + '\" adapters were initialized.');\n      }\n\n      adapter.register(this);\n      this.adapters[adapter.id] = adapter;\n    }\n  }, {\n    key: 'prependNameForWhisper',\n    value: function prependNameForWhisper(text) {\n      if (text.slice(0, this.name.length).toLowerCase() !== this.name.toLowerCase() && text.slice(0, this.alias.length).toLowerCase() !== this.alias.toLowerCase()) {\n        text = this.name + ' ' + text;\n      }\n\n      return text;\n    }\n  }, {\n    key: 'send',\n    value: function send(message) {\n      if (!message.text) {\n        return;\n      }\n      var adapter = this.getAdapterByMessage(message);\n\n      if (!adapter) {\n        this.bot.log.warning('Message sent with invalid adapter: ' + message.adapter);\n        return;\n      }\n\n      adapter.send(message);\n    }\n  }, {\n    key: 'getAdapterByMessage',\n    value: function getAdapterByMessage(message) {\n      return this.adapters[message.adapter];\n    }\n  }, {\n    key: 'getAdapterByName',\n    value: function getAdapterByName(name) {\n      var _this = this;\n\n      return Object.keys(this.adapters).map(function (id) {\n        return _this.adapters[id];\n      }).find(function (a) {\n        return a.name.toLowerCase() === name.toLowerCase();\n      });\n    }\n  }]);\n\n  return Exobot;\n}(), _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.plugins = [];\n  this.adapters = {};\n\n  this.initAdapters = function () {\n    var adapters = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    adapters.forEach(function (a) {\n      return _this2.addAdapter(a);\n    });\n  };\n\n  this.initPlugins = function () {\n    var plugins = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    plugins.forEach(function (p) {\n      _this2.addPlugin(p);\n\n      // if the Permissions plugin isn't initialized, we can optimize later on\n      // by not waiting for DB initialization and permissions checking.\n      if (p instanceof __WEBPACK_IMPORTED_MODULE_4__plugins_plugins__[\"Permissions\"]) {\n        _this2.usePermissions = true;\n      }\n    });\n  };\n\n  this.initLog = function (logLevel) {\n    var log = new __WEBPACK_IMPORTED_MODULE_1_log___default.a(logLevel || __WEBPACK_IMPORTED_MODULE_1_log___default.a.WARNING);\n    _this2.log = log;\n    _this2.logLevel = logLevel;\n\n    if (logLevel === __WEBPACK_IMPORTED_MODULE_1_log___default.a.DEBUG) {\n      setInterval(_this2.logProcess, 10000);\n    }\n  };\n\n  this.initDB = function (key, dbPath, readFile, writeFile) {\n    if (!key) {\n      _this2.log.critical('Pass options.key in to bot initializer. Database not initializing.');\n      return;\n    }\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__db__[\"DB\"])({\n      key: key,\n      readFile: readFile,\n      writeFile: writeFile,\n      path: dbPath,\n      emitter: _this2.emitter\n    }).then(function (db) {\n      _this2.db = db;\n      _this2.emitter.emit('dbLoaded', db);\n    }, _this2.log.critical);\n  };\n\n  this.logProcess = function () {\n    _this2.log.debug(process.memoryUsage(), process.cpuUsage());\n  };\n}, _temp);\n\n\n\n\n\n\nvar LogLevels = __WEBPACK_IMPORTED_MODULE_1_log___default.a;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// exobot.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c0d2a6454ec9e6d64ab7","import Plugin from './plugin';\nimport TextMessage from '../messages/text';\nimport { intersection } from 'lodash/array';\n\nconst DEFAULT_REGEXP = /.+/;\n\nexport class ChatPlugin extends Plugin {\n  regexp = DEFAULT_REGEXP;\n\n  respondFunctions = [];\n  listenFunctions = [];\n  help = [];\n\n  constructor () {\n    super(...arguments);\n  }\n\n  helpText () {\n    return this.help.map(n => `[${this[n].permissionGroup}] ${this[n].help}`);\n  }\n\n  register (bot) {\n    super.register(bot);\n    this.bot = bot;\n    this.botNameRegex = new RegExp(`^(?:(?:@?${bot.name}|${bot.alias})[,\\\\s:.-]*)(.+)`, 'i');\n\n    if (this.postConstructor) {\n      this.postConstructor.forEach(([fn, args]) => fn.bind(this)(...args));\n    }\n\n    bot.emitter.on('receive-message', message => {\n      // v = [\n      //   validation function or regex,\n      //   the response function from the plugin,\n      //   the name of the function (the class.property name)\n      // ];\n      // as pushed by the listen/respond functions below\n      this.respondFunctions.forEach(v => this.process(...v, message, true));\n      this.listenFunctions.forEach(v => this.process(...v, message));\n    });\n  }\n\n  async process (validation, response, fnName, message, isResponder=false) {\n    try {\n      if (isResponder) {\n        const text = this.validateBotName(message);\n        if (!text) { return; }\n\n        message = new TextMessage({ ...message, text, direct: true });\n      } else {\n        // if it's a listener on a whisper, remove the botname first so it still\n        // works\n        const text = this.validateBotName(message);\n        if (!text) { return; }\n\n        message = new TextMessage({ ...message, text, direct: true });\n      }\n\n      if (validation.exec) { validation = this.validate(validation); }\n\n      const res = validation(message);\n\n      if (res) {\n        if (await this.checkPermissions(message.user.id, this[fnName].permissionGroup)) {\n          const text = response.bind(this)(res, message);\n          if (!text) { return; }\n\n          if (text instanceof Promise) {\n            text.then(t => {\n              const newMessage = new TextMessage({ ...message, text: t });\n              this.bot.send(newMessage);\n            });\n          } else {\n            const newMessage = new TextMessage({ ...message, text });\n            this.bot.send(newMessage);\n          }\n        }\n      }\n    } catch (e) {\n      this.bot.log.warning(e);\n    }\n  }\n\n  async checkPermissions (userId, commandPermissionGroup) {\n    if (!this.bot.usePermissions) { return true; }\n\n    // special group for admin authorization - otherwise you could never auth\n    // in the first place when public commands are disabled\n    if (commandPermissionGroup === 'permissions.public') { return true; }\n\n    await this.databaseInitialized();\n\n    // get user's roles\n    const roles = this.bot.db.get(`permissions.users.${userId}.roles`).value();\n\n    // if user has `admin` role, allow it\n    if (roles && roles.admin) { return true; }\n\n    // get roles assigned to the command group\n    const groups = this.bot.db.get(`permissions.groups.${commandPermissionGroup}`).value();\n\n    // if there are no groups, and requirePermissions is false, allow it\n    // requirePermissions = false == (public by default)\n    if (!groups || !Object.keys(groups)) {\n      if (!this.bot.requirePermissions) {\n        return true;\n      }\n\n      // otherwise, if there are no groups, and we're not an admin, return\n      // false.\n      return false;\n    }\n    // if command is in `public`, allow it\n    if (groups.public) { return true; }\n\n    // check user's list of roles against list of groups that have the command\n    // if there's a match (user is in a group with the command), allow it\n    if (intersection(Object.keys(roles), Object.keys(groups)).length) {\n      return true;\n    }\n\n    return false;\n  }\n\n  validate (regex) {\n    return message => regex.exec(message.text);\n  }\n\n  validateBotName (message) {\n    const exec = this.botNameRegex.exec(message.text);\n    if (!exec) { return; }\n\n    return exec[1];\n  }\n\n  respond (validation, fn, name) {\n    this.respondFunctions.push([validation, fn, name]);\n  }\n\n  listen (validation, fn, name) {\n    this.listenFunctions.push([validation, fn, name]);\n  }\n\n  setHelp (text, fnName) {\n    this.help.push(fnName);\n    this[fnName].help = text;\n  }\n\n  setPermissionGroup (fn, name) {\n    this[fn].permissionGroup = `${this.name}.${name}`;\n  }\n}\n\nexport const listen = (validation) => (target, name, descriptor) => {\n  const fn = descriptor.value;\n\n  if (!fn.permissionGroup) {\n    fn.permissionGoup = `${target.name}.${name}`;\n  }\n\n  target.postConstructor = target.postConstructor || [];\n  target.postConstructor.push(\n    [target.listen, [validation, fn, name]]\n  );\n};\n\nexport const respond = (validation) => (target, name, descriptor) => {\n  const fn = descriptor.value;\n\n  if (!fn.permissionGroup) {\n    fn.permissionGoup = `${target.name}.${name}`;\n  }\n\n  target.postConstructor = target.postConstructor || [];\n  target.postConstructor.push(\n    [target.respond, [validation, fn, name]]\n  );\n};\n\nexport const help = (text) => (target, fnName) => {\n  target.postConstructor.push(\n    [target.setHelp, [text, fnName]]\n  );\n};\n\nexport const permissionGroup = (name) => (target, fnName) => {\n  target.postConstructor.push([target.setPermissionGroup, [fnName, name] ]);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/chat.js","export default class Plugin {\n  help = undefined;\n  _requiresDatabase = false;\n\n  constructor (options={}) {\n    this.options = options;\n  }\n\n  register (bot) {\n    if (!bot) { throw new Error('No bot passed to register; fatal.'); }\n\n    if (!this.name) {\n      throw new Error(\n        'This plugin has a missing `name` property; some functionality will not work.'\n      );\n    }\n\n    this.bot = bot;\n    this.database();\n  }\n\n  listen () {\n    if (!this.bot) {\n      throw new Error('No bot to listen on; fatal.');\n    }\n  }\n\n  async database () {\n    if (this.defaultDatabase) {\n      await this.databaseInitialized();\n\n      Object.keys(this.defaultDatabase).forEach(name => {\n        const val = this.bot.db.get(name).value();\n\n        if (typeof val === 'undefined') {\n          this.bot.db.set(name, this.defaultDatabase[name]).value();\n        }\n      });\n    }\n  }\n\n  async databaseInitialized () {\n    this._requiresDatabase = true;\n\n    if (this._requiresDatabase && this.bot.db) {\n      return true;\n    }\n\n    return new Promise((resolve) => {\n      this.bot.emitter.on('dbLoaded', resolve);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugin.js","import { v4 as uuid } from 'node-uuid';\n\nexport default class Message {\n  constructor ({ user, channel, adapter, id=uuid() }) {\n    this.user = user;\n    this.channel = channel;\n    this.adapter = adapter;\n    this.id = id;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/message.js","import Message from './message';\n\nexport default class TextMessage extends Message {\n  constructor ({ text, whisper=false }) {\n    super(...arguments);\n\n    if (text) {\n      this.text = text.trim();\n    }\n\n    this.whisper = !!whisper;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/text.js","export default class User {\n  constructor (name, id=name) {\n    this.name = name;\n    this.id = id;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/user.js","import { v4 as uuid } from 'node-uuid';\n\nimport TextMessage from '../messages/text';\nimport PresenceMessage from '../messages/presence';\n\nexport default class Adapter {\n  static STATUS = {\n    UNINITIALIZED: 0,\n    CONNECTING: 1,\n    CONNECTED: 2,\n    DISCONNECTED: 3,\n    RECONNECTING: 4,\n    ERROR: 5,\n  }\n\n  constructor (options={}) {\n    this.options = options;\n    this.id = options.id || uuid();\n    this.status = Adapter.STATUS.UNINITIALIZED;\n  }\n\n  register (bot) {\n    if (!bot) { throw new Error('No bot passed to register; fatal.'); }\n    if (!this.name) {\n      throw new Error('This adapter has no `name` property; some plugins will not work.');\n    }\n\n    this.bot = bot;\n\n    this.status = Adapter.STATUS.CONNECTING;\n    this.listen();\n  }\n\n  listen () {\n    if (!this.bot) { throw new Error('No bot to listen on; fatal.'); }\n  }\n\n  receive ({ user, text, channel, whisper }) {\n    if (!text) {\n      this.bot.log.warning('Message received with undefined text.');\n      return;\n    }\n\n    const message = new TextMessage({ user, text, channel, whisper, adapter: this.id });\n    this.bot.emitter.emit('receive-message', message);\n  }\n\n  receiveWhisper ({ user, text, channel }) {\n    if (!text) {\n      this.bot.log.warning('Message received with undefined text.');\n      return;\n    }\n\n    text = this.bot.prependNameForWhisper(text);\n    this.receive({ user, text, channel, whisper: true });\n  }\n\n  enter ({ user, channel }) {\n    const message = new PresenceMessage({\n      user,\n      channel,\n      adapter: this.id,\n      type: PresenceMessage.TYPES.ENTER,\n    });\n\n    this.bot.emitter.emit('enter', message);\n  }\n\n  leave ({ user, channel }) {\n    const message = new PresenceMessage({\n      user,\n      channel,\n      adapter: this.id,\n      type: PresenceMessage.TYPES.LEAVE,\n    });\n\n    this.bot.emitter.emit('leave', message);\n  }\n\n  send (message) {\n    console.log(message.text);\n  }\n\n  ping () {\n    this.pong();\n  }\n\n  pong () {\n    console.log('Ping received, this.pong() not implemented.');\n  }\n\n  getUserIdByUserName (name) {\n    console.log('getUserIdByUserName not implemented by this adapter.');\n    return name;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapter.js","import Message from './message';\n\nexport default class PresenceMessage extends Message {\n  static TYPES = {\n    ENTER: 0,\n    LEAVE: 1,\n  }\n\n  constructor ({ type }) {\n    super(...arguments);\n    this.type = type;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/presence.js","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 9\n// module chunks = 0","export { default as Adapter } from './adapter';\n\nimport * as a from './adapters';\nexport const adapters = a;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/index.js","export { default as Plugin } from './plugin';\nexport { default as EventPlugin } from './event';\nexport { default as HTTPPlugin } from './http';\n\nexport { ChatPlugin, respond, listen, help, permissionGroup } from './chat';\n\nimport * as p from './plugins';\nexport const plugins = p;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/index.js","module.exports = require(\"eventemitter3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter3\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"log\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"superagent\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"superagent-promise-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent-promise-plugin\"\n// module id = 16\n// module chunks = 0","import readline from 'readline';\n\nimport Adapter from '../adapter';\nimport User from '../../user';\n\nconst SHELL = 'SHELL';\nconst SHELL_USER = new User('shell');\n\nconst EXIT_COMMANDS = [\n  'exit',\n  'quit',\n  'q',\n];\n\nexport default class ShellAdapter extends Adapter {\n  name = 'shell';\n\n  constructor () {\n    super();\n    this.rl = readline.createInterface({\n      input: process.stdin,\n      output: process.stdout,\n    });\n  }\n\n  prompt () {\n    this.rl.question('Chat: ', (answer) => {\n      if (EXIT_COMMANDS.includes(answer)) {\n        return process.exit();\n      }\n\n      super.receive({\n        text: answer,\n        channel: SHELL,\n        user: SHELL_USER,\n      });\n\n      this.prompt();\n    });\n  }\n\n  register (bot) {\n    super.register(bot);\n    this.prompt();\n    this.status = Adapter.STATUS.CONNECTED;\n  }\n\n  getUserIdByUserName () {\n    return 'shell';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapters/shell.js","import Cryptr from 'cryptr';\nimport Low from 'lowdb';\nimport fs from 'fs-extra';\nimport underscoredb from 'underscore-db';\n\nexport const deserialize = cryptr => {\n  return str => {\n    if (!str) { return {}; }\n    const decrypted = cryptr.decrypt(str);\n    const obj = JSON.parse(decrypted);\n    return obj;\n  };\n};\n\nexport const serialize = cryptr => {\n  return obj => {\n    const str = JSON.stringify(obj);\n    const encrypted = cryptr.encrypt(str);\n    return encrypted;\n  };\n};\n\nexport const read = (readFile) => {\n  return (path, deserialize) => {\n    return new Promise((resolve, reject) => {\n      readFile(path).then(data => {\n        try {\n          resolve(deserialize(data));\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  };\n};\n\nexport const write = writeFile => {\n  return (path, obj, serialize) => {\n    return new Promise((resolve, reject) => {\n      try {\n        const data = serialize(obj);\n        writeFile(path, data).then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n};\n\nexport const readLocal = (path) => {\n  return new Promise((resolve, reject) => {\n    fs.ensureFile(path, (err) => {\n      if (err) { return reject(err); }\n      fs.readFile(path, 'utf8', (err, data) => {\n        if (err) { return reject(err); }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nexport const writeLocal = (path, data) => {\n  return new Promise((resolve, reject) => {\n    fs.ensureFile(path, (err) => {\n      if (err) { return reject(err); }\n      fs.writeFile(path, data, 'utf8', (err) => {\n        if (err) { return reject(err); }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nexport async function DB ({ path, key, readFile=readLocal, writeFile=writeLocal }) {\n  const cryptr = new Cryptr(key || name);\n  const dbPath = path || `./data/${name}.json`;\n\n  const db = await new Low(dbPath, {\n    storage: {\n      read: read(readFile),\n      write: write(writeFile),\n    },\n    format: {\n      deserialize: deserialize(cryptr),\n      serialize: serialize(cryptr),\n    },\n  });\n\n  db._.mixin(underscoredb);\n  return db;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/db.js","import Plugin from './plugin';\n\nexport default class EventPlugin extends Plugin {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/event.js","import Plugin from './plugin';\n\nexport default class HTTPPlugin extends Plugin {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/http.js","import { ChatPlugin, listen, help, permissionGroup } from '../chat';\n\nconst GREETINGS = [\n  'hi',\n  'hello',\n  'sup',\n  'greetings',\n  'yo',\n  'hey',\n];\n\nconst FAREWELLS = [\n  'goodbye',\n  'farwell',\n  'bye',\n  'later',\n  'see ya',\n  'cya',\n];\n\nconst shouldGreet = (m) => GREETINGS.includes(m.text.toLowerCase());\nconst shouldFarewell = (m) => FAREWELLS.includes(m.text.toLowerCase());\n\nexport class Greetings extends ChatPlugin {\n  name = 'greeting';\n\n  @help('Greets you back when you greet the channel.');\n  @permissionGroup('greetings');\n  @listen(shouldGreet)\n  greeting (_, message) {\n    const randomGreeting = GREETINGS[parseInt(Math.random() * GREETINGS.length)];\n    return `${randomGreeting}, ${message.user.name}!`;\n  }\n\n  @help('Says goodbye when you do.');\n  @permissionGroup('greetings');\n  @listen(shouldFarewell)\n  farewell (_, message) {\n    const randomFarewell = FAREWELLS[parseInt(Math.random() * FAREWELLS.length)];\n    return `${randomFarewell}, ${message.user.name}!`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/greetings.js","import { ChatPlugin, respond, help, permissionGroup } from '../chat';\n\nexport class Help extends ChatPlugin {\n  name = 'help';\n\n  @help('/help explains commands.');\n  @permissionGroup('help');\n  @respond(/^help$/i);\n  pluginHelp () {\n    return this.bot.plugins\n                    .filter(p => p.help && p.help.length > 0)\n                    .map(p => p.helpText().join('\\n'), [])\n                    .join('\\n');\n  }\n\n  @help('/help <search> finds information about a specific command.');\n  @permissionGroup('help');\n  @respond(/^help (\\w+)$/i);\n  pluginHelpSearch ([, search]) {\n    return this.bot.plugins\n                    .filter(p => p.help && p.help.length > 0)\n                    .map(p => {\n                      return p.helpText().filter(t => {\n                        return t.toLowerCase().indexOf(search.toLowerCase()) > -1;\n                      }).join('\\n');\n                    }, [])\n                    .join('\\n');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/help.js","import { ChatPlugin, respond, help, permissionGroup } from '../chat';\n\nexport class Permissions extends ChatPlugin {\n  name = 'permissions';\n  defaultDatabase = { permissions: {} };\n\n  static nameToId = (name) => {\n    return name.replace(/[^\\w]/g, '').toLowerCase();\n  }\n\n  constructor (options) {\n    super(...arguments);\n\n    if (options) {\n      this.adminPassword = options.adminPassword;\n    }\n  }\n\n  register (bot) {\n    super.register(bot);\n\n    if (!this.adminPassword) {\n      bot.log.error('No adminPassword provided to Permissions plugin');\n    }\n  }\n\n  @help('/permissions authorize admin <password> to authorize yourself as an admin');\n  @permissionGroup('public');\n  @respond(/^permissions authorize admin (\\S+)$/i);\n  async admin ([, adminPassword], message) {\n    await this.databaseInitialized();\n\n    // Validate the password - if there is one.\n    if (this.adminPassword && adminPassword === this.adminPassword) {\n      const id = Permissions.nameToId(message.user.id);\n      this.bot.db.set(`permissions.users.${id}.roles.admin`, true).value();\n      this.bot.db.write();\n      return 'User authorized as admin.';\n    }\n  }\n\n  @help('/permissions add user <user> <role> to add a role to a user');\n  @permissionGroup('role-management');\n  @respond(/^permissions add user (\\w+) (\\w+)$/i);\n  async addRoleToUser ([match, name, role], message) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n\n    const userId = Permissions.nameToId(\n      this.bot.adapters[message.adapter].getUserIdByUserName(name)\n    );\n\n    if (userId) {\n      this.bot.db.set(`permissions.users.${userId}.roles.${role}`, true).value();\n      this.bot.db.write();\n      return `${name} added to role ${role}.`;\n    }\n  }\n\n  @help('/permissions view user <user> to view roles given to a user');\n  @permissionGroup('role-management');\n  @respond(/^permissions view user (\\w+)$/i);\n  async viewUser ([match, name], message) {\n    await this.databaseInitialized();\n\n    const userId = Permissions.nameToId(\n      this.bot.adapters[message.adapter].getUserIdByUserName(name)\n    );\n\n    if (userId) {\n      const perms = Object.keys(this.bot.db.get(`permissions.users.${userId}.roles`).value());\n      return perms.join(', ');\n    }\n  }\n\n  @help('/permissions remove user <user> <role> to remove a role from a user');\n  @permissionGroup('role-management');\n  @respond(/^permissions remove user (\\w+) (\\w+)$/i);\n  async removeRoleFromUser ([match, name, role], message) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n\n    const userId = Permissions.nameToId(\n      this.bot.adapters[message.adapter].getUserIdByUserName(name)\n    );\n\n    if (userId) {\n      const roles = this.bot.db.get(`permissions.users.${userId}.roles`).value();\n      delete roles[role];\n      this.bot.db.set(`permissions.users.${userId}.roles`, roles).value();\n      this.bot.db.write();\n      return `${name} removed from role ${role}.`;\n    }\n  }\n\n  @help('/permissions add role <permissiongroup> <role> to allow access to a permissionGroup');\n  @permissionGroup('role-management');\n  @respond(/^permissions add role (\\S+) (\\w+)$/i);\n  async addRoleToGroup ([, permissionGroup, role]/*, message*/) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n\n    this.bot.db.set(`permissions.groups.${permissionGroup}.${role}`, true).value();\n    this.bot.db.write();\n    return `role \"${role}\" given permission to commands under group \"${permissionGroup}\".`;\n  }\n\n  @help('/permissions remove group <permissionGroup> <role> to allow access to a permissionGroup');\n  @permissionGroup('role-management');\n  @respond(/^permissions remove role (\\S+) (\\w+)$/i);\n  async removeRoleFromGroup ([, permissionGroup, role]/*, message*/) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n\n    const group = this.bot.db.get(`permissions.groups.${permissionGroup}`).value();\n    delete group[role];\n    this.bot.db.set(`permissions.groups.${permissionGroup}`, group).value();\n    this.bot.db.write();\n    return `role \"${role}\" removed permission to commands under group \"${permissionGroup}\".`;\n  }\n\n  @help(\n    '/permissions view group <permissionGroup> to view roles with access to ' +\n    'commands under that permissionGroup'\n  );\n  @permissionGroup('role-management');\n  @respond(/^permissions view group (\\S+)$/i);\n  async viewGroup ([, group]/*, message*/) {\n    await this.databaseInitialized();\n\n    const perms = Object.keys(this.bot.db.get(`permissions.groups.${group}`).value());\n    return perms.join(', ');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/permissions.js","module.exports = require(\"cryptr\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cryptr\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"lodash/array\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/array\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"lowdb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lowdb\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"underscore-db\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore-db\"\n// module id = 30\n// module chunks = 0","import Emitter from 'eventemitter3';\nimport Log from 'log';\nimport superagent from 'superagent';\nimport sapp from 'superagent-promise-plugin';\nsapp.Promise = Promise;\n\nimport { Permissions } from './plugins/plugins';\n\nconst http = sapp.patch(superagent);\n\nimport { DB } from './db';\n\nexport class Exobot {\n  plugins = [];\n  adapters = {};\n\n  constructor (name, options={}) {\n    this.name = name;\n    this.alias = options.alias;\n    this.emitter = new Emitter();\n    this.http = http;\n    this.requirePermissions = options.requirePermissions;\n\n    this.initLog(options.logLevel || Log.WARNING);\n    this.initAdapters(options.adapters);\n    this.initPlugins(options.plugins);\n\n    const dbPath = options.dbPath || `./data/${name}.json`;\n    this.initDB(options.key, dbPath, options.readFile, options.writeFile);\n  }\n\n  initAdapters = (adapters=[]) => {\n    adapters.forEach(a => this.addAdapter(a));\n  }\n\n  initPlugins = (plugins=[]) => {\n    plugins.forEach(p => {\n      this.addPlugin(p);\n\n      // if the Permissions plugin isn't initialized, we can optimize later on\n      // by not waiting for DB initialization and permissions checking.\n      if (p instanceof Permissions) {\n        this.usePermissions = true;\n      }\n    });\n  }\n\n  initLog = (logLevel) => {\n    const log = new Log(logLevel || Log.WARNING);\n    this.log = log;\n    this.logLevel = logLevel;\n\n    if (logLevel === Log.DEBUG) {\n      setInterval(this.logProcess, 10000);\n    }\n  }\n\n  initDB = (key, dbPath, readFile, writeFile) => {\n    if (!key) {\n      this.log.critical('Pass options.key in to bot initializer. Database not initializing.');\n      return;\n    }\n\n    DB({\n      key,\n      readFile,\n      writeFile,\n      path: dbPath,\n      emitter: this.emitter,\n    }).then((db) => {\n      this.db = db;\n      this.emitter.emit('dbLoaded', db);\n    }, this.log.critical);\n  }\n\n  logProcess = () => {\n    this.log.debug(process.memoryUsage(), process.cpuUsage());\n  }\n\n  addPlugin (plugin) {\n    plugin.register(this);\n    this.plugins.push(plugin);\n  }\n\n  addAdapter (adapter) {\n    const name = adapter.name;\n\n    if (this.getAdapterByName(name)) {\n      this.log.warning(`Multiple \"${name}\" adapters were initialized.`);\n    }\n\n    adapter.register(this);\n    this.adapters[adapter.id] = adapter;\n  }\n\n  prependNameForWhisper (text) {\n    if (\n      text.slice(0, this.name.length).toLowerCase() !== this.name.toLowerCase() &&\n      text.slice(0, this.alias.length).toLowerCase() !== this.alias.toLowerCase()\n    ) {\n      text = `${this.name} ${text}`;\n    }\n\n    return text;\n  }\n\n  send (message) {\n    if (!message.text) { return; }\n    const adapter = this.getAdapterByMessage(message);\n\n    if (!adapter) {\n      this.bot.log.warning(`Message sent with invalid adapter: ${message.adapter}`);\n      return;\n    }\n\n    adapter.send(message);\n  }\n\n  getAdapterByMessage (message) {\n    return this.adapters[message.adapter];\n  }\n\n  getAdapterByName (name) {\n    return Object\n            .keys(this.adapters)\n            .map(id => this.adapters[id])\n            .find(a => a.name.toLowerCase() === name.toLowerCase());\n  }\n}\n\nexport * from './adapters';\nexport * from './messages';\nexport * from './plugins';\nexport * from './db';\nexport { default as User } from './user';\nexport const LogLevels = Log;\n\n\n\n// WEBPACK FOOTER //\n// ./src/exobot.js"],"sourceRoot":""}