{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///exobot.js","webpack:///webpack/bootstrap 8e0d44de64670686b4bd","webpack:///./src/plugins/chat.js","webpack:///./src/plugins/plugin.js","webpack:///./src/messages/message.js","webpack:///external \"node-uuid\"","webpack:///./src/user.js","webpack:///./src/adapters/adapter.js","webpack:///./src/messages/presence.js","webpack:///./src/messages/text.js","webpack:///./src/adapters/index.js","webpack:///./src/plugins/index.js","webpack:///external \"eventemitter3\"","webpack:///external \"lodash\"","webpack:///external \"lodash/array\"","webpack:///external \"log\"","webpack:///external \"superagent\"","webpack:///external \"superagent-promise-plugin\"","webpack:///./src/adapters/adapters/shell.js","webpack:///./src/db/db.js","webpack:///./src/plugins/event.js","webpack:///./src/plugins/http.js","webpack:///./src/plugins/plugins/greetings.js","webpack:///./src/plugins/plugins/help.js","webpack:///./src/plugins/plugins/permissions.js","webpack:///external \"cryptr\"","webpack:///external \"fs-extra\"","webpack:///external \"lowdb\"","webpack:///external \"readline\"","webpack:///external \"underscore-db\"","webpack:///./src/exobot.js","webpack:///external \"proptypes\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_27__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_28__","__WEBPACK_EXTERNAL_MODULE_14__","__WEBPACK_EXTERNAL_MODULE_15__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_29__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_34__","__WEBPACK_EXTERNAL_MODULE_30__","__WEBPACK_EXTERNAL_MODULE_17__","__WEBPACK_EXTERNAL_MODULE_18__","__WEBPACK_EXTERNAL_MODULE_31__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","_toConsumableArray","arr","Array","isArray","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__plugin__","__WEBPACK_IMPORTED_MODULE_1__messages_text__","ChatPlugin","listen","respond","help","permissionGroup","_extends","assign","target","source","_slicedToArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","push","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","DEFAULT_REGEXP","_Plugin","_this","regexp","respondFunctions","listenFunctions","_this2","map","bot","_this3","botNameRegex","RegExp","alias","postConstructor","forEach","_ref","_ref2","args","concat","emitter","on","text","stripLeadingBotName","skipFns","message","v","process","_ref3","_ref4","filter","_ref5","_ref6","includes","_x","_x2","_x3","_x4","_ref7","regeneratorRuntime","mark","_callee","validation","response","fnName","res","t","_newMessage","newMessage","wrap","_context","prev","exec","validateMessage","checkPermissions","user","id","sent","abrupt","send","t0","log","warning","stop","_x5","_x6","_ref8","_callee2","userId","commandPermissionGroup","_context2","regex","permissionGoup","setHelp","setPermissionGroup","Plugin","KEY_REGEX","options","_requiresDatabase","propTypes","defaultProps","parseConfig","keys","checkConfig","Error","notice","database","optionKeys","config","k","reduce","env","envify","pass","toString","replace","split","join","toUpperCase","defaultDatabase","databaseInitialized","val","db","set","_this4","__WEBPACK_IMPORTED_MODULE_0__db__","__WEBPACK_IMPORT_KEY__","__WEBPACK_IMPORTED_MODULE_0__message__","__WEBPACK_IMPORTED_MODULE_1__presence__","__WEBPACK_IMPORTED_MODULE_2__text__","__WEBPACK_IMPORTED_MODULE_0_node_uuid__","Message","channel","adapter","_ref$id","__WEBPACK_IMPORTED_MODULE_0__greetings__","__WEBPACK_IMPORTED_MODULE_1__help__","__WEBPACK_IMPORTED_MODULE_2__permissions__","User","roles","adapters","_defineProperty","obj","__WEBPACK_IMPORTED_MODULE_0__messages_text__","__WEBPACK_IMPORTED_MODULE_1__messages_presence__","__WEBPACK_IMPORTED_MODULE_2__user__","Adapter","_class","_temp","status","STATUS","UNINITIALIZED","roleMapping","initUsers","CONNECTING","whisper","emit","prependNameForWhisper","receive","type","TYPES","ENTER","LEAVE","console","pong","adapterUsers","users","write","getUser","adapterUserId","adapterUsername","adapterUser","getRoles","botUsers","botId","CONNECTED","DISCONNECTED","RECONNECTING","ERROR","PresenceMessage","_Message","TextMessage","_ref$whisper","trim","__WEBPACK_IMPORTED_MODULE_1__adapter__","__WEBPACK_IMPORTED_MODULE_0__adapters__","__WEBPACK_IMPORTED_MODULE_1__plugin__","__WEBPACK_IMPORTED_MODULE_2__event__","__WEBPACK_IMPORTED_MODULE_3__http__","__WEBPACK_IMPORTED_MODULE_4__chat__","__WEBPACK_IMPORTED_MODULE_0__plugins__","plugins","__WEBPACK_IMPORTED_MODULE_0__shell__","__WEBPACK_IMPORTED_MODULE_0_readline__","__WEBPACK_IMPORTED_MODULE_0_readline___default","ShellAdapter","SHELL","EXIT_COMMANDS","_Adapter","rl","a","createInterface","input","stdin","output","stdout","prompt","question","answer","exit","__WEBPACK_IMPORTED_MODULE_0_cryptr__","__WEBPACK_IMPORTED_MODULE_0_cryptr___default","__WEBPACK_IMPORTED_MODULE_1_lowdb__","__WEBPACK_IMPORTED_MODULE_1_lowdb___default","__WEBPACK_IMPORTED_MODULE_2_fs_extra__","__WEBPACK_IMPORTED_MODULE_2_fs_extra___default","__WEBPACK_IMPORTED_MODULE_3_underscore_db__","__WEBPACK_IMPORTED_MODULE_3_underscore_db___default","deserialize","serialize","read","readLocal","writeLocal","DB","cryptr","str","decrypted","decrypt","JSON","parse","stringify","encrypted","encrypt","readFile","path","data","e","writeFile","ensureFile","dbPath","_ref2$readFile","_ref2$writeFile","storage","format","_","mixin","EventPlugin","HTTPPlugin","_applyDecoratedDescriptor","decorators","context","initializer","slice","reverse","decorator","__WEBPACK_IMPORTED_MODULE_0__chat__","Greetings","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","GREETINGS","FAREWELLS","GREETINGS_REGEX","getGreetingsRegex","FAREWELLS_REGEX","getFarewellsRegex","shouldGreet","shouldFarewell","_ChatPlugin","_ret","_len","_key","randomGreeting","parseInt","Math","random","randomFarewell","Help","helpText","search","toLowerCase","indexOf","__WEBPACK_IMPORTED_MODULE_1__exobot__","__WEBPACK_IMPORTED_MODULE_2_node_uuid__","Permissions","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_class2","_temp2","permissions","adminPassword","string","isRequired","admin","nameToId","addRole","addRoleToUser","userIdDirty","role","getUserIdByUserName","warn","viewUser","_callee3","_ref9","perms","_ref10","_context3","viewEffectiveUser","_x7","_x8","_ref11","_callee4","_ref12","_ref13","_context4","getUserRoles","removeRoleFromUser","_x9","_x10","_ref14","_callee5","_ref15","_ref16","_context5","removeRole","addRoleToGroup","_x11","_ref17","_callee6","_ref18","_ref19","_context6","removeRoleFromGroup","_x12","_ref20","_callee7","_ref21","group","_ref22","_context7","viewGroup","_x13","_ref23","_callee8","_ref24","_ref25","_context8","multipleAdapterLogin","_x14","_x15","_ref26","_callee9","_ref27","_ref28","token","_context9","mergeUsers","__WEBPACK_IMPORTED_MODULE_0_eventemitter3__","__WEBPACK_IMPORTED_MODULE_0_eventemitter3___default","__WEBPACK_IMPORTED_MODULE_1_log__","__WEBPACK_IMPORTED_MODULE_1_log___default","__WEBPACK_IMPORTED_MODULE_2_superagent__","__WEBPACK_IMPORTED_MODULE_2_superagent___default","__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__","__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default","__WEBPACK_IMPORTED_MODULE_4_lodash_array__","__WEBPACK_IMPORTED_MODULE_5_lodash__","__WEBPACK_IMPORTED_MODULE_6_proptypes__","__WEBPACK_IMPORTED_MODULE_6_proptypes___default","__WEBPACK_IMPORTED_MODULE_7__plugins_plugins__","__WEBPACK_IMPORTED_MODULE_8__db__","__WEBPACK_IMPORTED_MODULE_9__adapters__","__WEBPACK_IMPORTED_MODULE_10__messages__","__WEBPACK_IMPORTED_MODULE_11__plugins__","__WEBPACK_IMPORTED_MODULE_12__user__","PropTypes","Exobot","LogLevels","_initialiseProps","http","patch","USERS_DB","requirePermissions","initLog","logLevel","WARNING","critical","bind","initDB","initAdapters","initPlugins","debug","destUser","srcUser","roleName","adapterRoles","getRolesForUser","groups","usePermissions","plugin","register","getAdapterByName","getAdapterByMessage","find","_this5","addAdapter","addPlugin","DEBUG","setInterval","logProcess","memoryUsage","cpuUsage"],"mappings":";CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,UAAAA,QAAA,iBAAAA,QAAA,YAAAA,QAAA,UAAAA,QAAA,gBAAAA,QAAA,OAAAA,QAAA,SAAAA,QAAA,aAAAA,QAAA,aAAAA,QAAA,YAAAA,QAAA,cAAAA,QAAA,6BAAAA,QAAA,kBACA,kBAAAC,gBAAAC,IACAD,QAAA,uKAAAJ,GACA,gBAAAC,SACAA,QAAA,aAAAD,EAAAG,QAAA,UAAAA,QAAA,iBAAAA,QAAA,YAAAA,QAAA,UAAAA,QAAA,gBAAAA,QAAA,OAAAA,QAAA,SAAAA,QAAA,aAAAA,QAAA,aAAAA,QAAA,YAAAA,QAAA,cAAAA,QAAA,6BAAAA,QAAA,kBAEAJ,EAAA,aAAAC,EAAAD,EAAA,OAAAA,EAAA,cAAAA,EAAA,YAAAA,EAAA,OAAAA,EAAA,gBAAAA,EAAA,IAAAA,EAAA,MAAAA,EAAA,aAAAA,EAAA,UAAAA,EAAA,SAAAA,EAAA,WAAAA,EAAA,6BAAAA,EAAA,mBACCO,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAArB,OAGA,IAAAC,GAAAqB,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAxB,WAUA,OANAmB,GAAAE,GAAAI,KAAAxB,EAAAD,QAAAC,IAAAD,QAAAoB,GAGAnB,EAAAuB,GAAA,EAGAvB,EAAAD,QAvBA,GAAAsB,KA6DA,OAjCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAG,EAAA,SAAAK,GAA2C,MAAAA,IAG3CR,EAAAS,EAAA,SAAA7B,EAAA8B,EAAAC,GACAC,OAAAC,eAAAjC,EAAA8B,GACAI,cAAA,EACAC,YAAA,EACAC,IAAAL,KAKAX,EAAAiB,EAAA,SAAApC,GACA,GAAA8B,GAAA9B,KAAAqC,WACA,WAA2B,MAAArC,GAAA,YAC3B,WAAiC,MAAAA,GAEjC,OADAmB,GAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAmB,EAAA,SAAAC,EAAAC,GAAsD,MAAAT,QAAAU,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDrB,EAAAwB,EAAA,GAGAxB,IAAAyB,EAAA,MDgBM,SAAS5C,EAAQD,EAASoB,GAEhC,YAgBA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASQ,GAAmBC,GAAO,GAAIC,MAAMC,QAAQF,GAAM,CAAE,IAAK,GAAIxC,GAAI,EAAG2C,EAAOF,MAAMD,EAAII,QAAS5C,EAAIwC,EAAII,OAAQ5C,IAAO2C,EAAK3C,GAAKwC,EAAIxC,EAAM,OAAO2C,GAAe,MAAOF,OAAMI,KAAKL,GAE1L,QAASM,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAvB5c,GAAIM,GAAwChE,EAAoB,GAC5DiE,EAA+CjE,EAAoB,GAEvEA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOsF,KACxDlE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOuF,KACxDnE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOwF,KACxDpE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOyF,KACxDrE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO0F,IAAoB,IAAIC,GAAW3D,OAAO4D,QAAU,SAAUC,GAAU,IAAK,GAAItE,GAAI,EAAGA,EAAI2B,UAAUiB,OAAQ5C,IAAK,CAAE,GAAIuE,GAAS5C,UAAU3B,EAAI,KAAK,GAAIgC,KAAOuC,GAAc9D,OAAOU,UAAUC,eAAelB,KAAKqE,EAAQvC,KAAQsC,EAAOtC,GAAOuC,EAAOvC,IAAY,MAAOsC,IAEpVE,EAAiB,WAAc,QAASC,GAAcjC,EAAKxC,GAAK,GAAI0E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAKC,MAAW,KAAM,IAAK,GAAiCC,GAA7BC,EAAKxC,EAAIyC,OAAOC,cAAmBP,GAAMI,EAAKC,EAAGG,QAAQ/C,QAAoBsC,EAAKU,KAAKL,EAAG1E,QAAYL,GAAK0E,EAAK9B,SAAW5C,GAA3D2E,GAAK,IAAoE,MAAOrC,GAAOsC,GAAK,EAAMC,EAAKvC,EAAO,QAAU,KAAWqC,GAAMK,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIJ,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUlC,EAAKxC,GAAK,GAAIyC,MAAMC,QAAQF,GAAQ,MAAOA,EAAY,IAAIyC,OAAOC,WAAYzE,QAAO+B,GAAQ,MAAOiC,GAAcjC,EAAKxC,EAAa,MAAM,IAAIiD,WAAU,4DAEllBoC,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MAE5hB2C,EAAO,QAAS9E,GAAII,EAAQC,EAAU0E,GAA2B,OAAX3E,IAAiBA,EAAS4E,SAAS1E,UAAW,IAAI2E,GAAOrF,OAAOsF,yBAAyB9E,EAAQC,EAAW,IAAa4D,SAATgB,EAAoB,CAAE,GAAIE,GAASvF,OAAOwF,eAAehF,EAAS,OAAe,QAAX+E,EAAmB,OAAkCnF,EAAImF,EAAQ9E,EAAU0E,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKzF,KAAgB,IAAIG,GAASsF,EAAKjF,GAAK,IAAeiE,SAAXtE,EAA4C,MAAOA,GAAON,KAAK0F,IE1FtdM,EAAiB,KAEVnC,EAAb,SAAAoC,GAOE,QAAApC,KAAejB,EAAAhE,KAAAiF,EAAA,IAAAqC,GAAAlD,EAAApE,MAAAiF,EAAAH,WAAAnD,OAAAwF,eAAAlC,IAAArC,MAAA5C,KACJ6C,WADI,OAAAyE,GANfC,OAASH,EAMME,EAJfE,oBAIeF,EAHfG,mBAGeH,EAFflC,QAEekC,EAPjB,MAAA/C,GAAAU,EAAAoC,GAAAd,EAAAtB,IAAA/B,IAAA,WAAA3B,MAAA,WAWc,GAAAmG,GAAA1H,IACV,OAAOA,MAAKoF,KAAKuC,IAAI,SAAA3F,GAAA,UAAS0F,EAAK1F,GAAGqD,gBAAjB,KAAqCqC,EAAK1F,GAAGoD,UAZtElC,IAAA,WAAA3B,MAAA,SAeYqG,GAAK,GAAAC,GAAA7H,IACb6G,GAAA5B,EAAA5C,UAAAyC,WAAAnD,OAAAwF,eAAAlC,EAAA5C,WAAA,WAAArC,MAAAoB,KAAApB,KAAe4H,GACf5H,KAAK4H,IAAMA,EACX5H,KAAK8H,aAAe,GAAIC,QAAJ,YAAuBH,EAAInG,KAA3B,IAAmCmG,EAAII,MAAvC,mBAAgE,KAEhFhI,KAAKiI,iBACPjI,KAAKiI,gBAAgBC,QAAQ,SAAAC,GAAA,GAAAC,GAAA1C,EAAAyC,EAAA,GAAEzF,EAAF0F,EAAA,GAAMC,EAAND,EAAA,SAAgB1F,GAAGtB,KAAHwB,MAAAF,GAAAmF,GAAAS,OAAA7E,EAAiB4E,OAGhET,EAAIW,QAAQC,GAAG,kBAAmB,SAAAnH,GAShC,GAAMoH,GAAOZ,EAAKa,oBAAoBrH,EAAEoH,MAEpCE,IAGAF,KAAM,WAER,GAAMG,GAAU,GAAI5D,GAAA,EAAJM,KAAqBjE,GAAGoH,SACxCZ,GAAKL,iBAAiBU,QAAQ,SAAAW,GAAA,MAAKhB,GAAKiB,QAALlG,MAAAiF,EAAApE,EAAgBoF,GAAhBP,QAAmBM,OACtDD,EAAUd,EAAKL,iBAAiBG,IAAI,SAAAoB,GAAA,GAAAC,GAAAtD,EAAAqD,EAAA,GAAItH,EAAJuH,EAAA,SAAcvH,QAGpDoG,EAAKJ,gBACEwB,OAAO,SAAAC,GAAA,GAAAC,GAAAzD,EAAAwD,EAAA,GAAIzH,EAAJ0H,EAAA,UAAeR,EAAQS,SAAS3H,KACvCyG,QAAQ,SAAAW,GAAA,MAAKhB,GAAKiB,QAALlG,MAAAiF,EAAApE,EAAgBoF,GAAhBP,QAAmBjH,YA/C7C6B,IAAA,UAAA3B,MAAA,mBAAAuH,GAAAO,EAAAC,EAAAC,EAAAC,GAAA,MAAAC,GAAA7G,MAAA5C,KAAA6C,WAAA,GAAA4G,GAAAhH,EAAAiH,mBAAAC,KAAA,QAAAC,GAmDiBC,EAAYC,EAAUC,EAAQnB,GAnD/C,GAAAlG,GAAAsH,EAAAvB,EAAAwB,EAAAC,EAAAC,CAAA,OAAAT,oBAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhE,MAAA,UAAAgE,EAAAC,KAAA,EAqDY5H,EAAKmH,EAAWU,KAAOvK,KAAKwK,gBAAgBX,GAAcA,EAC1DG,EAAMtH,EAAGkG,EAAS5I,KAAK4H,MAEzBoC,EAxDV,CAAAK,EAAAhE,KAAA,eAAAgE,GAAAhE,KAAA,EAyDkBrG,KAAKyK,iBAAiB7B,EAAQ8B,KAAKC,GAAI3K,KAAK+J,GAAQ1E,gBAzDtE,YAAAgF,EAAAO,KAAA,CAAAP,EAAAhE,KAAA,YA0DgBoC,EAAOqB,EAAS1I,KAAKpB,KAAMgK,EAAKpB,GA1DhD,CAAAyB,EAAAhE,KAAA,eAAAgE,GAAAQ,OAAA,uBA6DcpC,YAAgB3F,UA7D9B,CAAAuH,EAAAhE,KAAA,eAAAgE,GAAAhE,KAAA,GA8D4BoC,CA9D5B,eA8DkBwB,GA9DlBI,EAAAO,KA+DkBT,EAAa,GAAInF,GAAA,EAAJM,KAAqBsD,GAASH,KAAMwB,KA/DnEI,EAAAQ,OAAA,SAgEmB7K,KAAK4H,IAAIkD,KAAKX,GAhEjC,SAmEgBA,EAAa,GAAInF,GAAA,EAAJM,KAAqBsD,GAASH,UACjDzI,KAAK4H,IAAIkD,KAAKX,EApExB,SAAAE,EAAAhE,KAAA,iBAAAgE,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,YAwEMrK,KAAK4H,IAAIoD,IAAIC,QAAbZ,EAAAU,GAxEN,yBAAAV,GAAAa,SAAAtB,EAAA5J,OAAA,iBAAA8I,QAAA5F,IAAA,mBAAA3B,MAAA,mBAAAkJ,GAAAU,EAAAC,GAAA,MAAAC,GAAAzI,MAAA5C,KAAA6C,WAAA,GAAAwI,GAAA5I,EAAAiH,mBAAAC,KAAA,QAAA2B,GA4E0BC,EAAQC,GA5ElC,MAAA9B,oBAAAU,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAApF,MAAA,aAAAoF,GAAAZ,OAAA,SA6EW7K,KAAK4H,IAAI6C,iBAAiBc,EAAQC,GA7E7C,wBAAAC,GAAAP,SAAAI,EAAAtL,QAAA,OAAAyK,QAAAvH,IAAA,sBAAA3B,MAAA,SAgFuBkH,GACnB,GAAM8B,GAAOvK,KAAK8H,aAAayC,KAAK9B,EACpC,IAAK8B,EAEL,MAAOA,GAAK,MApFhBrH,IAAA,UAAA3B,MAAA,SAuFWsI,EAAYnH,EAAIjB,GACvBzB,KAAKwH,iBAAiBlB,MAAMuD,EAAYnH,EAAIjB,OAxFhDyB,IAAA,SAAA3B,MAAA,SA2FUsI,EAAYnH,EAAIjB,GACtBzB,KAAKyH,gBAAgBnB,MAAMuD,EAAYnH,EAAIjB,OA5F/CyB,IAAA,UAAA3B,MAAA,SA+FWkH,EAAMsB,GACb/J,KAAKoF,KAAKkB,KAAKyD,GACf/J,KAAK+J,GAAQ3E,KAAOqD,KAjGxBvF,IAAA,qBAAA3B,MAAA,SAoGsBmB,EAAIjB,GACtBzB,KAAK0C,GAAI2C,gBAAqBrF,KAAKyB,KAAnC,IAA2CA,KArG/CyB,IAAA,kBAAA3B,MAAA,SAwGmBmK,GACf,MAAO,UAAA9C,GAAA,MAAW8C,GAAMnB,KAAK3B,EAAQH,WAzGzCxD,GAAgCF,EAAA,GA6GnBG,EAAS,SAAC2E,GAAD,MAAgB,UAACrE,EAAQ/D,EAAMiF,GACnD,GAAMhE,GAAKgE,EAAWnF,KAEjBmB,GAAG2C,kBACN3C,EAAGiJ,eAAoBnG,EAAO/D,KAA9B,IAAsCA,GAGxC+D,EAAOyC,gBAAkBzC,EAAOyC,oBAChCzC,EAAOyC,gBAAgB3B,MACpBd,EAAON,QAAS2E,EAAYnH,EAAIjB,OAIxB0D,EAAU,SAAC0E,GAAD,MAAgB,UAACrE,EAAQ/D,EAAMiF,GACpD,GAAMhE,GAAKgE,EAAWnF,KAEjBmB,GAAG2C,kBACN3C,EAAGiJ,eAAoBnG,EAAO/D,KAA9B,IAAsCA,GAGxC+D,EAAOyC,gBAAkBzC,EAAOyC,oBAChCzC,EAAOyC,gBAAgB3B,MACpBd,EAAOL,SAAU0E,EAAYnH,EAAIjB,OAIzB2D,EAAO,SAACqD,GAAD,MAAU,UAACjD,EAAQuE,GACrCvE,EAAOyC,gBAAgB3B,MACpBd,EAAOoG,SAAUnD,EAAMsB,OAIf1E,EAAkB,SAAC5D,GAAD,MAAU,UAAC+D,EAAQuE,GAChDvE,EAAOyC,gBAAgB3B,MAAMd,EAAOqG,oBAAqB9B,EAAQtI,QFyO7D,SAAS7B,EAAQD,EAASoB,GAEhC,YAMA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAN3FpD,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOmM,IAAW,IAAIxG,GAAW3D,OAAO4D,QAAU,SAAUC,GAAU,IAAK,GAAItE,GAAI,EAAGA,EAAI2B,UAAUiB,OAAQ5C,IAAK,CAAE,GAAIuE,GAAS5C,UAAU3B,EAAI,KAAK,GAAIgC,KAAOuC,GAAc9D,OAAOU,UAAUC,eAAelB,KAAKqE,EAAQvC,KAAQsC,EAAOtC,GAAOuC,EAAOvC,IAAY,MAAOsC,IAE3Ue,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MGnY1hB6H,EAAY,gBAEGD,EHyYR,WGnYX,QAAAA,KAAyB,GAAZE,GAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAAAmB,GAAAhE,KAAA8L,GAAA9L,KALzBoF,KAAOY,OAKkBhG,KAJzBiM,mBAAoB,EAIKjM,KAHzBkM,UAAY,KAGalM,KAFzBmM,gBAGEnM,KAAKgM,QAAUA,EH+jBjB,MA/KAzF,GAAauF,IACX5I,IAAK,WACL3B,MAAO,SG/YCqG,GASR,GARA5H,KAAK4H,IAAMA,EAEX5H,KAAKgM,QAAUhM,KAAKoM,YAAL9G,KAAsBtF,KAAKmM,aAAiBnM,KAAKgM,UAE5DhM,KAAKkM,WAAavK,OAAO0K,KAAKrM,KAAKkM,WAAWpI,QAChD9D,KAAKsM,YAAYtM,KAAKgM,QAAShM,KAAKkM,UAAWtE,IAG5CA,EAAO,KAAM,IAAI2E,OAAM,oCAE5B,KAAKvM,KAAKyB,KACR,KAAM,IAAI8K,OAAM,6CAGbvM,MAAKkM,WACRtE,EAAIoD,IAAIwB,OAAR,WAA0BxM,KAAKyB,KAA/B,2CAGFzB,KAAKyM,cHoZLvJ,IAAK,SACL3B,MAAO,WGjZP,IAAKvB,KAAK4H,IACR,KAAM,IAAI2E,OAAM,kCHsZlBrJ,IAAK,cACL3B,MAAO,WGnZgB,GAAA+F,GAAAtH,KAAZgM,EAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,GACjB6J,EAAa/K,OAAO0K,KAAKL,GAEzBW,OACDX,EAECrK,OAAO0K,KAAKrM,KAAKkM,eACdjD,OAAO,SAAA2D,GAAA,OAAMF,EAAWtD,SAASwD,KACjCC,OAAO,SAACvL,EAAGsL,GACV,GAAME,GAAMhE,QAAQgE,IAAIxF,EAAKyF,OAAOH,GAMpC,OAJIE,KACFxL,EAAEsL,GAAKE,GAGFxL,OAKjB,OAAOqL,MHqZPzJ,IAAK,cACL3B,MAAO,WGnZkC,GAA9BoL,GAA8B9J,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,GAAA6E,EAAA1H,KAAnBkM,EAAmBrJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,GAAL+E,EAAK/E,UAAA,EACzC,OAAOlB,QAAO0K,KAAKH,GAAWW,OAAO,SAACG,EAAMJ,GAC1C,IAAKV,EAAUU,GAEb,MADAhF,GAAIoD,IAAIC,QAAR,qBAAqC2B,EAArC,2BAAiElF,EAAKjG,KAAtE,YACO,CAGT,IAAM+B,GAAM0I,EAAUU,GAAGD,EAAQC,EAAMlF,EAAKjG,KAAhC,UAA+C,WAE3D,OAAI+B,IACFoE,EAAIoD,IAAIC,QAAQzH,EAAIyJ,aACb,GAGFD,IACN,MHgaH9J,IAAK,SACL3B,MAAO,WG7ZO,GAAR2B,GAAQL,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,GAAJ,GAAIA,UAAA,EACd,QACE7C,KAAKyB,KACLyB,EAAIgK,QAAQnB,EAAW,SAAA5K,GAAA,MAAKA,GAAEgM,MAAM,IAAIC,KAAK,QAC7CA,KAAK,KAAKC,iBHiaZnK,IAAK,WACL3B,MAAO,WAkCL,QAASkL,KACP,MAAOtE,GAAKvF,MAAM5C,KAAM6C,WAlC1B,GAAIsF,GAAO1F,EAAkBiH,mBAAmBC,KAAK,QAASC,KAC5D,GAAI/B,GAAS7H,IAEb,OAAO0J,oBAAmBU,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAAShE,MAC/B,IAAK,GACH,IGtaRrG,KAAKsN,gBHsa8B,CACzBjD,EAAShE,KAAO,CAChB,OAIF,MADAgE,GAAShE,KAAO,EG1apBrG,KAAKuN,qBH6aH,KAAK,GG3ab5L,OAAO0K,KAAKrM,KAAKsN,iBAAiBpF,QAAQ,SAAAzG,GACxC,GAAM+L,GAAM3F,EAAKD,IAAI6F,GAAG1L,IAAIN,GAAMF,OAEf,oBAARiM,IACT3F,EAAKD,IAAI6F,GAAGC,IAAIjM,EAAMoG,EAAKyF,gBAAgB7L,IAAOF,SHib9C,KAAK,GACL,IAAK,MACH,MAAO8I,GAASa,SAGrBtB,EAAS5J,QAOd,OAAOyM,QAGTvJ,IAAK,sBACL3B,MAAO,WA8BL,QAASgM,KACP,MAAOnF,GAAMxF,MAAM5C,KAAM6C,WA9B3B,GAAIuF,GAAQ3F,EAAkBiH,mBAAmBC,KAAK,QAAS2B,KAC7D,GAAIqC,GAAS3N,IAEb,OAAO0J,oBAAmBU,KAAK,SAAmBqB,GAChD,OACE,OAAQA,EAAUnB,KAAOmB,EAAUpF,MACjC,IAAK,GAGH,GGpcZrG,KAAKiM,mBAAoB,GAErBjM,KAAKiM,oBAAqBjM,KAAK4H,IAAI6F,GHkcmB,CAC5ChC,EAAUpF,KAAO,CACjB,OAGF,MAAOoF,GAAUZ,OAAO,UGtc3B,EHwcC,KAAK,GACH,MAAOY,GAAUZ,OAAO,SGtc7B,GAAI/H,SAAQ,SAACC,GAClB4K,EAAK/F,IAAIW,QAAQC,GAAG,WAAYzF,KHycxB,KAAK,GACL,IAAK,MACH,MAAO0I,GAAUP,SAGtBI,EAAUtL,QAOf,OAAOuN,SAIJzB,MAOH,SAASlM,EAAQD,EAASoB,GAEhC,YACqB,IAAI6M,GAAoC7M,EAAoB,GAChD,KAAI,GAAI8M,KAA0BD,GAAiE,YAA3BC,GAAuC,SAAS3K,GAAOnC,EAAoBS,EAAE7B,EAASuD,EAAK,WAAa,MAAO0K,GAAkC1K,MAAW2K,IAK/P,SAASjO,EAAQD,EAASoB,GAEhC,YACqB,IAAI+M,GAAyC/M,EAAoB,GAC7DgN,EAA0ChN,EAAoB,GAC9DiN,EAAsCjN,EAAoB,GACzDA,GAAoBmB,EAAE4L,EAAwC,MAAM/M,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOmO,GAA0C,IAC5K/M,EAAoBmB,EAAE6L,EAAyC,MAAMhN,EAAoBS,EAAE7B,EAAS,kBAAmB,WAAa,MAAOoO,GAA2C,IACtLhN,EAAoBmB,EAAE8L,EAAqC,MAAMjN,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAOqO,GAAuC,KAO9L,SAASpO,EAAQD,EAASoB,GAEhC,YAIyF,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAHpL,GAAI8J,GAA0ClN,EAAoB,EACZA,GAAoBiB,EAAEiM,EAE5ElN,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOuO,IAI7E,II/mBqBA,GACnB,QAAAA,GAAA/F,GAAoD,GAArCuC,GAAqCvC,EAArCuC,KAAMyD,EAA+BhG,EAA/BgG,QAASC,EAAsBjG,EAAtBiG,QAAsBC,EAAAlG,EAAbwC,KAAa3E,SAAAqI,EAAVtN,EAAAG,EAAA+M,EAAA,MAAUI,CAAArK,GAAAhE,KAAAkO,GAClDlO,KAAK0K,KAAOA,EACZ1K,KAAKmO,QAAUA,EACfnO,KAAKoO,QAAUA,EACfpO,KAAK2K,GAAKA,IJ6nBR,SAAS/K,EAAQD,GKpoBvBC,EAAAD,QAAAE,QAAA,cL0oBM,SAASD,EAAQD,EAASoB,GAEhC,YACqB,IAAIuN,GAA2CvN,EAAoB,IAC/DwN,EAAsCxN,EAAoB,IAC1DyN,EAA6CzN,EAAoB,GAChEA,GAAoBmB,EAAEoM,EAA0C,MAAMvN,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAO2O,GAA4C,IAClLvN,EAAoBmB,EAAEqM,EAAqC,MAAMxN,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAO4O,GAAuC,IACnKxN,EAAoBmB,EAAEsM,EAA4C,MAAMzN,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAO6O,GAA8C,KAO5M,SAAS5O,EAAQD,EAASoB,GAEhC,YAIsF,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAHjL,GAAI8J,GAA0ClN,EAAoB,EACZA,GAAoBiB,EAAEiM,EAE5ElN,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8O,IAI7E,IMjqBqBA,GACnB,QAAAA,GAAahN,EAAMkJ,EAAIyD,GAASpK,EAAAhE,KAAAyO,GAC9BzO,KAAKyB,KAAOA,EACZzB,KAAK2K,GAAKA,GAAM5J,EAAAG,EAAA+M,EAAA,MAChBjO,KAAK0O,SACL1O,KAAK2O,SAAWP,QNyqBd,SAASxO,EAAQD,EAASoB,GAEhC,YASA,SAAS6N,GAAgBC,EAAK3L,EAAK3B,GAAiK,MAApJ2B,KAAO2L,GAAOlN,OAAOC,eAAeiN,EAAK3L,GAAO3B,MAAOA,EAAOO,YAAY,EAAMD,cAAc,EAAM+C,UAAU,IAAkBiK,EAAI3L,GAAO3B,EAAgBsN,EAE3M,QAASpM,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAZ3F,GAAI2K,GAA+C/N,EAAoB,IACnEgO,EAAmDhO,EAAoB,GACvEiO,EAAsCjO,EAAoB,EAE9DA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOsP,IAAY,IAErFC,GAAQC,EAFiF5I,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MOprBpmB+K,GPisBNE,EAAQD,EAAS,WOvrB9B,QAAAD,KAAyB,GAAZjD,GAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAAAmB,GAAAhE,KAAAiP,GACvBjP,KAAKgM,QAAUA,EACfhM,KAAKoP,OAASH,EAAQI,OAAOC,cAC7BtP,KAAKuP,YAAcvD,EAAQuD,YP26B7B,MA5OAhJ,GAAa0I,IACX/L,IAAK,WACL3B,MAAO,SO9rBCqG,GACR,IAAKA,EAAO,KAAM,IAAI2E,OAAM,oCAC5B,KAAKvM,KAAKyB,KACR,KAAM,IAAI8K,OAAM,mEAGlBvM,MAAK4H,IAAMA,EACX5H,KAAKwP,YACLxP,KAAKoP,OAASH,EAAQI,OAAOI,WAC7BzP,KAAKkF,YPmsBLhC,IAAK,SACL3B,MAAO,WO/rBP,IAAKvB,KAAK4H,IAAO,KAAM,IAAI2E,OAAM,kCPqsBjCrJ,IAAK,UACL3B,MAAO,SAAiB4G,GOnsBiB,GAAhCuC,GAAgCvC,EAAhCuC,KAAMjC,EAA0BN,EAA1BM,KAAM0F,EAAoBhG,EAApBgG,QAASuB,EAAWvH,EAAXuH,OAC9B,KAAKjH,EAEH,WADAzI,MAAK4H,IAAIoD,IAAI5H,KAAK,wCAIpB,IAAMwF,GAAU,GAAIkG,GAAA,GAAcpE,OAAMjC,OAAM0F,UAASuB,UAAStB,QAASpO,KAAKyB,MAC9EzB,MAAK4H,IAAIW,QAAQoH,KAAK,kBAAmB/G,MP2sBzC1F,IAAK,iBACL3B,MAAO,SAAwB6G,GOzsBQ,GAAvBsC,GAAuBtC,EAAvBsC,KAAMjC,EAAiBL,EAAjBK,KAAM0F,EAAW/F,EAAX+F,OAC5B,OAAK1F,IAKLA,EAAOzI,KAAK4H,IAAIgI,sBAAsBnH,OACtCzI,MAAK6P,SAAUnF,OAAMjC,OAAM0F,UAASuB,SAAS,SAL3C1P,MAAK4H,IAAIoD,IAAIC,QAAQ,4CPqtBvB/H,IAAK,QACL3B,MAAO,SAAewH,GO9sBE,GAAjB2B,GAAiB3B,EAAjB2B,KAAMyD,EAAWpF,EAAXoF,QACPvF,EAAU,GAAImG,GAAA,GAClBrE,OACAyD,UACAC,QAASpO,KAAKyB,KACdqO,KAAMf,EAAA,EAAgBgB,MAAMC,OAG9BhQ,MAAK4H,IAAIW,QAAQoH,KAAK,QAAS/G,MPotB/B1F,IAAK,QACL3B,MAAO,SAAeyH,GOltBE,GAAjB0B,GAAiB1B,EAAjB0B,KAAMyD,EAAWnF,EAAXmF,QACPvF,EAAU,GAAImG,GAAA,GAClBrE,OACAyD,UACAC,QAASpO,KAAKyB,KACdqO,KAAMf,EAAA,EAAgBgB,MAAME,OAG9BjQ,MAAK4H,IAAIW,QAAQoH,KAAK,QAAS/G,MPwtB/B1F,IAAK,OACL3B,MAAO,SOttBHqH,GACJsH,QAAQlF,IAAIpC,EAAQH,SPytBpBvF,IAAK,OACL3B,MAAO,WOttBPvB,KAAKmQ,UP0tBLjN,IAAK,OACL3B,MAAO,WOvtBPvB,KAAK4H,IAAIoD,IAAIC,QAAQ,kDP2tBrB/H,IAAK,sBACL3B,MAAO,SOztBYE,GAEnB,MADAzB,MAAK4H,IAAIoD,IAAIC,QAAQ,wDACdxJ,KP4tBPyB,IAAK,sBACL3B,MAAO,SO1tBYE,GAEnB,MADAzB,MAAK4H,IAAIoD,IAAIC,QAAQ,uDACdxJ,KP6tBPyB,IAAK,kBACL3B,MAAO,WO1tBP,YP8tBA2B,IAAK,YACL3B,MAAO,WAiCL,QAASiO,KACP,MAAOtG,GAAMtG,MAAM5C,KAAM6C,WAjC3B,GAAIqG,GAAQzG,EAAkBiH,mBAAmBC,KAAK,QAASC,KAC7D,MAAOF,oBAAmBU,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAAShE,MAC/B,IAAK,GAEH,MADAgE,GAAShE,KAAO,EOjuBtBrG,KAAK4H,IAAI2F,qBPouBL,KAAK,GAGH,GOtuBZvN,KAAKoQ,aAAepQ,KAAK4H,IAAIyI,MAAMrQ,KAAKyB,OACpCzB,KAAKoQ,aPquB2B,CACtB/F,EAAShE,KAAO,CAChB,OAGF,MAAOgE,GAASQ,OAAO,SAEzB,KAAK,GOxuBf7K,KAAK4H,IAAIyI,MAAMrQ,KAAKyB,SACpBzB,KAAKoQ,aAAepQ,KAAK4H,IAAIyI,MAAMrQ,KAAKyB,MACxCzB,KAAK4H,IAAI6F,GAAG6C,OP4uBF,KAAK,GACL,IAAK,MACH,MAAOjG,GAASa,SAGrBtB,EAAS5J,QAOd,OAAOwP,QAGTtM,IAAK,WACL3B,MAAO,WOvvBP,MADAvB,MAAK4H,IAAIoD,IAAIC,QAAQ,6CACd,KP4vBP/H,IAAK,UACL3B,MAAO,WAgEL,QAASgP,GAAQjH,EAAKC,EAAKC,GACzB,MAAOL,GAAMvG,MAAM5C,KAAM6C,WAhE3B,GAAIsG,GAAQ1G,EAAkBiH,mBAAmBC,KAAK,QAAS2B,GO3vBrDkF,EAAeC,GP4vBvB,GACI/B,GAAOhE,EO7vB6BgG,EP4vBtB7N,UAAUiB,QAAU,GAAsBkC,SAAjBnD,UAAU,MAAwBA,UAAU,EAEvF,OAAO6G,oBAAmBU,KAAK,SAAmBqB,GAChD,OACE,OAAQA,EAAUnB,KAAOmB,EAAUpF,MACjC,IAAK,GAEH,MADAoF,GAAUpF,KAAO,EOjwBvBrG,KAAK4H,IAAI2F,qBPowBL,KAAK,GAUH,GO7wBPiD,GACHxQ,KAAK4H,IAAIvE,MAAT,WAA0BrD,KAAKyB,KAA/B,yCAEGgP,GACHzQ,KAAK4H,IAAIqD,QAAT,WAA4BjL,KAAKyB,KAAjC,2CAGIiN,EAAQ1O,KAAK2Q,SAASH,EAAeE,IACvC1Q,KAAKoQ,aPqwB2B,CACtB3E,EAAUpF,KAAO,EACjB,OAGF,IOzwBNrG,KAAKoQ,aAAaI,GPywB2B,CACrC/E,EAAUpF,KAAO,EACjB,OAYF,MOtxBJqI,KACFwB,QAAQlF,IAAI,KACZhL,KAAKoQ,aAAaI,GAAe9B,MAAQA,GAGvC+B,IACFzQ,KAAK4H,IAAIyI,MAAMO,SAAS5Q,KAAKoQ,aAAaI,GAAeK,OAAOpP,KAAOgP,GPgxB1DhF,EAAUZ,OAAO,SO7wBzB7K,KAAK4H,IAAIyI,MAAMO,SAAS5Q,KAAKoQ,aAAaI,GAAeK,OP+wB1D,KAAK,IASH,MOrxBJnG,GAAO,GAAIsE,GAAA,EAAKyB,GACtB/F,EAAKiE,SAALC,KAAkB5O,KAAKyB,MAAQ8J,OAAQiF,IACvCxQ,KAAKoQ,aAAaI,IAAkB/O,KAAMgP,EACNI,MAAOnG,EAAKC,GACZ+D,MAAOA,OAC3C1O,KAAK4H,IAAIyI,MAAMO,SAASlG,EAAKC,IAAMD,EACnC1K,KAAK4H,IAAI6F,GAAG6C,QP+wBK7E,EAAUZ,OAAO,SO9wB3BH,EPgxBC,KAAK,IACH,MAAOe,GAAUZ,OAAO,SO9wB7B,GAAImE,GAAA,EAAKyB,EACAD,EADT5B,KAEW5O,KAAKyB,KAAO+O,IP8wBpB,KAAK,IACL,IAAK,MACH,MAAO/E,GAAUP,SAGtBI,EAAUtL,QAOf,OAAOuQ,SAIJtB,KACJC,EOx7BIG,QACLC,cAAe,EACfG,WAAY,EACZqB,UAAW,EACXC,aAAc,EACdC,aAAc,EACdC,MAAO,GPy7BR9B,IAKG,SAASvP,EAAQD,EAASoB,GAEhC,YAKA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAR5c,GAAIqJ,GAAyC/M,EAAoB,EAEjEA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOuR,IAAoB,IAAIhC,GAAQC,EQ38BxF+B,GRq9BE/B,EAAQD,EAAS,SAAUiC,GQ/8BhD,QAAAD,GAAA/I,GAAuB,GAAR2H,GAAQ3H,EAAR2H,IAAQ9L,GAAAhE,KAAAkR,EAAA,IAAA5J,GAAAlD,EAAApE,MAAAkR,EAAApM,WAAAnD,OAAAwF,eAAA+J,IAAAtO,MAAA5C,KACZ6C,WADY,OAErByE,GAAKwI,KAAOA,EAFSxI,ER69BvB,MAbA/C,GAAU2M,EAAiBC,GAapBD,GQn+BoCpD,EAAA,GRo+BiBoB,EQn+BrDa,OACLC,MAAO,EACPC,MAAO,GRo+BRd,IAKG,SAASvP,EAAQD,EAASoB,GAEhC,YAG6F,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAE7M,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAN5c,GAAIqJ,GAAyC/M,EAAoB,EAEjEA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOyR,IAQ7E,ISz/BqBA,GTy/BH,SAAUD,GSx/B1B,QAAAC,GAAAjJ,GAAsC,GAAvBM,GAAuBN,EAAvBM,KAAuB4I,EAAAlJ,EAAjBuH,UAAiB1J,SAAAqL,IAAArN,GAAAhE,KAAAoR,EAAA,IAAA9J,GAAAlD,EAAApE,MAAAoR,EAAAtM,WAAAnD,OAAAwF,eAAAiK,IAAAxO,MAAA5C,KAC3B6C,WAD2B,OAGhC4F,KACFnB,EAAKmB,KAAOA,EAAK6I,QAGnBhK,EAAKoI,UAAYA,EAPmBpI,ET4gCtC,MAnBA/C,GAAU6M,EAAaD,GAmBhBC,GS7gCgCtD,EAAA,ITohCnC,SAASlO,EAAQD,EAASoB,GAEhC,YACqB,IAAIwQ,GAAyCxQ,EAAoB,GAC7DyQ,EAA0CzQ,EAAoB,GAElEA,GAAoBS,EAAE7B,EAAS,WAAY,WAAa,MAAOgP,KAAuC5N,EAAoBmB,EAAEqP,EAAwC,MAAMxQ,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAO4R,GAA0C,GUzhChS,IAAM5C,GAAW6C,GViiClB,SAAS5R,EAAQD,EAASoB,GAEhC,YACqB,IAAI0Q,GAAwC1Q,EAAoB,GAC5D2Q,EAAuC3Q,EAAoB,IAC3D4Q,EAAsC5Q,EAAoB,IAC1D6Q,EAAsC7Q,EAAoB,GAC1D8Q,EAAyC9Q,EAAoB,EAEjEA,GAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOmS,KAAsC/Q,EAAoBmB,EAAEuP,EAAuC,MAAM1Q,EAAoBS,EAAE7B,EAAS,SAAU,WAAa,MAAO8R,GAAyC,IACxQ1Q,EAAoBmB,EAAEwP,EAAsC,MAAM3Q,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAO+R,GAAwC,IAC5K3Q,EAAoBmB,EAAEyP,EAAqC,MAAM5Q,EAAoBS,EAAE7B,EAAS,aAAc,WAAa,MAAOgS,GAAuC,IACzK5Q,EAAoBmB,EAAE0P,EAAqC,MAAM7Q,EAAoBS,EAAE7B,EAAS,aAAc,WAAa,MAAOiS,GAAuC,IACzK7Q,EAAoBmB,EAAE0P,EAAqC,MAAM7Q,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOiS,GAAuC,IACtK7Q,EAAoBmB,EAAE0P,EAAqC,MAAM7Q,EAAoBS,EAAE7B,EAAS,SAAU,WAAa,MAAOiS,GAAuC,IACrK7Q,EAAoBmB,EAAE0P,EAAqC,MAAM7Q,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAOiS,GAAuC,IACnK7Q,EAAoBmB,EAAE0P,EAAqC,MAAM7Q,EAAoBS,EAAE7B,EAAS,kBAAmB,WAAa,MAAOiS,GAAuC,GW7iCjM,IAAME,GAAUD,GXyjCjB,SAASjS,EAAQD,GYhkCvBC,EAAAD,QAAAE,QAAA,kBZskCM,SAASD,EAAQD,GatkCvBC,EAAAD,QAAAE,QAAA,Wb4kCM,SAASD,EAAQD,Gc5kCvBC,EAAAD,QAAAE,QAAA,iBdklCM,SAASD,EAAQD,GellCvBC,EAAAD,QAAAE,QAAA,QfwlCM,SAASD,EAAQD,GgBxlCvBC,EAAAD,QAAAE,QAAA,ehB8lCM,SAASD,EAAQD,GiB9lCvBC,EAAAD,QAAAE,QAAA,8BjBomCM,SAASD,EAAQD,EAASoB,GAEhC,YACqB,IAAIgR,GAAuChR,EAAoB,GAC1DA,GAAoBmB,EAAE6P,EAAsC,MAAMhR,EAAoBS,EAAE7B,EAAS,QAAS,WAAa,MAAOoS,GAAwC,KAK1L,SAASnS,EAAQD,EAASoB,GAEhC,YASA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAd5c,GAAIuN,GAAyCjR,EAAoB,IAC7DkR,EAAiDlR,EAAoBiB,EAAEgQ,GACvET,EAAyCxQ,EAAoB,EAEjEA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOuS,IAAiB,IAAI3L,GAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MAE1nB2C,EAAO,QAAS9E,GAAII,EAAQC,EAAU0E,GAA2B,OAAX3E,IAAiBA,EAAS4E,SAAS1E,UAAW,IAAI2E,GAAOrF,OAAOsF,yBAAyB9E,EAAQC,EAAW,IAAa4D,SAATgB,EAAoB,CAAE,GAAIE,GAASvF,OAAOwF,eAAehF,EAAS,OAAe,QAAX+E,EAAmB,OAAkCnF,EAAImF,EAAQ9E,EAAU0E,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKzF,KAAgB,IAAIG,GAASsF,EAAKjF,GAAK,IAAeiE,SAAXtE,EAA4C,MAAOA,GAAON,KAAK0F,IkBlnCtdqL,EAAQ,QAERC,GACJ,OACA,OACA,KAGmBF,ElB4nCF,SAAUG,GkBznC3B,QAAAH,KAAelO,EAAAhE,KAAAkS,EAAA,IAAA5K,GAAAlD,EAAApE,MAAAkS,EAAApN,WAAAnD,OAAAwF,eAAA+K,IAAA9Q,KAAApB,MAAA,OAAAsH,GAFf7F,KAAO,QAIL6F,EAAKgL,GAAKL,EAAAM,EAASC,iBACjBC,MAAO3J,QAAQ4J,MACfC,OAAQ7J,QAAQ8J,SAJLtL,ElB2sCf,MAjFA/C,GAAU2N,EAAcG,GAiBxB9L,EAAa2L,IACXhP,IAAK,SACL3B,MAAO,WA0CL,QAASsR,KACP,MAAO1K,GAAKvF,MAAM5C,KAAM6C,WA1C1B,GAAIsF,GAAO1F,EAAkBiH,mBAAmBC,KAAK,QAASC,KAC5D,GAAIlC,GAAS1H,IAEb,OAAO0J,oBAAmBU,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAAShE,MAC/B,IAAK,GAEH,MADAgE,GAAShE,KAAO,EkB3oCtBrG,KAAK4H,IAAI2F,qBlB8oCL,KAAK,GAEH,MADAlD,GAAShE,KAAO,EkB9oCVrG,KAAKuQ,QAAQ,QAAS,QlBipC9B,KAAK,GkBjpCfvQ,KAAK0K,KlBkpCmBL,EAASO,KkBjpCjC5K,KAAKsS,GAAGQ,SAAS,SAAU,SAACC,GACtBX,EAAchJ,SAAS2J,IACzBrL,EAAKE,IAAI6F,GAAG6C,QAAQ/M,KAAK,iBAAMuF,SAAQkK,SAGzCnM,EAAAqL,EAAA7P,UAAAyC,WAAAnD,OAAAwF,eAAA+K,EAAA7P,WAAA,UAAAqF,GAAAtG,KAAAsG,GACEe,KAAMsK,EACN5E,QAASgE,EACTzH,KAAMhD,EAAKgD,OAGbhD,EAAKmL,UlBwpCG,KAAK,GACL,IAAK,MACH,MAAOxI,GAASa,SAGrBtB,EAAS5J,QAOd,OAAO6S,QAGT3P,IAAK,WACL3B,MAAO,SkBpqCCqG,GACRf,EAAAqL,EAAA7P,UAAAyC,WAAAnD,OAAAwF,eAAA+K,EAAA7P,WAAA,WAAArC,MAAAoB,KAAApB,KAAe4H,GACf5H,KAAK6S,SACL7S,KAAKoP,OAASmC,EAAA,EAAQlC,OAAOyB,alBuqC7B5N,IAAK,sBACL3B,MAAO,WkBnqCP,MAAOvB,MAAK0K,KAAKC,OlBwqCZuH,GkB9sCiCX,EAAA,IlBqtCpC,SAAS3R,EAAQD,EAASoB,GAEhC,YAgBqF,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAfvgB,GAAIgQ,GAAuClS,EAAoB,IAC3DmS,EAA+CnS,EAAoBiB,EAAEiR,GACrEE,EAAsCpS,EAAoB,IAC1DqS,EAA8CrS,EAAoBiB,EAAEmR,GACpEE,EAAyCtS,EAAoB,IAC7DuS,EAAiDvS,EAAoBiB,EAAEqR,GACvEE,EAA8CxS,EAAoB,IAClEyS,EAAsDzS,EAAoBiB,EAAEuR,EAEhFxS,GAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAO8T,KAClE1S,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAO+T,KAChE3S,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAOgU,KAC3D5S,EAAoBS,EAAE7B,EAAS,QAAS,WAAa,MAAO2Q,KAC5DvP,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAOiU,KAChE7S,EAAoBS,EAAE7B,EAAS,aAAc,WAAa,MAAOkU,KACjE9S,EAAoBS,EAAE7B,EAAS,KAAM,WAAa,MAAOmU,ImB9uCvE,IAAML,GAAc,SAAAM,GACzB,MAAO,UAAAC,GACL,IAAKA,EAAO,QACZ,IAAMC,GAAYF,EAAOG,QAAQF,GAC3BnF,EAAMsF,KAAKC,MAAMH,EACvB,OAAOpF,KAIE6E,EAAY,SAAAK,GACvB,MAAO,UAAAlF,GACL,GAAMmF,GAAMG,KAAKE,UAAUxF,GACrByF,EAAYP,EAAOQ,QAAQP,EACjC,OAAOM,KAIEX,EAAO,SAACa,GACnB,MAAO,UAACC,EAAMhB,GACZ,MAAO,IAAI3Q,SAAQ,SAACC,EAASC,GAC3BwR,EAASC,GAAMlR,KAAK,SAAAmR,GAClB,IACE3R,EAAQ0Q,EAAYiB,IACpB,MAAOC,GACP3R,EAAO2R,UAOJrE,EAAQ,SAAAsE,GACnB,MAAO,UAACH,EAAM5F,EAAK6E,GACjB,MAAO,IAAI5Q,SAAQ,SAACC,EAASC,GAC3B,IACE,GAAM0R,GAAOhB,EAAU7E,EACvB+F,GAAUH,EAAMC,GAAMnR,KAAKR,EAASC,GACpC,MAAO2R,GACP3R,EAAO2R,QAMFf,EAAY,SAACa,GACxB,MAAO,IAAI3R,SAAQ,SAACC,EAASC,GAC3BsQ,EAAAf,EAAGsC,WAAWJ,EAAM,SAACjR,GACnB,MAAIA,GAAcR,EAAOQ,OACzB8P,GAAAf,EAAGiC,SAASC,EAAM,OAAQ,SAACjR,EAAKkR,GAC9B,MAAIlR,GAAcR,EAAOQ,GAClBT,EAAQ2R,UAMVb,EAAa,SAACY,EAAMC,GAC/B,MAAO,IAAI5R,SAAQ,SAACC,EAASC,GAC3BsQ,EAAAf,EAAGsC,WAAWJ,EAAM,SAACjR,GACnB,MAAIA,GAAcR,EAAOQ,OACzB8P,GAAAf,EAAGqC,UAAUH,EAAMC,EAAM,OAAQ,SAAClR,GAChC,MAAIA,GAAcR,EAAOQ,GAClBT,EAAQ2R,UAMvBZ,EAAA,cAAA3L,GAAA1F,EAAAiH,mBAAAC,KAAO,QAAAC,GAAAxB,GAAA,GAAA2L,GAAAe,EAAArH,EAAqBgH,EAArBrM,EAAqBqM,KAAMvR,EAA3BkF,EAA2BlF,IAA3B6R,EAAA3M,EAAgCoM,WAAhCxO,SAAA+O,EAAyCnB,EAAzCmB,EAAAC,EAAA5M,EAAoDwM,YAApD5O,SAAAgP,EAA8DnB,EAA9DmB,CAAA,OAAAtL,oBAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhE,MAAA,aACC0N,GAAS,GAAIb,GAAAX,EAAOrP,GAAOzB,MAC3BqT,EAASL,aAAkBhT,KAAlB,QAFV4I,EAAAhE,KAAA,EAIY,GAAI+M,GAAAb,EAAIuC,GACvBG,SACEtB,KAAMA,EAAKa,GACXlE,MAAOA,EAAMsE,IAEfM,QACEzB,YAAaA,EAAYM,GACzBL,UAAWA,EAAUK,KAXpB,cAICtG,GAJDpD,EAAAO,KAeL6C,EAAG0H,EAAEC,MAAM5B,EAAAjB,GAfNlI,EAAAQ,OAAA,SAgBE4C,EAhBF,wBAAApD,GAAAa,SAAAtB,EAAA5J,QAAP,iBAAAqJ,GAAA,MAAAlB,GAAAvF,MAAA5C,KAAA6C,gBnBgzCM,SAASjD,EAAQD,EAASoB,GAEhC,YAG6F,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAE7M,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAN5c,GAAIM,GAAwChE,EAAoB,EAEhEA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO0V,IAQ7E,IoBp4CqBA,GpBo4CH,SAAUhO,GAG1B,QAASgO,KAGP,MAFArR,GAAgBhE,KAAMqV,GAEfjR,EAA2BpE,MAAOqV,EAAYvQ,WAAanD,OAAOwF,eAAekO,IAAczS,MAAM5C,KAAM6C,YAGpH,MARA0B,GAAU8Q,EAAahO,GAQhBgO,GoB74CgCtQ,EAAA,IpBo5CnC,SAASnF,EAAQD,EAASoB,GAEhC,YAG4F,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAE5M,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAN5c,GAAIM,GAAwChE,EAAoB,EAEhEA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO2V,IAQ7E,IqBj6CqBA,GrBi6CJ,SAAUjO,GAGzB,QAASiO,KAGP,MAFAtR,GAAgBhE,KAAMsV,GAEflR,EAA2BpE,MAAOsV,EAAWxQ,WAAanD,OAAOwF,eAAemO,IAAa1S,MAAM5C,KAAM6C,YAGlH,MARA0B,GAAU+Q,EAAYjO,GAQfiO,GqB16C+BvQ,EAAA,IrBi7ClC,SAASnF,EAAQD,EAASoB,GAEhC,YAOA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAEje,QAAS8Q,GAA0B/P,EAAQpD,EAAUoT,EAAY9O,EAAY+O,GAC3E,GAAIzO,KAyBJ,OAxBArF,QAAkB,KAAE+E,GAAYwB,QAAQ,SAAUhF,GAChD8D,EAAK9D,GAAOwD,EAAWxD,KAEzB8D,EAAKlF,aAAekF,EAAKlF,WACzBkF,EAAKnF,eAAiBmF,EAAKnF,cAEvB,SAAWmF,IAAQA,EAAK0O,eAC1B1O,EAAKpC,UAAW,GAGlBoC,EAAOwO,EAAWG,QAAQC,UAAU/I,OAAO,SAAU7F,EAAM6O,GACzD,MAAOA,GAAUrQ,EAAQpD,EAAU4E,IAASA,GAC3CA,GAECyO,GAAgC,SAArBzO,EAAK0O,cAClB1O,EAAKzF,MAAQyF,EAAK0O,YAAc1O,EAAK0O,YAAYtU,KAAKqU,GAAW,OACjEzO,EAAK0O,YAAc1P,QAGI,SAArBgB,EAAK0O,cACP/T,OAA4B,eAAE6D,EAAQpD,EAAU4E,GAChDA,EAAO,MAGFA,EAtCY,GAAI8O,GAAsC/U,EAAoB,EAE9DA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOoW,IAAc,IAEvFC,GAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAsBrH,EAFqB3I,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MsBt7CrnBsS,GACJ,KACA,QACA,MACA,YACA,KACA,OAGIC,GACJ,UACA,UACA,MACA,QACA,SACA,OAGEC,SACEC,EAAoB,SAAA/O,GACxB,MAAI8O,GAA0BA,EAE9BA,EACE,GAAI3O,QAAJ,OAAkByO,EAAUpJ,KAAK,KAAjC,iBAAsDxF,EAAInG,KAA1D,aAA4E,MAK5EmV,SACEC,EAAoB,SAAAjP,GACxB,MAAIgP,GAA0BA,EAE9BA,EACE,GAAI7O,QAAJ,OAAkB0O,EAAUrJ,KAAK,KAAjC,iBAAsDxF,EAAInG,KAA1D,aAA4E,MAK1EqV,EAAc,SAACzV,EAAGuG,GAAJ,MAAY+O,GAAkB/O,GAAK2C,KAAKlJ,EAAEoH,OACxDsO,EAAiB,SAAC1V,EAAGuG,GAAJ,MAAYiP,GAAkBjP,GAAK2C,KAAKlJ,EAAEoH,OAEpDsN,GAAbC,EAIGjV,EAAAG,EAAA4U,EAAA,GAAK,+CAJRG,EAKGlV,EAAAG,EAAA4U,EAAA,GAAgB,aALnBI,EAMGnV,EAAAG,EAAA4U,EAAA,GAAOgB,GANVX,EAOGpV,EAAAG,EAAA4U,EAAA,GAAQgB,GAPXV,EAaGrV,EAAAG,EAAA4U,EAAA,GAAK,6BAbRO,EAcGtV,EAAAG,EAAA4U,EAAA,GAAgB,aAdnBQ,EAeGvV,EAAAG,EAAA4U,EAAA,GAAOiB,GAfVR,EAgBGxV,EAAAG,EAAA4U,EAAA,GAAQiB,GAhBX7H,EAAA,SAAA8H,GAAA,QAAAjB,KAAA,GAAA5N,GAAAgH,EAAA7H,EAAA2P,CAAAjT,GAAAhE,KAAA+V,EAAA,QAAAmB,GAAArU,UAAAiB,OAAAuE,EAAA1E,MAAAuT,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA9O,EAAA8O,GAAAtU,UAAAsU,EAAA,OAAAhI,GAAA7H,EAAAlD,EAAApE,MAAAmI,EAAA4N,EAAAjR,WAAAnD,OAAAwF,eAAA4O,IAAA3U,KAAAwB,MAAAuF,GAAAnI,MAAAsI,OAAAD,KAAAf,EACE7F,KAAO,WADT6F,EAEE4E,aAFF+K,EAAA9H,EAAA/K,EAAAkD,EAAA2P,GAAA,MAAA1S,GAAAwR,EAAAiB,GAAAzQ,EAAAwP,IAAA7S,IAAA,WAAA3B,MAAA,SAQY4T,EAAGvM,GACX,GAAMwO,GAAiBZ,EAAUa,SAASC,KAAKC,SAAWf,EAAU1S,QACpE,OAAUsT,GAAV,KAA6BxO,EAAQ8B,KAAKjJ,KAA1C,OAVJyB,IAAA,WAAA3B,MAAA,SAiBY4T,EAAGvM,GACX,GAAM4O,GAAiBf,EAAUY,SAASC,KAAKC,SAAWd,EAAU3S,QACpE,OAAU0T,GAAV,KAA6B5O,EAAQ8B,KAAKjJ,KAA1C,QAnBJsU,GAA+BD,EAAA,GAA/BP,EAAArG,EAAA7M,UAAA,YAAA2T,EAAAC,EAAAC,EAAAC,GAAAxU,OAAAsF,yBAAAiI,EAAA7M,UAAA,YAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,YAAA+T,EAAAC,EAAAC,EAAAC,GAAA5U,OAAAsF,yBAAAiI,EAAA7M,UAAA,YAAA6M,EAAA7M,WAAA6M,ItB2/CM,SAAStP,EAAQD,EAASoB,GAEhC,YASA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAEje,QAAS8Q,GAA0B/P,EAAQpD,EAAUoT,EAAY9O,EAAY+O,GAC3E,GAAIzO,KAyBJ,OAxBArF,QAAkB,KAAE+E,GAAYwB,QAAQ,SAAUhF,GAChD8D,EAAK9D,GAAOwD,EAAWxD,KAEzB8D,EAAKlF,aAAekF,EAAKlF,WACzBkF,EAAKnF,eAAiBmF,EAAKnF,cAEvB,SAAWmF,IAAQA,EAAK0O,eAC1B1O,EAAKpC,UAAW,GAGlBoC,EAAOwO,EAAWG,QAAQC,UAAU/I,OAAO,SAAU7F,EAAM6O,GACzD,MAAOA,GAAUrQ,EAAQpD,EAAU4E,IAASA,GAC3CA,GAECyO,GAAgC,SAArBzO,EAAK0O,cAClB1O,EAAKzF,MAAQyF,EAAK0O,YAAc1O,EAAK0O,YAAYtU,KAAKqU,GAAW,OACjEzO,EAAK0O,YAAc1P,QAGI,SAArBgB,EAAK0O,cACP/T,OAA4B,eAAE6D,EAAQpD,EAAU4E,GAChDA,EAAO,MAGFA,EAxCY,GAAI8O,GAAsC/U,EAAoB,EAE9DA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8X,IAAS,IAIlFzB,GAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAsBnH,EAJ8BxJ,EAAiB,WAAc,QAASC,GAAcjC,EAAKxC,GAAK,GAAI0E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAKC,MAAW,KAAM,IAAK,GAAiCC,GAA7BC,EAAKxC,EAAIyC,OAAOC,cAAmBP,GAAMI,EAAKC,EAAGG,QAAQ/C,QAAoBsC,EAAKU,KAAKL,EAAG1E,QAAYL,GAAK0E,EAAK9B,SAAW5C,GAA3D2E,GAAK,IAAoE,MAAOrC,GAAOsC,GAAK,EAAMC,EAAKvC,EAAO,QAAU,KAAWqC,GAAMK,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIJ,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUlC,EAAKxC,GAAK,GAAIyC,MAAMC,QAAQF,GAAQ,MAAOA,EAAY,IAAIyC,OAAOC,WAAYzE,QAAO+B,GAAQ,MAAOiC,GAAcjC,EAAKxC,EAAa,MAAM,IAAIiD,WAAU,4DAExqBoC,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MuB3iDnhBuT,GAAbzB,EAIGjV,EAAAG,EAAA4U,EAAA,GAAK,4BAJRG,EAKGlV,EAAAG,EAAA4U,EAAA,GAAgB,QALnBI,EAMGnV,EAAAG,EAAA4U,EAAA,GAAQ,WANXK,EAcGpV,EAAAG,EAAA4U,EAAA,GAAK,8DAdRM,EAeGrV,EAAAG,EAAA4U,EAAA,GAAgB,QAfnBO,EAgBGtV,EAAAG,EAAA4U,EAAA,GAAQ,iBAhBX5G,EAAA,SAAA8H,GAAA,QAAAS,KAAA,GAAAtP,GAAAgH,EAAA7H,EAAA2P,CAAAjT,GAAAhE,KAAAyX,EAAA,QAAAP,GAAArU,UAAAiB,OAAAuE,EAAA1E,MAAAuT,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA9O,EAAA8O,GAAAtU,UAAAsU,EAAA,OAAAhI,GAAA7H,EAAAlD,EAAApE,MAAAmI,EAAAsP,EAAA3S,WAAAnD,OAAAwF,eAAAsQ,IAAArW,KAAAwB,MAAAuF,GAAAnI,MAAAsI,OAAAD,KAAAf,EACE7F,KAAO,OADT6F,EAEE4E,aAFF+K,EAAA9H,EAAA/K,EAAAkD,EAAA2P,GAAA,MAAA1S,GAAAkT,EAAAT,GAAAzQ,EAAAkR,IAAAvU,IAAA,aAAA3B,MAAA,WAQI,MAAOvB,MAAK4H,IAAIkK,QACC7I,OAAO,SAAA1G,GAAA,MAAKA,GAAE6C,MAAQ7C,EAAE6C,KAAKtB,OAAS,IACtC6D,IAAI,SAAApF,GAAA,MAAKA,GAAEmV,WAAWtK,KAAK,WAC3BA,KAAK,SAX1BlK,IAAA,mBAAA3B,MAAA,SAAA6G,GAiBgC,GAAAW,GAAArD,EAAA0C,EAAA,GAATuP,EAAS5O,EAAA,EAC5B,OAAO/I,MAAK4H,IAAIkK,QACC7I,OAAO,SAAA1G,GAAA,MAAKA,GAAE6C,MAAQ7C,EAAE6C,KAAKtB,OAAS,IACtC6D,IAAI,SAAApF,GACH,MAAOA,GAAEmV,WAAWzO,OAAO,SAAAgB,GACzB,MAAOA,GAAE2N,cAAcC,QAAQF,EAAOC,oBACrCxK,KAAK,WAETA,KAAK,UAzB1BqK,GAA0B3B,EAAA,GAA1BP,EAAArG,EAAA7M,UAAA,cAAA2T,EAAAC,EAAAC,GAAAvU,OAAAsF,yBAAAiI,EAAA7M,UAAA,cAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,oBAAA8T,EAAAC,EAAAC,GAAA1U,OAAAsF,yBAAAiI,EAAA7M,UAAA,oBAAA6M,EAAA7M,WAAA6M,IvBooDM,SAAStP,EAAQD,EAASoB,GAEhC,YAYA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL;CAEje,QAAS8Q,GAA0B/P,EAAQpD,EAAUoT,EAAY9O,EAAY+O,GAC3E,GAAIzO,KAyBJ,OAxBArF,QAAkB,KAAE+E,GAAYwB,QAAQ,SAAUhF,GAChD8D,EAAK9D,GAAOwD,EAAWxD,KAEzB8D,EAAKlF,aAAekF,EAAKlF,WACzBkF,EAAKnF,eAAiBmF,EAAKnF,cAEvB,SAAWmF,IAAQA,EAAK0O,eAC1B1O,EAAKpC,UAAW,GAGlBoC,EAAOwO,EAAWG,QAAQC,UAAU/I,OAAO,SAAU7F,EAAM6O,GACzD,MAAOA,GAAUrQ,EAAQpD,EAAU4E,IAASA,GAC3CA,GAECyO,GAAgC,SAArBzO,EAAK0O,cAClB1O,EAAKzF,MAAQyF,EAAK0O,YAAc1O,EAAK0O,YAAYtU,KAAKqU,GAAW,OACjEzO,EAAK0O,YAAc1P,QAGI,SAArBgB,EAAK0O,cACP/T,OAA4B,eAAE6D,EAAQpD,EAAU4E,GAChDA,EAAO,MAGFA,EA7CY,GAAI8O,GAAsC/U,EAAoB,GAC1D+W,EAAwC/W,EAAoB,IAC5DgX,EAA0ChX,EAAoB,EACZA,GAAoBiB,EAAE+V,EAE5EhX,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOqY,IAAgB,IAIzFhC,GAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAO0B,EAAOC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAuBjK,EAAQkK,EAASC,EAJjJ3T,EAAiB,WAAc,QAASC,GAAcjC,EAAKxC,GAAK,GAAI0E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAKC,MAAW,KAAM,IAAK,GAAiCC,GAA7BC,EAAKxC,EAAIyC,OAAOC,cAAmBP,GAAMI,EAAKC,EAAGG,QAAQ/C,QAAoBsC,EAAKU,KAAKL,EAAG1E,QAAYL,GAAK0E,EAAK9B,SAAW5C,GAA3D2E,GAAK,IAAoE,MAAOrC,GAAOsC,GAAK,EAAMC,EAAKvC,EAAO,QAAU,KAAWqC,GAAMK,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIJ,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUlC,EAAKxC,GAAK,GAAIyC,MAAMC,QAAQF,GAAQ,MAAOA,EAAY,IAAIyC,OAAOC,WAAYzE,QAAO+B,GAAQ,MAAOiC,GAAcjC,EAAKxC,EAAa,MAAM,IAAIiD,WAAU,4DAE/qBoC,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MwB3oDnhB8T,GAAbhC,EAeGjV,EAAAG,EAAA4U,EAAA,GAAK,6EAfRG,EAgBGlV,EAAAG,EAAA4U,EAAA,GAAgB,UAhBnBI,EAiBGnV,EAAAG,EAAA4U,EAAA,GAAQ,uCAjBXK,EA6BGpV,EAAAG,EAAA4U,EAAA,GAAK,kEA7BRM,EA8BGrV,EAAAG,EAAA4U,EAAA,GAAgB,mBA9BnBO,EA+BGtV,EAAAG,EAAA4U,EAAA,GAAQ,yCA/BXQ,EAgDGvV,EAAAG,EAAA4U,EAAA,GAAK,+DAhDRS,EAiDGxV,EAAAG,EAAA4U,EAAA,GAAgB,mBAjDnBmC,EAkDGlX,EAAAG,EAAA4U,EAAA,GAAQ,iCAlDXoC,EAkEGnX,EAAAG,EAAA4U,EAAA,GAAK,gFAlERqC,EAmEGpX,EAAAG,EAAA4U,EAAA,GAAgB,mBAnEnBsC,EAoEGrX,EAAAG,EAAA4U,EAAA,GAAQ,2CApEXuC,EAoFGtX,EAAAG,EAAA4U,EAAA,GAAK,4EApFRwC,EAqFGvX,EAAAG,EAAA4U,EAAA,GAAgB,mBArFnByC,EAsFGxX,EAAAG,EAAA4U,EAAA,GAAQ,8CAtFX0C,EAuGGzX,EAAAG,EAAA4U,EAAA,GAAK,uFAvGR2C,EAwGG1X,EAAAG,EAAA4U,EAAA,GAAgB,mBAxGnB4C,EAyGG3X,EAAAG,EAAA4U,EAAA,GAAQ,uCAzGX6C,EAmHG5X,EAAAG,EAAA4U,EAAA,GAAK,2FAnHR8C,EAoHG7X,EAAAG,EAAA4U,EAAA,GAAgB,mBApHnB+C,EAqHG9X,EAAAG,EAAA4U,EAAA,GAAQ,0CArHXgD,EAiIG/X,EAAAG,EAAA4U,EAAA,GACC,8GAlIJiD,EAqIGhY,EAAAG,EAAA4U,EAAA,GAAgB,mBArInBkD,EAsIGjY,EAAAG,EAAA4U,EAAA,GAAQ,mCAtIXmD,EA8IGlY,EAAAG,EAAA4U,EAAA,GAAK,qIA9IRoD,EAgJGnY,EAAAG,EAAA4U,EAAA,GAAgB,UAhJnBqD,EAiJGpY,EAAAG,EAAA4U,EAAA,GAAQ,8BAjJXuD,EAAAD,EAAA,SAAApC,GAAA,QAAAgB,KAAA,GAAA7P,GAAAgH,EAAA7H,EAAA2P,CAAAjT,GAAAhE,KAAAgY,EAAA,QAAAd,GAAArU,UAAAiB,OAAAuE,EAAA1E,MAAAuT,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA9O,EAAA8O,GAAAtU,UAAAsU,EAAA,OAAAhI,GAAA7H,EAAAlD,EAAApE,MAAAmI,EAAA6P,EAAAlT,WAAAnD,OAAAwF,eAAA6Q,IAAA5W,KAAAwB,MAAAuF,GAAAnI,MAAAsI,OAAAD,KAAAf,EACE7F,KAAO,cADT6F,EAEEgG,iBAAoBgM,gBAFtBhS,EAIE4E,WACEqN,cAAezB,EAAA,UAAE0B,OAAOC,YAL5BxC,EAAA9H,EAAA/K,EAAAkD,EAAA2P,GAAA,MAAA1S,GAAAyT,EAAAhB,GAAAzQ,EAAAyR,IAAA9U,IAAA,QAAA3B,MAAA,mBAAAmY,GAAArQ,EAAAC,GAAA,MAAAlB,GAAAxF,MAAA5C,KAAA6C,WAAA,GAAAuF,GAAA3F,EAAAiH,mBAAAC,KAAA,QAAAC,GAAAb,EAkBkCH,GAlBlC,GAAA+B,GAAA3B,EAAAtD,EAAAqD,EAAA,GAkBkBwQ,EAlBlBvQ,EAAA,SAAAU,oBAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhE,MAAA,aAAAgE,GAAAhE,KAAA,EAmBUrG,KAAKuN,qBAnBf,YAsBQvN,KAAKgM,QAAQuN,eAAiBA,IAAkBvZ,KAAKgM,QAAQuN,cAtBrE,CAAAlP,EAAAhE,KAAA,cAuBYsE,GAAKqN,EAAY2B,SAAS/Q,EAAQ8B,KAAKC,IAC7C3K,KAAK4H,IAAIgS,QAAQjP,EAAI,SAxB3BN,EAAAQ,OAAA,SAyBa,4BAzBb,wBAAAR,GAAAa,SAAAtB,EAAA5J,QAAA,OAAA0Z,QAAAxW,IAAA,gBAAA3B,MAAA,mBAAAsY,GAAAtQ,EAAAC,GAAA,MAAAN,GAAAtG,MAAA5C,KAAA6C,WAAA,GAAAqG,GAAAzG,EAAAiH,mBAAAC,KAAA,QAAA2B,GAAAnC,EAgC4CP,GAhC5C,GAAAkR,GAAAvO,EAAA9B,EAAA/D,EAAAyD,EAAA,GAgC+B4Q,GAhC/BtQ,EAAA,GAAAA,EAAA,IAgCqChI,EAhCrCgI,EAAA,SAAAC,oBAAAU,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAApF,MAAA,aAiCI0T,GAAO/B,EAAY2B,SAASI,GAjChCtO,EAAApF,KAAA,EAkCUrG,KAAKuN,qBAlCf,cAmCQuM,GAnCR,OAAArO,EAAAnB,KAAA,EAAAmB,EAAApF,KAAA,EAqC0BrG,KAAK4H,IAAI+G,SAAS/F,EAAQwF,SAAS4L,oBAAoBvY,EArCjF,QAqCMqY,EArCNrO,EAAAb,KAAAa,EAAApF,KAAA,iBAAAoF,EAAAnB,KAAA,GAAAmB,EAAAV,GAAAU,EAAA,YAuCMzL,KAAK4H,IAAIoD,IAAIiP,KAAbxO,EAAAV,GAvCN,YAyCUQ,EAASyM,EAAY2B,SAASG,IAChCvO,EA1CR,CAAAE,EAAApF,KAAA,eA2CMrG,MAAK4H,IAAIgS,QAAQrO,EAAQwO,GA3C/BtO,EAAAZ,OAAA,SA4CgBpJ,EA5ChB,kBA4CsCsY,EA5CtC,6BAAAtO,GAAAP,SAAAI,EAAAtL,OAAA,iBAAA6Z,QAAA3W,IAAA,WAAA3B,MAAA,mBAAA2Y,GAAA/O,EAAAC,GAAA,MAAAC,GAAAzI,MAAA5C,KAAA6C,WAAA,GAAAwI,GAAA5I,EAAAiH,mBAAAC,KAAA,QAAAwQ,GAAAC,EAmDiCxR,GAnDjC,GAAAkR,GAAAvO,EAAA8O,EAAAC,EAAA5U,EAAA0U,EAAA,GAmD0B3Y,GAnD1B6Y,EAAA,GAAAA,EAAA,UAAA5Q,oBAAAU,KAAA,SAAAmQ,GAAA,cAAAA,EAAAjQ,KAAAiQ,EAAAlU,MAAA,aAAAkU,GAAAlU,KAAA,EAoDUrG,KAAKuN,qBApDf,cAqDQuM,GArDR,OAAAS,EAAAjQ,KAAA,EAAAiQ,EAAAlU,KAAA,EAuD0BrG,KAAK4H,IAAI+G,SAAS/F,EAAQwF,SAAS4L,oBAAoBvY,EAvDjF,QAuDMqY,EAvDNS,EAAA3P,KAAA2P,EAAAlU,KAAA,gBAAAkU,EAAAjQ,KAAA,EAAAiQ,EAAAxP,GAAAwP,EAAA,YAyDMva,KAAK4H,IAAIoD,IAAIiP,KAAbM,EAAAxP,GAzDN,YA2DUQ,EAASyM,EAAY2B,SAASG,IAChCvO,EA5DR,CAAAgP,EAAAlU,KAAA,eA6DYgU,GAAQra,KAAK4H,IAAI+I,SAASpF,GA7DtCgP,EAAA1P,OAAA,SA8DawP,EAAMjN,KAAK,MA9DxB,yBAAAmN,GAAArP,SAAAiP,EAAAna,OAAA,gBAAAka,QAAAhX,IAAA,oBAAA3B,MAAA,mBAAAiZ,GAAAC,EAAAC,GAAA,MAAAC,GAAA/X,MAAA5C,KAAA6C,WAAA,GAAA8X,GAAAlY,EAAAiH,mBAAAC,KAAA,QAAAiR,GAAAC,EAqE0CjS,GArE1C,GAAAkR,GAAAvO,EAAA8O,EAAAS,EAAApV,EAAAmV,EAAA,GAqEmCpZ,GArEnCqZ,EAAA,GAAAA,EAAA,UAAApR,oBAAAU,KAAA,SAAA2Q,GAAA,cAAAA,EAAAzQ,KAAAyQ,EAAA1U,MAAA,aAAA0U,GAAA1U,KAAA,EAsEUrG,KAAKuN,qBAtEf,cAuEQuM,GAvER,OAAAiB,EAAAzQ,KAAA,EAAAyQ,EAAA1U,KAAA,EAyE0BrG,KAAK4H,IAAI+G,SAAS/F,EAAQwF,SAAS4L,oBAAoBvY,EAzEjF,QAyEMqY,EAzENiB,EAAAnQ,KAAAmQ,EAAA1U,KAAA,gBAAA0U,EAAAzQ,KAAA,EAAAyQ,EAAAhQ,GAAAgQ,EAAA,YA2EM/a,KAAK4H,IAAIoD,IAAIiP,KAAbc,EAAAhQ,GA3EN,YA6EUQ,EAASyM,EAAY2B,SAASG,IAChCvO,EA9ER,CAAAwP,EAAA1U,KAAA,eA+EYgU,GAAQra,KAAK4H,IAAIoT,aAAazP,GA/E1CwP,EAAAlQ,OAAA,SAgFawP,EAAMjN,KAAK,MAhFxB,yBAAA2N,GAAA7P,SAAA0P,EAAA5a,OAAA,gBAAAwa,QAAAtX,IAAA,qBAAA3B,MAAA,mBAAA0Z,GAAAC,EAAAC,GAAA,MAAAC,GAAAxY,MAAA5C,KAAA6C,WAAA,GAAAuY,GAAA3Y,EAAAiH,mBAAAC,KAAA,QAAA0R,GAAAC,EAuFiD1S,GAvFjD,GAAAkR,GAAAvO,EAAAgQ,EAAA7V,EAAA4V,EAAA,GAuFoCvB,GAvFpCwB,EAAA,GAAAA,EAAA,IAuF0C9Z,EAvF1C8Z,EAAA,SAAA7R,oBAAAU,KAAA,SAAAoR,GAAA,cAAAA,EAAAlR,KAAAkR,EAAAnV,MAAA,aAwFI0T,GAAO/B,EAAY2B,SAASI,GAxFhCyB,EAAAnV,KAAA,EAyFUrG,KAAKuN,qBAzFf,cA0FQuM,GA1FR,OAAA0B,EAAAlR,KAAA,EAAAkR,EAAAnV,KAAA,EA4F0BrG,KAAK4H,IAAI+G,SAAS/F,EAAQwF,SAAS4L,oBAAoBvY,EA5FjF,QA4FMqY,EA5FN0B,EAAA5Q,KAAA4Q,EAAAnV,KAAA,iBAAAmV,EAAAlR,KAAA,GAAAkR,EAAAzQ,GAAAyQ,EAAA,YA8FMxb,KAAK4H,IAAIoD,IAAIiP,KAAbuB,EAAAzQ,GA9FN,YAgGUQ,EAASyM,EAAY2B,SAASG,IAChCvO,EAjGR,CAAAiQ,EAAAnV,KAAA,eAkGMrG,MAAK4H,IAAI6T,WAAWlQ,EAAQwO,GAlGlCyB,EAAA3Q,OAAA,SAmGgBpJ,EAnGhB,sBAmG0CsY,EAnG1C,6BAAAyB,GAAAtQ,SAAAmQ,EAAArb,OAAA,iBAAAib,QAAA/X,IAAA,iBAAA3B,MAAA,mBAAAma,GAAAC,GAAA,MAAAC,GAAAhZ,MAAA5C,KAAA6C,WAAA,GAAA+Y,GAAAnZ,EAAAiH,mBAAAC,KAAA,QAAAkS,GAAAC,GAAA,GAAAC,GAAArW,EAAAoW,EAAA,GA0G2BzW,EA1G3B0W,EAAA,GA0G4ChC,EA1G5CgC,EAAA,SAAArS,oBAAAU,KAAA,SAAA4R,GAAA,cAAAA,EAAA1R,KAAA0R,EAAA3V,MAAA,aA2GI0T,GAAO/B,EAAY2B,SAASI,GA3GhCiC,EAAA3V,KAAA,EA4GUrG,KAAKuN,qBA5Gf,cA8GIvN,MAAK4H,IAAI6F,GAAGC,IAAZ,sBAAsCrI,EAAtC,IAAyD0U,GAAQ,GAAMxY,QACvEvB,KAAK4H,IAAI6F,GAAG6C,QA/GhB0L,EAAAnR,OAAA,kBAgHoBkP,EAhHpB,+CAgHuE1U,EAhHvE,6BAAA2W,GAAA9Q,SAAA2Q,EAAA7b,QAAA,OAAA0b,QAAAxY,IAAA,sBAAA3B,MAAA,mBAAA0a,GAAAC,GAAA,MAAAC,GAAAvZ,MAAA5C,KAAA6C,WAAA,GAAAsZ,GAAA1Z,EAAAiH,mBAAAC,KAAA,QAAAyS,GAAAC,GAAA,GAAAC,GAAAC,EAAA7W,EAAA2W,EAAA,GAsHgChX,EAtHhCkX,EAAA,GAsHiDxC,EAtHjDwC,EAAA,SAAA7S,oBAAAU,KAAA,SAAAoS,GAAA,cAAAA,EAAAlS,KAAAkS,EAAAnW,MAAA,aAuHI0T,GAAO/B,EAAY2B,SAASI,GAvHhCyC,EAAAnW,KAAA,EAwHUrG,KAAKuN,qBAxHf,cA0HU+O,GAAQtc,KAAK4H,IAAI6F,GAAG1L,IAAZ,sBAAsCsD,GAAmB9D,cAChE+a,GAAMvC,GACb/Z,KAAK4H,IAAI6F,GAAGC,IAAZ,sBAAsCrI,EAAmBiX,GAAO/a,QAChEvB,KAAK4H,IAAI6F,GAAG6C,QA7HhBkM,EAAA3R,OAAA,kBA8HoBkP,EA9HpB,iDA8HyE1U,EA9HzE,6BAAAmX,GAAAtR,SAAAkR,EAAApc,QAAA,OAAAic,QAAA/Y,IAAA,YAAA3B,MAAA,mBAAAkb,GAAAC,GAAA,MAAAC,GAAA/Z,MAAA5C,KAAA6C,WAAA,GAAA8Z,GAAAla,EAAAiH,mBAAAC,KAAA,QAAAiT,GAAAC,GAAA,GAAAxC,GAAAyC,EAAApX,EAAAmX,EAAA,GAuIsBP,EAvItBQ,EAAA,SAAApT,oBAAAU,KAAA,SAAA2S,GAAA,cAAAA,EAAAzS,KAAAyS,EAAA1W,MAAA,aAAA0W,GAAA1W,KAAA,EAwIUrG,KAAKuN,qBAxIf,cA0IU8M,GAAQ1Y,OAAO0K,KAAKrM,KAAK4H,IAAI6F,GAAG1L,IAAZ,sBAAsCua,GAAS/a,SA1I7Ewb,EAAAlS,OAAA,SA2IWwP,EAAMjN,KAAK,MA3ItB,wBAAA2P,GAAA7R,SAAA0R,EAAA5c,QAAA,OAAAyc,QAAAvZ,IAAA,uBAAA3B,MAAA,mBAAAyb,GAAAC,EAAAC,GAAA,MAAAC,GAAAva,MAAA5C,KAAA6C,WAAA,GAAAsa,GAAA1a,EAAAiH,mBAAAC,KAAA,QAAAyT,GAAAC,EAkJiDzU,GAlJjD,GAAA8B,GAAA4S,EAAA5X,EAAA2X,EAAA,GAkJiC9R,EAlJjC+R,EAAA,GAkJyCC,EAlJzCD,EAAA,SAAA5T,oBAAAU,KAAA,SAAAoT,GAAA,cAAAA,EAAAlT,KAAAkT,EAAAnX,MAAA,aAAAmX,GAAAnX,KAAA,EAmJUrG,KAAKuN,qBAnJf,YAoJQhC,IAAUgS,EApJlB,CAAAC,EAAAnX,KAAA,WAqJYqE,EAAO1K,KAAK4H,IAAIyI,MAAMO,SAASrF,IACjCb,GAAQA,EAAKC,KAAO/B,EAAQ8B,KAAKC,GAtJ3C,CAAA6S,EAAAnX,KAAA,WAuJYqE,EAAK6S,QAAUA,EAvJ3B,CAAAC,EAAAnX,KAAA,cAwJUqE,GAAK6S,MAAQvX,OAxJvBwX,EAAA3S,OAAA,SAyJiB7K,KAAK4H,IAAI6V,WAAW/S,EAAM9B,EAAQ8B,MAzJnD,cAAA8S,GAAA3S,OAAA,SA4Ja,kCA5Jb,cA8JI0S,GAAQxc,EAAAG,EAAA6W,EAAA,MACRnP,EAAQ8B,KAAK6S,MAAQA,EA/JzBC,EAAA3S,OAAA,SAgKW,mEACUjC,EAAQ8B,KAAKC,GADvB,IAC6B4S,GAjKxC,yBAAAC,GAAAtS,SAAAkS,EAAApd,QAAA,OAAAgd,SAAAhF,GAAiClC,EAAA,GAAjCsD,EAQSO,SAAW,SAAClY,GACjB,GAAIA,EACF,MAAOA,GAAKyL,QAAQ,UAAW,IAAI0K,eAVzC1I,EAAAmK,EAAA9D,EAAArG,EAAA7M,UAAA,SAAA2T,EAAAC,EAAAC,GAAAvU,OAAAsF,yBAAAiI,EAAA7M,UAAA,SAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,iBAAA8T,EAAAC,EAAAC,GAAA1U,OAAAsF,yBAAAiI,EAAA7M,UAAA,iBAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,YAAAiU,EAAAC,EAAA0B,GAAAtW,OAAAsF,yBAAAiI,EAAA7M,UAAA,YAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,qBAAA6V,EAAAC,EAAAC,GAAAzW,OAAAsF,yBAAAiI,EAAA7M,UAAA,qBAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,sBAAAgW,EAAAC,EAAAC,GAAA5W,OAAAsF,yBAAAiI,EAAA7M,UAAA,sBAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,kBAAAmW,EAAAC,EAAAC,GAAA/W,OAAAsF,yBAAAiI,EAAA7M,UAAA,kBAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,uBAAAsW,EAAAC,EAAAC,GAAAlX,OAAAsF,yBAAAiI,EAAA7M,UAAA,uBAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,aAAAyW,EAAAC,EAAAC,GAAArX,OAAAsF,yBAAAiI,EAAA7M,UAAA,aAAA6M,EAAA7M,WAAAkT,EAAArG,EAAA7M,UAAA,wBAAA4W,EAAAC,EAAAC,GAAAxX,OAAAsF,yBAAAiI,EAAA7M,UAAA,wBAAA6M,EAAA7M,WAAA6M,IxBmpEM,SAAStP,EAAQD,GyBxpEvBC,EAAAD,QAAAE,QAAA,WzB8pEM,SAASD,EAAQD,G0B9pEvBC,EAAAD,QAAAE,QAAA,a1BoqEM,SAASD,EAAQD,G2BpqEvBC,EAAAD,QAAAE,QAAA,U3B0qEM,SAASD,EAAQD,G4B1qEvBC,EAAAD,QAAAE,QAAA,a5BgrEM,SAASD,EAAQD,G6BhrEvBC,EAAAD,QAAAE,QAAA,kB7BsrEM,SAASD,EAAQD,EAASoB,GAEhC,YAiCA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAlC3F,GAAIuZ,GAA8C3c,EAAoB,IAClE4c,EAAsD5c,EAAoBiB,EAAE0b,GAC5EE,EAAoC7c,EAAoB,IACxD8c,EAA4C9c,EAAoBiB,EAAE4b,GAClEE,EAA2C/c,EAAoB,IAC/Dgd,EAAmDhd,EAAoBiB,EAAE8b,GACzEE,EAA0Djd,EAAoB,IAC9Ekd,EAAkEld,EAAoBiB,EAAEgc,GACxFE,EAA6Cnd,EAAoB,IAEjEod,GADqDpd,EAAoBiB,EAAEkc,GACpCnd,EAAoB,KAE3Dqd,GAD+Crd,EAAoBiB,EAAEmc,GAC3Bpd,EAAoB,KAC9Dsd,EAAkDtd,EAAoBiB,EAAEoc,GACxEE,EAAiDvd,EAAoB,GACrEwd,EAAoCxd,EAAoB,GACxDyd,EAA0Czd,EAAoB,IAC9D0d,EAA2C1d,EAAoB,GAC/D2d,EAA0C3d,EAAoB,IAC9D4d,EAAuC5d,EAAoB,EAE/DA,GAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAOif,KAChE7d,EAAoBS,EAAE7B,EAAS,SAAU,WAAa,MAAOkf,KAC7D9d,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAOmf,IAA+C,KAAI,GAAIjR,KAA0B2Q,IAA6C,YAAY,SAAS,OAAO,YAAY,WAAW3G,QAAQhK,GAA0B,GAAI,SAAS3K,GAAOnC,EAAoBS,EAAE7B,EAASuD,EAAK,WAAa,MAAOsb,GAAwCtb,MAAW2K,EACtY,KAAI,GAAIA,KAA0B4Q,IAA8C,YAAY,SAAS,OAAO,YAAY,WAAW5G,QAAQhK,GAA0B,GAAI,SAAS3K,GAAOnC,EAAoBS,EAAE7B,EAASuD,EAAK,WAAa,MAAOub,GAAyCvb,MAAW2K,EACrS,KAAI,GAAIA,KAA0B6Q,IAA6C,YAAY,SAAS,OAAO,YAAY,WAAW7G,QAAQhK,GAA0B,GAAI,SAAS3K,GAAOnC,EAAoBS,EAAE7B,EAASuD,EAAK,WAAa,MAAOwb,GAAwCxb,MAAW2K,EACnS,KAAI,GAAIA,KAA0B0Q,IAAuC,YAAY,SAAS,OAAO,YAAY,WAAW1G,QAAQhK,GAA0B,GAAI,SAAS3K,GAAOnC,EAAoBS,EAAE7B,EAASuD,EAAK,WAAa,MAAOqb,GAAkCrb,MAAW2K,EAC9R9M,GAAoBmB,EAAEyc,EAAsC,MAAM5d,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAOgf,GAAwC,GAC/L,IAEIzP,GAAQC,EAAO4P,EAFfxY,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,M8B7sEnhB0a,EAAYP,EAAA9L,CAEzB0L,GAAA1L,EAAKzP,QAAUA,OAIf,IAAMkc,GAAOf,EAAA1L,EAAK0M,MAAMlB,EAAAxL,GAClB2M,EAAW,eAIJL,GAAb1P,EAAAD,EAAA,WAIE,QAAA2P,GAAapd,GAAkB,GAAZuK,GAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAAAmB,GAAAhE,KAAA6e,GAAAE,EAAA3d,KAAApB,MAC7BA,KAAKyB,KAAOA,EACZzB,KAAKgI,MAAQgE,EAAQhE,MACrBhI,KAAKuI,QAAU,GAAIoV,GAAApL,EACnBvS,KAAKgf,KAAOA,EACZhf,KAAKmf,mBAAqBnT,EAAQmT,mBAElCnf,KAAKof,QAAQpT,EAAQqT,UAAYxB,EAAAtL,EAAI+M,SAErCxW,QAAQN,GAAG,qBAAsBxI,KAAKgL,IAAIuU,SAASC,KAAKxf,KAAKgL,KAE7D,IAAM8J,GAAS9I,EAAQ8I,QAAR,UAA4BrT,EAA5B,OACfzB,MAAKyf,OAAOzT,EAAQ9I,IAAK4R,EAAQ9I,EAAQwI,SAAUxI,EAAQ4I,WAC3D5U,KAAKwP,YAELxP,KAAK0f,aAAa1T,EAAQ2C,UAC1B3O,KAAK2f,YAAY3T,EAAQ8F,SApB7B,MAAAvL,GAAAsY,IAAA3b,IAAA,YAAA3B,MAAA,mBAAAiO,KAAA,MAAArH,GAAAvF,MAAA5C,KAAA6C,WAAA,GAAAsF,GAAA1F,EAAAiH,mBAAAC,KAAA,QAAAC,KAAA,MAAAF,oBAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhE,MAAA,aAAAgE,GAAAhE,KAAA,EAqEUrG,KAAKuN,qBArEf,WAsEIvN,KAAKqQ,MAAQrQ,KAAKyN,GAAG1L,IAAImd,GAAU3d,SAE/BvB,KAAKqQ,MAxEb,CAAAhG,EAAAhE,KAAA,cAyEMrG,MAAKgL,IAAI4U,MAAMje,OAAO0K,KAAKrM,KAAKqQ,MAAMO,UAAU9M,OAAQ,gBAzE9DuG,EAAAQ,OAAA,iBA6EI7K,KAAKyN,GAAGC,IAAIwR,GAAWtO,cAAerP,QACtCvB,KAAKqQ,MAAQrQ,KAAKyN,GAAG1L,IAAImd,GAAU3d,OA9EvC,wBAAA8I,GAAAa,SAAAtB,EAAA5J,QAAA,OAAAwP,QAAAtM,IAAA,aAAA3B,MAAA,SAiFcse,EAAUC,GAAS,GAAAxY,GAAAtH,IAC7B,IAAI6f,GAAYC,EAQd,MAPA/e,GAAAG,EAAAid,EAAA,OAAM0B,EAASnR,MAAOoR,EAAQpR,OAC9B/M,OAAO0K,KAAKyT,EAAQnR,UAAUhH,IAAI,SAAAyG,GAChC9G,EAAK+I,MAAMjC,GAAS0R,EAAQnR,SAASP,GAAS7C,QAAQsF,MAAQgP,EAASlV,KAEzE5J,EAAAG,EAAAid,EAAA,OAAM0B,EAASlR,SAAUmR,EAAQnR,gBAC1B3O,MAAKqQ,MAAMO,SAASkP,EAAQnV,IACnC3K,KAAKyN,GAAG6C,QACD,oBA1FbpN,IAAA,UAAA3B,MAAA,SA+FUgK,EAAQwU,GACd/f,KAAKqQ,MAAMO,SAASrF,GAAQmD,MAAMqR,IAAY,EAC9C/f,KAAKyN,GAAG6C,WAjGZpN,IAAA,WAAA3B,MAAA,SAoGWgK,GACP,MAAO5J,QAAO0K,KAAKrM,KAAKqQ,MAAMO,SAASrF,GAAQmD,UArGnDxL,IAAA,aAAA3B,MAAA,SAwGagK,EAAQwU,GACjB,GAAMrR,GAAQ1O,KAAKqQ,MAAMO,SAASrF,GAAQmD,YACnCA,GAAMqR,GACb/f,KAAKyN,GAAG6C,WA3GZpN,IAAA,eAAA3B,MAAA,SA8GgBgK,GAAQ,GAAA7D,GAAA1H,KACd0K,EAAO1K,KAAKqQ,MAAMO,SAASrF,GAC7BmD,IAEJ,IAAIhE,EAQF,MAPA/I,QAAO0K,KAAK3B,EAAKiE,UAAUhH,IAAI,SAAAyG,GAC7B,GAAM4R,GAAetY,EAAKiH,SAASP,GAAS6R,gBAAgBvV,EAAKiE,SAASP,GAAS7C,OAC/EyU,KACFtR,EAAQA,EAAMpG,OAAO0X,MAGzBtR,EAAQA,EAAMpG,OAAO3G,OAAO0K,KAAK3B,EAAKgE,WAzH5CxL,IAAA,mBAAA3B,MAAA,mBAAAkJ,GAAAnB,EAAAC,GAAA,MAAAnB,GAAAxF,MAAA5C,KAAA6C,WAAA,GAAAuF,GAAA3F,EAAAiH,mBAAAC,KAAA,QAAA2B,GA8H0BC,EAAQC,GA9HlC,GAAAkD,GAAAwR,CAAA,OAAAxW,oBAAAU,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAApF,MAAA,UA+HSrG,KAAKmgB,eA/Hd,CAAA1U,EAAApF,KAAA,cAAAoF,GAAAZ,OAAA,UA+HuC,EA/HvC,WAkImC,uBAA3BW,EAlIR,CAAAC,EAAApF,KAAA,cAAAoF,GAAAZ,OAAA,UAkIkE,EAlIlE,cAAAY,GAAApF,KAAA,EAoIUrG,KAAKuN,qBApIf,WAuIUmB,EAAQ1O,KAAKgb,aAAazP,IAE5BmD,IAASA,EAAMtF,SAAS,SAzIhC,CAAAqC,EAAApF,KAAA,cAAAoF,GAAAZ,OAAA,UAyImD,EAzInD,WA4IUqV,EAASlgB,KAAKyN,GAAG1L,IAAR,sBAAkCyJ,GAA0BjK,QAGtE2e,GAAWve,OAAO0K,KAAK6T,GA/IhC,CAAAzU,EAAApF,KAAA,YAgJWrG,KAAKmf,mBAhJhB,CAAA1T,EAAApF,KAAA,eAAAoF,GAAAZ,OAAA,UAiJe,EAjJf,eAAAY,GAAAZ,OAAA,UAsJa,EAtJb,aAyJQqV,YAzJR,CAAAzU,EAAApF,KAAA,eAAAoF,GAAAZ,OAAA,UAyJgC,EAzJhC,aA6JQ9J,EAAAG,EAAAgd,EAAA,cAAaxP,EAAO/M,OAAO0K,KAAK6T,IAASpc,OA7JjD,CAAA2H,EAAApF,KAAA,eAAAoF,GAAAZ,OAAA,UA8Ja,EA9Jb,eAAAY,GAAAZ,OAAA,UAiKW,EAjKX,yBAAAY,GAAAP,SAAAI,EAAAtL,QAAA,OAAAyK,QAAAvH,IAAA,sBAAA3B,MAAA,mBAAAgM,KAAA,MAAAxE,GAAAnG,MAAA5C,KAAA6C,WAAA,GAAAkG,GAAAtG,EAAAiH,mBAAAC,KAAA,QAAAwQ,KAAA,GAAAtS,GAAA7H,IAAA,OAAA0J,oBAAAU,KAAA,SAAAmQ,GAAA,cAAAA,EAAAjQ,KAAAiQ,EAAAlU,MAAA,WAqKQrG,KAAKyN,GArKb,CAAA8M,EAAAlU,KAAA,cAAAkU,GAAA1P,OAAA,UAsKa,EAtKb,cAAA0P,GAAA1P,OAAA,SAwKW,GAAI/H,SAAQ,SAACC,GAClB8E,EAAKU,QAAQC,GAAG,WAAYzF,KAzKlC,wBAAAwX,GAAArP,SAAAiP,EAAAna,QAAA,OAAAuN,QAAArK,IAAA,YAAA3B,MAAA,SAiLa6e,GACTA,EAAOC,SAASrgB,MAChBA,KAAK8R,QAAQxL,KAAK8Z,MAnLtBld,IAAA,aAAA3B,MAAA,SAsLc6M,GACV,GAAM3M,GAAO2M,EAAQ3M,IAEjBzB,MAAKsgB,iBAAiB7e,IACxBzB,KAAKgL,IAAIC,QAAT,aAA8BxJ,EAA9B,gCAGF2M,EAAQiS,SAASrgB,MACjBA,KAAK2O,SAASP,EAAQ3M,MAAQ2M,KA9LlClL,IAAA,wBAAA3B,MAAA,SAiMyBkH,GAQrB,MANEA,GAAKkN,MAAM,EAAG3V,KAAKyB,KAAKqC,QAAQ8T,gBAAkB5X,KAAKyB,KAAKmW,eAC5DnP,EAAKkN,MAAM,EAAG3V,KAAKgI,MAAMlE,QAAQ8T,gBAAkB5X,KAAKgI,MAAM4P,gBAE9DnP,EAAUzI,KAAKyB,KAAf,IAAuBgH,GAGlBA,KAzMXvF,IAAA,OAAA3B,MAAA,SA4MQqH,GACJ,GAAKA,EAAQH,KAAb,CACA,GAAM2F,GAAUpO,KAAKugB,oBAAoB3X,EAEzC,OAAKwF,OAKLA,GAAQtD,KAAKlC,OAJX5I,MAAKgL,IAAIC,QAAT,sCAAuDrC,EAAQwF,aAjNrElL,IAAA,sBAAA3B,MAAA,SAwNuBqH,GACnB,MAAO5I,MAAK2O,SAAS/F,EAAQwF,YAzNjClL,IAAA,mBAAA3B,MAAA,SA4NoBE,GAAM,GAAAkM,GAAA3N,IACtB,OAAO2B,QACE0K,KAAKrM,KAAK2O,UACVhH,IAAI,SAAAgD,GAAA,MAAMgD,GAAKgB,SAAShE,KACxB6V,KAAK,SAAAjO,GAAA,MAAKA,GAAE9Q,KAAKmW,gBAAkBnW,EAAKmW,oBAhOrDiH,KAAAE,EAAA,cAAA0B,GAAAzgB,UACE8R,WADF9R,KAEE2O,YAFF3O,KAwBE0f,aAAe,WAAiB,GAAhB/Q,GAAgB9L,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAC9B8L,GAASzG,QAAQ,SAAAqK,GAAA,MAAKkO,GAAKC,WAAWnO,MAzB1CvS,KA4BE2f,YAAc,WAAgB,GAAf7N,GAAejP,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAC5BiP,GAAQ5J,QAAQ,SAAA3F,GACdke,EAAKE,UAAUpe,GAIXA,YAAa+b,GAAA,cACfmC,EAAKN,gBAAiB,MAnC9BngB,KAwCEof,QAAU,SAACC,GACT,GAAMrU,GAAM,GAAI6S,GAAAtL,EAAI8M,GAAYxB,EAAAtL,EAAI+M,QACpCmB,GAAKzV,IAAMA,EACXyV,EAAKpB,SAAWA,EAEZA,IAAaxB,EAAAtL,EAAIqO,OACnBC,YAAYJ,EAAKK,WAAY,MA9CnC9gB,KAkDEyf,OAAS,SAACvc,EAAK4R,EAAQN,EAAUI,GAC/B,MAAK1R,OAKLnC,GAAAG,EAAAqd,EAAA,KACErb,MACAsR,WACAI,YACAH,KAAMK,EACNvM,QAASkY,EAAKlY,UACbhF,KAAK,SAACkK,GACPgT,EAAKhT,GAAKA,EACVgT,EAAKlY,QAAQoH,KAAK,WAAYlC,IAC7BgT,EAAKzV,IAAIuU,SAASC,KAAKiB,EAAKzV,UAb7ByV,GAAKzV,IAAIuU,SAAS,uEApDxBvf,KA6KE8gB,WAAa,WACXL,EAAKzV,IAAI4U,MAAM9W,QAAQiY,cAAejY,QAAQkY,cA9KlD7R,GAyOa2P,EAAYjB,EAAAtL,G9Bk3EjB,CAEF,SAAS3S,EAAQD,G+BhnFvBC,EAAAD,QAAAE,QAAA","file":"exobot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"proptypes\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"cryptr\", \"eventemitter3\", \"fs-extra\", \"lodash\", \"lodash/array\", \"log\", \"lowdb\", \"node-uuid\", \"proptypes\", \"readline\", \"superagent\", \"superagent-promise-plugin\", \"underscore-db\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exobot.js\"] = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"proptypes\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse\n\t\troot[\"exobot.js\"] = factory(root[\"cryptr\"], root[\"eventemitter3\"], root[\"fs-extra\"], root[\"lodash\"], root[\"lodash/array\"], root[\"log\"], root[\"lowdb\"], root[\"node-uuid\"], root[\"proptypes\"], root[\"readline\"], root[\"superagent\"], root[\"superagent-promise-plugin\"], root[\"underscore-db\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_34__, __WEBPACK_EXTERNAL_MODULE_30__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_31__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"proptypes\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"cryptr\", \"eventemitter3\", \"fs-extra\", \"lodash\", \"lodash/array\", \"log\", \"lowdb\", \"node-uuid\", \"proptypes\", \"readline\", \"superagent\", \"superagent-promise-plugin\", \"underscore-db\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exobot.js\"] = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"proptypes\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"));\n\telse\n\t\troot[\"exobot.js\"] = factory(root[\"cryptr\"], root[\"eventemitter3\"], root[\"fs-extra\"], root[\"lodash\"], root[\"lodash/array\"], root[\"log\"], root[\"lowdb\"], root[\"node-uuid\"], root[\"proptypes\"], root[\"readline\"], root[\"superagent\"], root[\"superagent-promise-plugin\"], root[\"underscore-db\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_34__, __WEBPACK_EXTERNAL_MODULE_30__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_31__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 32);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__messages_text__ = __webpack_require__(10);\n\n/* harmony export */ __webpack_require__.d(exports, \"e\", function() { return ChatPlugin; });\n/* harmony export */ __webpack_require__.d(exports, \"c\", function() { return listen; });\n/* harmony export */ __webpack_require__.d(exports, \"d\", function() { return respond; });\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return help; });\n/* harmony export */ __webpack_require__.d(exports, \"b\", function() { return permissionGroup; });var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar DEFAULT_REGEXP = /.+/;\n\nvar ChatPlugin = function (_Plugin) {\n  _inherits(ChatPlugin, _Plugin);\n\n  function ChatPlugin() {\n    _classCallCheck(this, ChatPlugin);\n\n    var _this = _possibleConstructorReturn(this, (ChatPlugin.__proto__ || Object.getPrototypeOf(ChatPlugin)).apply(this, arguments));\n\n    _this.regexp = DEFAULT_REGEXP;\n    _this.respondFunctions = [];\n    _this.listenFunctions = [];\n    _this.help = [];\n    return _this;\n  }\n\n  _createClass(ChatPlugin, [{\n    key: 'helpText',\n    value: function helpText() {\n      var _this2 = this;\n\n      return this.help.map(function (n) {\n        return '[' + _this2[n].permissionGroup + '] ' + _this2[n].help;\n      });\n    }\n  }, {\n    key: 'register',\n    value: function register(bot) {\n      var _this3 = this;\n\n      _get(ChatPlugin.prototype.__proto__ || Object.getPrototypeOf(ChatPlugin.prototype), 'register', this).call(this, bot);\n      this.bot = bot;\n      this.botNameRegex = new RegExp('^(?:(?:@?' + bot.name + '|' + bot.alias + ')[,\\\\s:.-]*)(.+)', 'i');\n\n      if (this.postConstructor) {\n        this.postConstructor.forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2);\n\n          var fn = _ref2[0];\n          var args = _ref2[1];\n          return fn.call.apply(fn, [_this3].concat(_toConsumableArray(args)));\n        });\n      }\n\n      bot.emitter.on('receive-message', function (m) {\n        // v = [\n        //   validation function or regex,\n        //   the response function from the plugin,\n        //   the name of the function (the class.property name)\n        // ];\n        // as pushed by the listen/respond functions below\n\n        // strip out the bot name from the beginning before processing\n        var text = _this3.stripLeadingBotName(m.text);\n\n        var skipFns = [];\n\n        // If it had the bot name at the beginning, process the respond functions\n        if (text) {\n          (function () {\n            // create a new message with the stripped text and pass it in\n            var message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, m, { text: text }));\n            _this3.respondFunctions.forEach(function (v) {\n              return _this3.process.apply(_this3, _toConsumableArray(v).concat([message]));\n            });\n            skipFns = _this3.respondFunctions.map(function (_ref3) {\n              var _ref4 = _slicedToArray(_ref3, 3);\n\n              var name = _ref4[2];\n              return name;\n            });\n          })();\n        }\n\n        _this3.listenFunctions.filter(function (_ref5) {\n          var _ref6 = _slicedToArray(_ref5, 3);\n\n          var name = _ref6[2];\n          return !skipFns.includes(name);\n        }).forEach(function (v) {\n          return _this3.process.apply(_this3, _toConsumableArray(v).concat([m]));\n        });\n      });\n    }\n  }, {\n    key: 'process',\n    value: function () {\n      var _ref7 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(validation, response, fnName, message) {\n        var fn, res, text, t, _newMessage, newMessage;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                fn = validation.exec ? this.validateMessage(validation) : validation;\n                res = fn(message, this.bot);\n\n                if (!res) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _context.next = 6;\n                return this.checkPermissions(message.user.id, this[fnName].permissionGroup);\n\n              case 6:\n                if (!_context.sent) {\n                  _context.next = 18;\n                  break;\n                }\n\n                text = response.call(this, res, message);\n\n                if (text) {\n                  _context.next = 10;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 10:\n                if (!(text instanceof Promise)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 13;\n                return text;\n\n              case 13:\n                t = _context.sent;\n                _newMessage = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: t }));\n                return _context.abrupt('return', this.bot.send(_newMessage));\n\n              case 16:\n                newMessage = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: text }));\n\n                this.bot.send(newMessage);\n\n              case 18:\n                _context.next = 23;\n                break;\n\n              case 20:\n                _context.prev = 20;\n                _context.t0 = _context['catch'](0);\n\n                this.bot.log.warning(_context.t0);\n\n              case 23:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 20]]);\n      }));\n\n      function process(_x, _x2, _x3, _x4) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: 'checkPermissions',\n    value: function () {\n      var _ref8 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(userId, commandPermissionGroup) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt('return', this.bot.checkPermissions(userId, commandPermissionGroup));\n\n              case 1:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function checkPermissions(_x5, _x6) {\n        return _ref8.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: 'stripLeadingBotName',\n    value: function stripLeadingBotName(text) {\n      var exec = this.botNameRegex.exec(text);\n      if (!exec) {\n        return;\n      }\n\n      return exec[1];\n    }\n  }, {\n    key: 'respond',\n    value: function respond(validation, fn, name) {\n      this.respondFunctions.push([validation, fn, name]);\n    }\n  }, {\n    key: 'listen',\n    value: function listen(validation, fn, name) {\n      this.listenFunctions.push([validation, fn, name]);\n    }\n  }, {\n    key: 'setHelp',\n    value: function setHelp(text, fnName) {\n      this.help.push(fnName);\n      this[fnName].help = text;\n    }\n  }, {\n    key: 'setPermissionGroup',\n    value: function setPermissionGroup(fn, name) {\n      this[fn].permissionGroup = this.name + '.' + name;\n    }\n  }, {\n    key: 'validateMessage',\n    value: function validateMessage(regex) {\n      return function (message) {\n        return regex.exec(message.text);\n      };\n    }\n  }]);\n\n  return ChatPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\nvar listen = function listen(validation) {\n  return function (target, name, descriptor) {\n    var fn = descriptor.value;\n\n    if (!fn.permissionGroup) {\n      fn.permissionGoup = target.name + '.' + name;\n    }\n\n    target.postConstructor = target.postConstructor || [];\n    target.postConstructor.push([target.listen, [validation, fn, name]]);\n  };\n};\n\nvar respond = function respond(validation) {\n  return function (target, name, descriptor) {\n    var fn = descriptor.value;\n\n    if (!fn.permissionGroup) {\n      fn.permissionGoup = target.name + '.' + name;\n    }\n\n    target.postConstructor = target.postConstructor || [];\n    target.postConstructor.push([target.respond, [validation, fn, name]]);\n  };\n};\n\nvar help = function help(text) {\n  return function (target, fnName) {\n    target.postConstructor.push([target.setHelp, [text, fnName]]);\n  };\n};\n\nvar permissionGroup = function permissionGroup(name) {\n  return function (target, fnName) {\n    target.postConstructor.push([target.setPermissionGroup, [fnName, name]]);\n  };\n};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Plugin; });var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KEY_REGEX = /([a-z][A-Z])/g;\n\nvar Plugin = function () {\n  function Plugin() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Plugin);\n\n    this.help = undefined;\n    this._requiresDatabase = false;\n    this.propTypes = null;\n    this.defaultProps = {};\n\n    this.options = options;\n  }\n\n  _createClass(Plugin, [{\n    key: 'register',\n    value: function register(bot) {\n      this.bot = bot;\n\n      this.options = this.parseConfig(_extends({}, this.defaultProps, this.options));\n\n      if (this.propTypes && Object.keys(this.propTypes).length) {\n        this.checkConfig(this.options, this.propTypes, bot);\n      }\n\n      if (!bot) {\n        throw new Error('No bot passed to register; fatal.');\n      }\n\n      if (!this.name) {\n        throw new Error('This plugin has a missing `name` property.');\n      }\n\n      if (!this.propTypes) {\n        bot.log.notice('Plugin \"' + this.name + '\" does not define propTypes; it should.');\n      }\n\n      this.database();\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      if (!this.bot) {\n        throw new Error('No bot to listen on; fatal.');\n      }\n    }\n  }, {\n    key: 'parseConfig',\n    value: function parseConfig() {\n      var _this = this;\n\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var optionKeys = Object.keys(options);\n\n      var config = _extends({}, options, Object.keys(this.propTypes || {}).filter(function (k) {\n        return !optionKeys.includes(k);\n      }).reduce(function (c, k) {\n        var env = process.env[_this.envify(k)];\n\n        if (env) {\n          c[k] = env;\n        }\n\n        return c;\n      }, {}));\n\n      return config;\n    }\n  }, {\n    key: 'checkConfig',\n    value: function checkConfig() {\n      var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var _this2 = this;\n\n      var propTypes = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n      var bot = arguments[2];\n\n      return Object.keys(propTypes).reduce(function (pass, k) {\n        if (!propTypes[k]) {\n          bot.log.warning('Unrecognized prop ' + k + ' passed into options of ' + _this2.name + ' plugin');\n          return false;\n        }\n\n        var err = propTypes[k](config, k, _this2.name + ' config', 'property');\n\n        if (err) {\n          bot.log.warning(err.toString());\n          return false;\n        }\n\n        return pass;\n      }, true);\n    }\n\n    // turn a key like myKey into PLUGINNAME_MY_KEY\n\n  }, {\n    key: 'envify',\n    value: function envify() {\n      var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      return [this.name, key.replace(KEY_REGEX, function (l) {\n        return l.split('').join('_');\n      })].join('_').toUpperCase();\n    }\n  }, {\n    key: 'database',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.defaultDatabase) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n\n                Object.keys(this.defaultDatabase).forEach(function (name) {\n                  var val = _this3.bot.db.get(name).value();\n\n                  if (typeof val === 'undefined') {\n                    _this3.bot.db.set(name, _this3.defaultDatabase[name]).value();\n                  }\n                });\n\n              case 4:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function database() {\n        return _ref.apply(this, arguments);\n      }\n\n      return database;\n    }()\n  }, {\n    key: 'databaseInitialized',\n    value: function () {\n      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this._requiresDatabase = true;\n\n                if (!(this._requiresDatabase && this.bot.db)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 3:\n                return _context2.abrupt('return', new Promise(function (resolve) {\n                  _this4.bot.emitter.on('dbLoaded', resolve);\n                }));\n\n              case 4:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function databaseInitialized() {\n        return _ref2.apply(this, arguments);\n      }\n\n      return databaseInitialized;\n    }()\n  }]);\n\n  return Plugin;\n}();\n\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__db__ = __webpack_require__(21);\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_0__db__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_0__db__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__presence__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__text__ = __webpack_require__(10);\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_0__message__, \"a\")) __webpack_require__.d(exports, \"Message\", function() { return __WEBPACK_IMPORTED_MODULE_0__message__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__presence__, \"a\")) __webpack_require__.d(exports, \"PresenceMessage\", function() { return __WEBPACK_IMPORTED_MODULE_1__presence__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_2__text__, \"a\")) __webpack_require__.d(exports, \"TextMessage\", function() { return __WEBPACK_IMPORTED_MODULE_2__text__[\"a\"]; });\n\n\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_uuid__);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Message; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Message = function Message(_ref) {\n  var user = _ref.user;\n  var channel = _ref.channel;\n  var adapter = _ref.adapter;\n  var _ref$id = _ref.id;\n  var id = _ref$id === undefined ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_node_uuid__[\"v4\"])() : _ref$id;\n\n  _classCallCheck(this, Message);\n\n  this.user = user;\n  this.channel = channel;\n  this.adapter = adapter;\n  this.id = id;\n};\n\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"node-uuid\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__greetings__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__help__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__permissions__ = __webpack_require__(26);\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_0__greetings__, \"a\")) __webpack_require__.d(exports, \"Greetings\", function() { return __WEBPACK_IMPORTED_MODULE_0__greetings__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__help__, \"a\")) __webpack_require__.d(exports, \"Help\", function() { return __WEBPACK_IMPORTED_MODULE_1__help__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_2__permissions__, \"a\")) __webpack_require__.d(exports, \"Permissions\", function() { return __WEBPACK_IMPORTED_MODULE_2__permissions__[\"a\"]; });\n\n\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_uuid__);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return User; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar User = function User(name, id, adapter) {\n  _classCallCheck(this, User);\n\n  this.name = name;\n  this.id = id || __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_node_uuid__[\"v4\"])();\n  this.roles = {};\n  this.adapters = adapter || {};\n};\n\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__messages_text__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__messages_presence__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__user__ = __webpack_require__(7);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Adapter; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Adapter = (_temp = _class = function () {\n  function Adapter() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Adapter);\n\n    this.options = options;\n    this.status = Adapter.STATUS.UNINITIALIZED;\n    this.roleMapping = options.roleMapping;\n  }\n\n  _createClass(Adapter, [{\n    key: 'register',\n    value: function register(bot) {\n      if (!bot) {\n        throw new Error('No bot passed to register; fatal.');\n      }\n      if (!this.name) {\n        throw new Error('This adapter has no `name` property; some plugins will not work.');\n      }\n\n      this.bot = bot;\n      this.initUsers();\n      this.status = Adapter.STATUS.CONNECTING;\n      this.listen();\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      if (!this.bot) {\n        throw new Error('No bot to listen on; fatal.');\n      }\n    }\n  }, {\n    key: 'receive',\n    value: function receive(_ref) {\n      var user = _ref.user;\n      var text = _ref.text;\n      var channel = _ref.channel;\n      var whisper = _ref.whisper;\n\n      if (!text) {\n        this.bot.log.info('Message received with undefined text.');\n        return;\n      }\n\n      var message = new __WEBPACK_IMPORTED_MODULE_0__messages_text__[\"a\" /* default */]({ user: user, text: text, channel: channel, whisper: whisper, adapter: this.name });\n      this.bot.emitter.emit('receive-message', message);\n    }\n  }, {\n    key: 'receiveWhisper',\n    value: function receiveWhisper(_ref2) {\n      var user = _ref2.user;\n      var text = _ref2.text;\n      var channel = _ref2.channel;\n\n      if (!text) {\n        this.bot.log.warning('Message received with undefined text.');\n        return;\n      }\n\n      text = this.bot.prependNameForWhisper(text);\n      this.receive({ user: user, text: text, channel: channel, whisper: true });\n    }\n  }, {\n    key: 'enter',\n    value: function enter(_ref3) {\n      var user = _ref3.user;\n      var channel = _ref3.channel;\n\n      var message = new __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */]({\n        user: user,\n        channel: channel,\n        adapter: this.name,\n        type: __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */].TYPES.ENTER\n      });\n\n      this.bot.emitter.emit('enter', message);\n    }\n  }, {\n    key: 'leave',\n    value: function leave(_ref4) {\n      var user = _ref4.user;\n      var channel = _ref4.channel;\n\n      var message = new __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */]({\n        user: user,\n        channel: channel,\n        adapter: this.name,\n        type: __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */].TYPES.LEAVE\n      });\n\n      this.bot.emitter.emit('leave', message);\n    }\n  }, {\n    key: 'send',\n    value: function send(message) {\n      console.log(message.text);\n    }\n  }, {\n    key: 'ping',\n    value: function ping() {\n      this.pong();\n    }\n  }, {\n    key: 'pong',\n    value: function pong() {\n      this.bot.log.warning('Ping received, this.pong() not implemented.');\n    }\n  }, {\n    key: 'getUserIdByUserName',\n    value: function getUserIdByUserName(name) {\n      this.bot.log.warning('getUserIdByUserName not implemented by this adapter.');\n      return name;\n    }\n  }, {\n    key: 'getRoleIdByRoleName',\n    value: function getRoleIdByRoleName(name) {\n      this.bot.log.warning('getRoleIdByRoleName not implemented by this adapter');\n      return name;\n    }\n  }, {\n    key: 'getRolesForUser',\n    value: function getRolesForUser() {\n      return [];\n    }\n  }, {\n    key: 'initUsers',\n    value: function () {\n      var _ref5 = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.databaseInitialized();\n\n              case 2:\n                this.adapterUsers = this.bot.users[this.name];\n\n                if (!this.adapterUsers) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 5:\n\n                this.bot.users[this.name] = {};\n                this.adapterUsers = this.bot.users[this.name];\n                this.bot.db.write();\n\n              case 8:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initUsers() {\n        return _ref5.apply(this, arguments);\n      }\n\n      return initUsers;\n    }()\n  }, {\n    key: 'getRoles',\n    value: function getRoles() {\n      this.bot.log.warning('getRoles not implemented by this adapter');\n      return false;\n    }\n  }, {\n    key: 'getUser',\n    value: function () {\n      var _ref6 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(adapterUserId, adapterUsername) {\n        var adapterUser = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n        var roles, user;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.databaseInitialized();\n\n              case 2:\n                if (!adapterUserId) {\n                  this.bot.error('Adapter ' + this.name + ' called getUser without adapterUserId');\n                }\n                if (!adapterUsername) {\n                  this.bot.warning('Adapter ' + this.name + ' called getUser without adapterUsername');\n                }\n\n                roles = this.getRoles(adapterUserId, adapterUser);\n\n                if (!this.adapterUsers) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                if (!this.adapterUsers[adapterUserId]) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                if (roles) {\n                  console.log('1');\n                  this.adapterUsers[adapterUserId].roles = roles;\n                }\n\n                if (adapterUsername) {\n                  this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId].name = adapterUsername;\n                }\n\n                return _context2.abrupt('return', this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId]);\n\n              case 10:\n                user = new __WEBPACK_IMPORTED_MODULE_2__user__[\"a\" /* default */](adapterUsername);\n\n                user.adapters = _defineProperty({}, this.name, { userId: adapterUserId });\n                this.adapterUsers[adapterUserId] = { name: adapterUsername,\n                  botId: user.id,\n                  roles: roles || [] };\n                this.bot.users.botUsers[user.id] = user;\n                this.bot.db.write();\n                return _context2.abrupt('return', user);\n\n              case 16:\n                return _context2.abrupt('return', new __WEBPACK_IMPORTED_MODULE_2__user__[\"a\" /* default */](adapterUsername, adapterUserId, _defineProperty({}, this.name, adapterUserId)));\n\n              case 17:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getUser(_x2, _x3, _x4) {\n        return _ref6.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }]);\n\n  return Adapter;\n}(), _class.STATUS = {\n  UNINITIALIZED: 0,\n  CONNECTING: 1,\n  CONNECTED: 2,\n  DISCONNECTED: 3,\n  RECONNECTING: 4,\n  ERROR: 5\n}, _temp);\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(4);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return PresenceMessage; });var _class, _temp;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar PresenceMessage = (_temp = _class = function (_Message) {\n  _inherits(PresenceMessage, _Message);\n\n  function PresenceMessage(_ref) {\n    var type = _ref.type;\n\n    _classCallCheck(this, PresenceMessage);\n\n    var _this = _possibleConstructorReturn(this, (PresenceMessage.__proto__ || Object.getPrototypeOf(PresenceMessage)).apply(this, arguments));\n\n    _this.type = type;\n    return _this;\n  }\n\n  return PresenceMessage;\n}(__WEBPACK_IMPORTED_MODULE_0__message__[\"a\" /* default */]), _class.TYPES = {\n  ENTER: 0,\n  LEAVE: 1\n}, _temp);\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(4);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return TextMessage; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar TextMessage = function (_Message) {\n  _inherits(TextMessage, _Message);\n\n  function TextMessage(_ref) {\n    var text = _ref.text;\n    var _ref$whisper = _ref.whisper;\n    var whisper = _ref$whisper === undefined ? false : _ref$whisper;\n\n    _classCallCheck(this, TextMessage);\n\n    var _this = _possibleConstructorReturn(this, (TextMessage.__proto__ || Object.getPrototypeOf(TextMessage)).apply(this, arguments));\n\n    if (text) {\n      _this.text = text.trim();\n    }\n\n    _this.whisper = !!whisper;\n    return _this;\n  }\n\n  return TextMessage;\n}(__WEBPACK_IMPORTED_MODULE_0__message__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapter__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__adapters__ = __webpack_require__(19);\n\n/* harmony export */ __webpack_require__.d(exports, \"adapters\", function() { return adapters; });/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__adapter__, \"a\")) __webpack_require__.d(exports, \"Adapter\", function() { return __WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\"]; });\n\n\n\nvar adapters = __WEBPACK_IMPORTED_MODULE_0__adapters__;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__http__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chat__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugins__ = __webpack_require__(6);\n\n/* harmony export */ __webpack_require__.d(exports, \"plugins\", function() { return plugins; });/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_1__plugin__, \"a\")) __webpack_require__.d(exports, \"Plugin\", function() { return __WEBPACK_IMPORTED_MODULE_1__plugin__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_2__event__, \"a\")) __webpack_require__.d(exports, \"EventPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_2__event__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_3__http__, \"a\")) __webpack_require__.d(exports, \"HTTPPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_3__http__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"e\")) __webpack_require__.d(exports, \"ChatPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"e\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"d\")) __webpack_require__.d(exports, \"respond\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"d\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"c\")) __webpack_require__.d(exports, \"listen\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"c\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"a\")) __webpack_require__.d(exports, \"help\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"a\"]; });\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_4__chat__, \"b\")) __webpack_require__.d(exports, \"permissionGroup\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"b\"]; });\n\n\n\n\n\n\n\nvar plugins = __WEBPACK_IMPORTED_MODULE_0__plugins__;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"eventemitter3\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lodash\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lodash/array\");\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"log\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"superagent\");\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"superagent-promise-plugin\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shell__ = __webpack_require__(20);\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_0__shell__, \"a\")) __webpack_require__.d(exports, \"Shell\", function() { return __WEBPACK_IMPORTED_MODULE_0__shell__[\"a\"]; });\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_readline__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_readline___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_readline__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapter__ = __webpack_require__(8);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return ShellAdapter; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar SHELL = 'SHELL';\n\nvar EXIT_COMMANDS = ['exit', 'quit', 'q'];\n\nvar ShellAdapter = function (_Adapter) {\n  _inherits(ShellAdapter, _Adapter);\n\n  function ShellAdapter() {\n    _classCallCheck(this, ShellAdapter);\n\n    var _this = _possibleConstructorReturn(this, (ShellAdapter.__proto__ || Object.getPrototypeOf(ShellAdapter)).call(this));\n\n    _this.name = 'shell';\n\n    _this.rl = __WEBPACK_IMPORTED_MODULE_0_readline___default.a.createInterface({\n      input: process.stdin,\n      output: process.stdout\n    });\n\n    return _this;\n  }\n\n  _createClass(ShellAdapter, [{\n    key: 'prompt',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.databaseInitialized();\n\n              case 2:\n                _context.next = 4;\n                return this.getUser('shell', 'shell');\n\n              case 4:\n                this.user = _context.sent;\n\n                this.rl.question('Chat: ', function (answer) {\n                  if (EXIT_COMMANDS.includes(answer)) {\n                    _this2.bot.db.write().then(function () {\n                      return process.exit();\n                    });\n                  }\n\n                  _get(ShellAdapter.prototype.__proto__ || Object.getPrototypeOf(ShellAdapter.prototype), 'receive', _this2).call(_this2, {\n                    text: answer,\n                    channel: SHELL,\n                    user: _this2.user\n                  });\n\n                  _this2.prompt();\n                });\n\n              case 6:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function prompt() {\n        return _ref.apply(this, arguments);\n      }\n\n      return prompt;\n    }()\n  }, {\n    key: 'register',\n    value: function register(bot) {\n      _get(ShellAdapter.prototype.__proto__ || Object.getPrototypeOf(ShellAdapter.prototype), 'register', this).call(this, bot);\n      this.prompt();\n      this.status = __WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\" /* default */].STATUS.CONNECTED;\n    }\n  }, {\n    key: 'getUserIdByUserName',\n    value: function getUserIdByUserName() {\n      return this.user.id;\n    }\n  }]);\n\n  return ShellAdapter;\n}(__WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cryptr__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cryptr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_cryptr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lowdb__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lowdb___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lowdb__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_fs_extra__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_fs_extra___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_fs_extra__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_underscore_db__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_underscore_db___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_underscore_db__);\n\n/* harmony export */ __webpack_require__.d(exports, \"deserialize\", function() { return deserialize; });\n/* harmony export */ __webpack_require__.d(exports, \"serialize\", function() { return serialize; });\n/* harmony export */ __webpack_require__.d(exports, \"read\", function() { return read; });\n/* harmony export */ __webpack_require__.d(exports, \"write\", function() { return write; });\n/* harmony export */ __webpack_require__.d(exports, \"readLocal\", function() { return readLocal; });\n/* harmony export */ __webpack_require__.d(exports, \"writeLocal\", function() { return writeLocal; });\n/* harmony export */ __webpack_require__.d(exports, \"DB\", function() { return DB; });function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\n\nvar deserialize = function deserialize(cryptr) {\n  return function (str) {\n    if (!str) {\n      return {};\n    }\n    var decrypted = cryptr.decrypt(str);\n    var obj = JSON.parse(decrypted);\n    return obj;\n  };\n};\n\nvar serialize = function serialize(cryptr) {\n  return function (obj) {\n    var str = JSON.stringify(obj);\n    var encrypted = cryptr.encrypt(str);\n    return encrypted;\n  };\n};\n\nvar read = function read(readFile) {\n  return function (path, deserialize) {\n    return new Promise(function (resolve, reject) {\n      readFile(path).then(function (data) {\n        try {\n          resolve(deserialize(data));\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  };\n};\n\nvar write = function write(writeFile) {\n  return function (path, obj, serialize) {\n    return new Promise(function (resolve, reject) {\n      try {\n        var data = serialize(obj);\n        writeFile(path, data).then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n};\n\nvar readLocal = function readLocal(path) {\n  return new Promise(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.ensureFile(path, function (err) {\n      if (err) {\n        return reject(err);\n      }\n      __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.readFile(path, 'utf8', function (err, data) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nvar writeLocal = function writeLocal(path, data) {\n  return new Promise(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.ensureFile(path, function (err) {\n      if (err) {\n        return reject(err);\n      }\n      __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.writeFile(path, data, 'utf8', function (err) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nvar DB = function () {\n  var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2) {\n    var path = _ref2.path;\n    var key = _ref2.key;\n    var _ref2$readFile = _ref2.readFile;\n    var readFile = _ref2$readFile === undefined ? readLocal : _ref2$readFile;\n    var _ref2$writeFile = _ref2.writeFile;\n    var writeFile = _ref2$writeFile === undefined ? writeLocal : _ref2$writeFile;\n    var cryptr, dbPath, db;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cryptr = new __WEBPACK_IMPORTED_MODULE_0_cryptr___default.a(key || name);\n            dbPath = path || './data/' + name + '.json';\n            _context.next = 4;\n            return new __WEBPACK_IMPORTED_MODULE_1_lowdb___default.a(dbPath, {\n              storage: {\n                read: read(readFile),\n                write: write(writeFile)\n              },\n              format: {\n                deserialize: deserialize(cryptr),\n                serialize: serialize(cryptr)\n              }\n            });\n\n          case 4:\n            db = _context.sent;\n\n\n            db._.mixin(__WEBPACK_IMPORTED_MODULE_3_underscore_db___default.a);\n            return _context.abrupt('return', db);\n\n          case 7:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function DB(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return EventPlugin; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar EventPlugin = function (_Plugin) {\n  _inherits(EventPlugin, _Plugin);\n\n  function EventPlugin() {\n    _classCallCheck(this, EventPlugin);\n\n    return _possibleConstructorReturn(this, (EventPlugin.__proto__ || Object.getPrototypeOf(EventPlugin)).apply(this, arguments));\n  }\n\n  return EventPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return HTTPPlugin; });function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar HTTPPlugin = function (_Plugin) {\n  _inherits(HTTPPlugin, _Plugin);\n\n  function HTTPPlugin() {\n    _classCallCheck(this, HTTPPlugin);\n\n    return _possibleConstructorReturn(this, (HTTPPlugin.__proto__ || Object.getPrototypeOf(HTTPPlugin)).apply(this, arguments));\n  }\n\n  return HTTPPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Greetings; });var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _desc, _value, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar GREETINGS = ['hi', 'hello', 'sup', 'greetings', 'yo', 'hey'];\n\nvar FAREWELLS = ['goodbye', 'farwell', 'bye', 'later', 'see ya', 'cya'];\n\nvar GREETINGS_REGEX = void 0;\nvar getGreetingsRegex = function getGreetingsRegex(bot) {\n  if (GREETINGS_REGEX) {\n    return GREETINGS_REGEX;\n  }\n\n  GREETINGS_REGEX = new RegExp('^(?:' + GREETINGS.join('|') + ')[\\\\s,:]*(?:@?' + bot.name + ')?[!\\\\.]*$', 'i');\n\n  return GREETINGS_REGEX;\n};\n\nvar FAREWELLS_REGEX = void 0;\nvar getFarewellsRegex = function getFarewellsRegex(bot) {\n  if (FAREWELLS_REGEX) {\n    return FAREWELLS_REGEX;\n  }\n\n  FAREWELLS_REGEX = new RegExp('^(?:' + FAREWELLS.join('|') + ')[\\\\s,:]*(?:@?' + bot.name + ')?[!\\\\.]*$', 'i');\n\n  return FAREWELLS_REGEX;\n};\n\nvar shouldGreet = function shouldGreet(m, bot) {\n  return getGreetingsRegex(bot).exec(m.text);\n};\nvar shouldFarewell = function shouldFarewell(m, bot) {\n  return getFarewellsRegex(bot).exec(m.text);\n};\n\nvar Greetings = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('Greets you back when you greet the channel.'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('greetings'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"c\" /* listen */])(shouldGreet), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(shouldGreet), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('Says goodbye when you do.'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('greetings'), _dec7 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"c\" /* listen */])(shouldFarewell), _dec8 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(shouldFarewell), (_class = function (_ChatPlugin) {\n  _inherits(Greetings, _ChatPlugin);\n\n  function Greetings() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Greetings);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Greetings.__proto__ || Object.getPrototypeOf(Greetings)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'greeting', _this.propTypes = {}, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Greetings, [{\n    key: 'greeting',\n    value: function greeting(_, message) {\n      var randomGreeting = GREETINGS[parseInt(Math.random() * GREETINGS.length)];\n      return randomGreeting + ', ' + message.user.name + '!';\n    }\n  }, {\n    key: 'farewell',\n    value: function farewell(_, message) {\n      var randomFarewell = FAREWELLS[parseInt(Math.random() * FAREWELLS.length)];\n      return randomFarewell + ', ' + message.user.name + '!';\n    }\n  }]);\n\n  return Greetings;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* ChatPlugin */]), (_applyDecoratedDescriptor(_class.prototype, 'greeting', [_dec, _dec2, _dec3, _dec4], Object.getOwnPropertyDescriptor(_class.prototype, 'greeting'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'farewell', [_dec5, _dec6, _dec7, _dec8], Object.getOwnPropertyDescriptor(_class.prototype, 'farewell'), _class.prototype)), _class));\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Help; });var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _desc, _value, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar Help = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/help explains commands.'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('help'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^help$/i), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/help <search> finds information about a specific command.'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('help'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^help (\\w+)$/i), (_class = function (_ChatPlugin) {\n  _inherits(Help, _ChatPlugin);\n\n  function Help() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Help);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Help.__proto__ || Object.getPrototypeOf(Help)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'help', _this.propTypes = {}, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Help, [{\n    key: 'pluginHelp',\n    value: function pluginHelp() {\n      return this.bot.plugins.filter(function (p) {\n        return p.help && p.help.length > 0;\n      }).map(function (p) {\n        return p.helpText().join('\\n');\n      }, []).join('\\n');\n    }\n  }, {\n    key: 'pluginHelpSearch',\n    value: function pluginHelpSearch(_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2);\n\n      var search = _ref3[1];\n\n      return this.bot.plugins.filter(function (p) {\n        return p.help && p.help.length > 0;\n      }).map(function (p) {\n        return p.helpText().filter(function (t) {\n          return t.toLowerCase().indexOf(search.toLowerCase()) > -1;\n        }).join('\\n');\n      }, []).join('\\n');\n    }\n  }]);\n\n  return Help;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* ChatPlugin */]), (_applyDecoratedDescriptor(_class.prototype, 'pluginHelp', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'pluginHelp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'pluginHelpSearch', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'pluginHelpSearch'), _class.prototype)), _class));\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__exobot__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_node_uuid__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_node_uuid__);\n\n/* harmony export */ __webpack_require__.d(exports, \"a\", function() { return Permissions; });var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _dec22, _dec23, _dec24, _dec25, _dec26, _dec27, _desc, _value, _class, _class2, _temp2;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\n\n\n\nvar Permissions = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions authorize admin <password> to authorize yourself as an admin'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('public'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions authorize admin (.+)$/i), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions add role <role> to <user> to add a role to a user'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions add role (\\w+) to (.+)$/i), _dec7 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view user <user> to view roles given to a user'), _dec8 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec9 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions view user (.+)$/i), _dec10 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view effective user <user> to view all roles assigned to <user>'), _dec11 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec12 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions view effective user (.+)$/i), _dec13 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions remove role <role> from <user> to remove a role from a user'), _dec14 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec15 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions remove role (\\w+) from (.+)$/i), _dec16 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions add role <permissiongroup> <role> to allow access to a permissionGroup'), _dec17 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec18 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions add role (\\S+) (\\w+)$/i), _dec19 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions remove group <permissionGroup> <role> to allow access to a permissionGroup'), _dec20 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec21 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions remove role (\\S+) (\\w+)$/i), _dec22 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view group <permissionGroup> to view roles with access to ' + 'commands under that permissionGroup'), _dec23 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec24 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^permissions view group (\\S+)$/i), _dec25 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/login to recieve a token to claim your users across chat adapters, ' + '/login <userIdString> <userToken> to login on another adapter'), _dec26 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('public'), _dec27 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* respond */])(/^login\\s*(\\S+)?\\s*(\\S+)?$/i), (_class = (_temp2 = _class2 = function (_ChatPlugin) {\n  _inherits(Permissions, _ChatPlugin);\n\n  function Permissions() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Permissions);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Permissions.__proto__ || Object.getPrototypeOf(Permissions)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'permissions', _this.defaultDatabase = { permissions: {} }, _this.propTypes = {\n      adminPassword: __WEBPACK_IMPORTED_MODULE_1__exobot__[\"PropTypes\"].string.isRequired\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Permissions, [{\n    key: 'admin',\n    value: function () {\n      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref3, message) {\n        var _ref4 = _slicedToArray(_ref3, 2);\n\n        var adminPassword = _ref4[1];\n        var id;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                if (!(this.options.adminPassword && adminPassword === this.options.adminPassword)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                id = Permissions.nameToId(message.user.id);\n\n                this.bot.addRole(id, 'admin');\n                return _context.abrupt('return', 'User authorized as admin.');\n\n              case 6:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function admin(_x, _x2) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return admin;\n    }()\n  }, {\n    key: 'addRoleToUser',\n    value: function () {\n      var _ref5 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref6, message) {\n        var _ref7 = _slicedToArray(_ref6, 3);\n\n        var match = _ref7[0];\n        var role = _ref7[1];\n        var name = _ref7[2];\n        var userIdDirty, userId;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context2.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                userIdDirty = void 0;\n                _context2.prev = 4;\n                _context2.next = 7;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 7:\n                userIdDirty = _context2.sent;\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2['catch'](4);\n\n                this.bot.log.warn(_context2.t0);\n\n              case 13:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                this.bot.addRole(userId, role);\n                return _context2.abrupt('return', name + ' added to role ' + role + '.');\n\n              case 17:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 10]]);\n      }));\n\n      function addRoleToUser(_x3, _x4) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return addRoleToUser;\n    }()\n  }, {\n    key: 'viewUser',\n    value: function () {\n      var _ref8 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref9, message) {\n        var _ref10 = _slicedToArray(_ref9, 2);\n\n        var match = _ref10[0];\n        var name = _ref10[1];\n        var userIdDirty, userId, perms;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                userIdDirty = void 0;\n                _context3.prev = 3;\n                _context3.next = 6;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 6:\n                userIdDirty = _context3.sent;\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3['catch'](3);\n\n                this.bot.log.warn(_context3.t0);\n\n              case 12:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                perms = this.bot.getRoles(userId);\n                return _context3.abrupt('return', perms.join(', '));\n\n              case 16:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 9]]);\n      }));\n\n      function viewUser(_x5, _x6) {\n        return _ref8.apply(this, arguments);\n      }\n\n      return viewUser;\n    }()\n  }, {\n    key: 'viewEffectiveUser',\n    value: function () {\n      var _ref11 = _asyncToGenerator(regeneratorRuntime.mark(function _callee4(_ref12, message) {\n        var _ref13 = _slicedToArray(_ref12, 2);\n\n        var match = _ref13[0];\n        var name = _ref13[1];\n        var userIdDirty, userId, perms;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                userIdDirty = void 0;\n                _context4.prev = 3;\n                _context4.next = 6;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 6:\n                userIdDirty = _context4.sent;\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4['catch'](3);\n\n                this.bot.log.warn(_context4.t0);\n\n              case 12:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                perms = this.bot.getUserRoles(userId);\n                return _context4.abrupt('return', perms.join(', '));\n\n              case 16:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[3, 9]]);\n      }));\n\n      function viewEffectiveUser(_x7, _x8) {\n        return _ref11.apply(this, arguments);\n      }\n\n      return viewEffectiveUser;\n    }()\n  }, {\n    key: 'removeRoleFromUser',\n    value: function () {\n      var _ref14 = _asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref15, message) {\n        var _ref16 = _slicedToArray(_ref15, 3);\n\n        var match = _ref16[0];\n        var role = _ref16[1];\n        var name = _ref16[2];\n        var userIdDirty, userId;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context5.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                userIdDirty = void 0;\n                _context5.prev = 4;\n                _context5.next = 7;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 7:\n                userIdDirty = _context5.sent;\n                _context5.next = 13;\n                break;\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5['catch'](4);\n\n                this.bot.log.warn(_context5.t0);\n\n              case 13:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context5.next = 17;\n                  break;\n                }\n\n                this.bot.removeRole(userId, role);\n                return _context5.abrupt('return', name + ' removed from role ' + role + '.');\n\n              case 17:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[4, 10]]);\n      }));\n\n      function removeRoleFromUser(_x9, _x10) {\n        return _ref14.apply(this, arguments);\n      }\n\n      return removeRoleFromUser;\n    }()\n  }, {\n    key: 'addRoleToGroup',\n    value: function () {\n      var _ref17 = _asyncToGenerator(regeneratorRuntime.mark(function _callee6(_ref18 /*, message*/) {\n        var _ref19 = _slicedToArray(_ref18, 3);\n\n        var permissionGroup = _ref19[1];\n        var role = _ref19[2];\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context6.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n\n                this.bot.db.set('permissions.groups.' + permissionGroup + '.' + role, true).value();\n                this.bot.db.write();\n                return _context6.abrupt('return', 'role \"' + role + '\" given permission to commands under group \"' + permissionGroup + '\".');\n\n              case 6:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function addRoleToGroup(_x11) {\n        return _ref17.apply(this, arguments);\n      }\n\n      return addRoleToGroup;\n    }()\n  }, {\n    key: 'removeRoleFromGroup',\n    value: function () {\n      var _ref20 = _asyncToGenerator(regeneratorRuntime.mark(function _callee7(_ref21 /*, message*/) {\n        var _ref22 = _slicedToArray(_ref21, 3);\n\n        var permissionGroup = _ref22[1];\n        var role = _ref22[2];\n        var group;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context7.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                group = this.bot.db.get('permissions.groups.' + permissionGroup).value();\n\n                delete group[role];\n                this.bot.db.set('permissions.groups.' + permissionGroup, group).value();\n                this.bot.db.write();\n                return _context7.abrupt('return', 'role \"' + role + '\" removed permission to commands under group \"' + permissionGroup + '\".');\n\n              case 8:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function removeRoleFromGroup(_x12) {\n        return _ref20.apply(this, arguments);\n      }\n\n      return removeRoleFromGroup;\n    }()\n  }, {\n    key: 'viewGroup',\n    value: function () {\n      var _ref23 = _asyncToGenerator(regeneratorRuntime.mark(function _callee8(_ref24 /*, message*/) {\n        var _ref25 = _slicedToArray(_ref24, 2);\n\n        var group = _ref25[1];\n        var perms;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                perms = Object.keys(this.bot.db.get('permissions.groups.' + group).value());\n                return _context8.abrupt('return', perms.join(', '));\n\n              case 4:\n              case 'end':\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function viewGroup(_x13) {\n        return _ref23.apply(this, arguments);\n      }\n\n      return viewGroup;\n    }()\n  }, {\n    key: 'multipleAdapterLogin',\n    value: function () {\n      var _ref26 = _asyncToGenerator(regeneratorRuntime.mark(function _callee9(_ref27, message) {\n        var _ref28 = _slicedToArray(_ref27, 3);\n\n        var userId = _ref28[1];\n        var token = _ref28[2];\n        var user;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                if (!(userId && token)) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                user = this.bot.users.botUsers[userId];\n\n                if (!(user && user.id !== message.user.id)) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                if (!(user.token === token)) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                user.token = undefined;\n                return _context9.abrupt('return', this.bot.mergeUsers(user, message.user));\n\n              case 8:\n                return _context9.abrupt('return', 'Wrong userId or token specified');\n\n              case 9:\n                token = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_node_uuid__[\"v4\"])();\n                message.user.token = token;\n                return _context9.abrupt('return', 'Please whisper this to the bot on the other adapter \\n' + ('login ' + message.user.id + ' ' + token));\n\n              case 12:\n              case 'end':\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function multipleAdapterLogin(_x14, _x15) {\n        return _ref26.apply(this, arguments);\n      }\n\n      return multipleAdapterLogin;\n    }()\n  }]);\n\n  return Permissions;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* ChatPlugin */]), _class2.nameToId = function (name) {\n  if (name) {\n    return name.replace(/[^\\w-]/g, '').toLowerCase();\n  }\n  return;\n}, _temp2), (_applyDecoratedDescriptor(_class.prototype, 'admin', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'admin'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'addRoleToUser', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'addRoleToUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewUser', [_dec7, _dec8, _dec9], Object.getOwnPropertyDescriptor(_class.prototype, 'viewUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewEffectiveUser', [_dec10, _dec11, _dec12], Object.getOwnPropertyDescriptor(_class.prototype, 'viewEffectiveUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'removeRoleFromUser', [_dec13, _dec14, _dec15], Object.getOwnPropertyDescriptor(_class.prototype, 'removeRoleFromUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'addRoleToGroup', [_dec16, _dec17, _dec18], Object.getOwnPropertyDescriptor(_class.prototype, 'addRoleToGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'removeRoleFromGroup', [_dec19, _dec20, _dec21], Object.getOwnPropertyDescriptor(_class.prototype, 'removeRoleFromGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewGroup', [_dec22, _dec23, _dec24], Object.getOwnPropertyDescriptor(_class.prototype, 'viewGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'multipleAdapterLogin', [_dec25, _dec26, _dec27], Object.getOwnPropertyDescriptor(_class.prototype, 'multipleAdapterLogin'), _class.prototype)), _class));\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"cryptr\");\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"fs-extra\");\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lowdb\");\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"readline\");\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"underscore-db\");\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eventemitter3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_log__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_log___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_log__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_superagent__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_superagent___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_superagent__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash_array__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash_array___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash_array__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_proptypes__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_proptypes___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_proptypes__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugins_plugins__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__db__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__adapters__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__messages__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__plugins__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__user__ = __webpack_require__(7);\n\n/* harmony export */ __webpack_require__.d(exports, \"PropTypes\", function() { return PropTypes; });\n/* harmony export */ __webpack_require__.d(exports, \"Exobot\", function() { return Exobot; });\n/* harmony export */ __webpack_require__.d(exports, \"LogLevels\", function() { return LogLevels; });/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_9__adapters__) if([\"PropTypes\",\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_9__adapters__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_10__messages__) if([\"PropTypes\",\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_10__messages__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_11__plugins__) if([\"PropTypes\",\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony namespace reexport */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_8__db__) if([\"PropTypes\",\"Exobot\",\"User\",\"LogLevels\",\"default\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(exports, key, function() { return __WEBPACK_IMPORTED_MODULE_8__db__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony reexport */ if(__webpack_require__.o(__WEBPACK_IMPORTED_MODULE_12__user__, \"a\")) __webpack_require__.d(exports, \"User\", function() { return __WEBPACK_IMPORTED_MODULE_12__user__[\"a\"]; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp, _initialiseProps;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\nvar PropTypes = __WEBPACK_IMPORTED_MODULE_6_proptypes___default.a;\n\n__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default.a.Promise = Promise;\n\n\n\nvar http = __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default.a.patch(__WEBPACK_IMPORTED_MODULE_2_superagent___default.a);\nvar USERS_DB = 'exobot-users';\n\n\n\nvar Exobot = (_temp = _class = function () {\n  function Exobot(name) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, Exobot);\n\n    _initialiseProps.call(this);\n\n    this.name = name;\n    this.alias = options.alias;\n    this.emitter = new __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default.a();\n    this.http = http;\n    this.requirePermissions = options.requirePermissions;\n\n    this.initLog(options.logLevel || __WEBPACK_IMPORTED_MODULE_1_log___default.a.WARNING);\n\n    process.on('unhandledRejection', this.log.critical.bind(this.log));\n\n    var dbPath = options.dbPath || './data/' + name + '.json';\n    this.initDB(options.key, dbPath, options.readFile, options.writeFile);\n    this.initUsers();\n\n    this.initAdapters(options.adapters);\n    this.initPlugins(options.plugins);\n  }\n\n  _createClass(Exobot, [{\n    key: 'initUsers',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                this.users = this.db.get(USERS_DB).value();\n\n                if (!this.users) {\n                  _context.next = 6;\n                  break;\n                }\n\n                this.log.debug(Object.keys(this.users.botUsers).length, 'exobot users');\n                return _context.abrupt('return');\n\n              case 6:\n\n                this.db.set(USERS_DB, { botUsers: {} }).value();\n                this.users = this.db.get(USERS_DB).value();\n\n              case 8:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initUsers() {\n        return _ref.apply(this, arguments);\n      }\n\n      return initUsers;\n    }()\n  }, {\n    key: 'mergeUsers',\n    value: function mergeUsers(destUser, srcUser) {\n      var _this = this;\n\n      if (destUser && srcUser) {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__[\"merge\"])(destUser.roles, srcUser.roles);\n        Object.keys(srcUser.adapters).map(function (adapter) {\n          _this.users[adapter][srcUser.adapters[adapter].userId].botId = destUser.id;\n        });\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__[\"merge\"])(destUser.adapters, srcUser.adapters);\n        delete this.users.botUsers[srcUser.id];\n        this.db.write();\n        return 'Login complete';\n      }\n    }\n  }, {\n    key: 'addRole',\n    value: function addRole(userId, roleName) {\n      this.users.botUsers[userId].roles[roleName] = true;\n      this.db.write();\n    }\n  }, {\n    key: 'getRoles',\n    value: function getRoles(userId) {\n      return Object.keys(this.users.botUsers[userId].roles);\n    }\n  }, {\n    key: 'removeRole',\n    value: function removeRole(userId, roleName) {\n      var roles = this.users.botUsers[userId].roles;\n      delete roles[roleName];\n      this.db.write();\n    }\n  }, {\n    key: 'getUserRoles',\n    value: function getUserRoles(userId) {\n      var _this2 = this;\n\n      var user = this.users.botUsers[userId];\n      var roles = [];\n\n      if (user) {\n        Object.keys(user.adapters).map(function (adapter) {\n          var adapterRoles = _this2.adapters[adapter].getRolesForUser(user.adapters[adapter].userId);\n          if (adapterRoles) {\n            roles = roles.concat(adapterRoles);\n          }\n        });\n        roles = roles.concat(Object.keys(user.roles));\n        return roles;\n      }\n    }\n  }, {\n    key: 'checkPermissions',\n    value: function () {\n      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(userId, commandPermissionGroup) {\n        var roles, groups;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.usePermissions) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 2:\n                if (!(commandPermissionGroup === 'permissions.public')) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 4:\n                _context2.next = 6;\n                return this.databaseInitialized();\n\n              case 6:\n\n                // get user's roles\n                roles = this.getUserRoles(userId);\n                // if user has `admin` role, allow it\n\n                if (!(roles && roles.includes('admin'))) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 9:\n\n                // get roles assigned to the command group\n                groups = this.db.get('permissions.groups.' + commandPermissionGroup).value();\n                // if there are no groups, and requirePermissions is false, allow it\n                // requirePermissions = false == (public by default)\n\n                if (!(!groups || !Object.keys(groups))) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                if (this.requirePermissions) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 13:\n                return _context2.abrupt('return', false);\n\n              case 14:\n                if (!groups.public) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 16:\n                if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_lodash_array__[\"intersection\"])(roles, Object.keys(groups)).length) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 18:\n                return _context2.abrupt('return', false);\n\n              case 19:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function checkPermissions(_x2, _x3) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: 'databaseInitialized',\n    value: function () {\n      var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3() {\n        var _this3 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.db) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                return _context3.abrupt('return', true);\n\n              case 2:\n                return _context3.abrupt('return', new Promise(function (resolve) {\n                  _this3.emitter.on('dbLoaded', resolve);\n                }));\n\n              case 3:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function databaseInitialized() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return databaseInitialized;\n    }()\n  }, {\n    key: 'addPlugin',\n    value: function addPlugin(plugin) {\n      plugin.register(this);\n      this.plugins.push(plugin);\n    }\n  }, {\n    key: 'addAdapter',\n    value: function addAdapter(adapter) {\n      var name = adapter.name;\n\n      if (this.getAdapterByName(name)) {\n        this.log.warning('Multiple \"' + name + '\" adapters were initialized.');\n      }\n\n      adapter.register(this);\n      this.adapters[adapter.name] = adapter;\n    }\n  }, {\n    key: 'prependNameForWhisper',\n    value: function prependNameForWhisper(text) {\n      if (text.slice(0, this.name.length).toLowerCase() !== this.name.toLowerCase() && text.slice(0, this.alias.length).toLowerCase() !== this.alias.toLowerCase()) {\n        text = this.name + ' ' + text;\n      }\n\n      return text;\n    }\n  }, {\n    key: 'send',\n    value: function send(message) {\n      if (!message.text) {\n        return;\n      }\n      var adapter = this.getAdapterByMessage(message);\n\n      if (!adapter) {\n        this.log.warning('Message sent with invalid adapter: ' + message.adapter);\n        return;\n      }\n\n      adapter.send(message);\n    }\n  }, {\n    key: 'getAdapterByMessage',\n    value: function getAdapterByMessage(message) {\n      return this.adapters[message.adapter];\n    }\n  }, {\n    key: 'getAdapterByName',\n    value: function getAdapterByName(name) {\n      var _this4 = this;\n\n      return Object.keys(this.adapters).map(function (id) {\n        return _this4.adapters[id];\n      }).find(function (a) {\n        return a.name.toLowerCase() === name.toLowerCase();\n      });\n    }\n  }]);\n\n  return Exobot;\n}(), _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.plugins = [];\n  this.adapters = {};\n\n  this.initAdapters = function () {\n    var adapters = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    adapters.forEach(function (a) {\n      return _this5.addAdapter(a);\n    });\n  };\n\n  this.initPlugins = function () {\n    var plugins = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    plugins.forEach(function (p) {\n      _this5.addPlugin(p);\n\n      // if the Permissions plugin isn't initialized, we can optimize later on\n      // by not waiting for DB initialization and permissions checking.\n      if (p instanceof __WEBPACK_IMPORTED_MODULE_7__plugins_plugins__[\"Permissions\"]) {\n        _this5.usePermissions = true;\n      }\n    });\n  };\n\n  this.initLog = function (logLevel) {\n    var log = new __WEBPACK_IMPORTED_MODULE_1_log___default.a(logLevel || __WEBPACK_IMPORTED_MODULE_1_log___default.a.WARNING);\n    _this5.log = log;\n    _this5.logLevel = logLevel;\n\n    if (logLevel === __WEBPACK_IMPORTED_MODULE_1_log___default.a.DEBUG) {\n      setInterval(_this5.logProcess, 10000);\n    }\n  };\n\n  this.initDB = function (key, dbPath, readFile, writeFile) {\n    if (!key) {\n      _this5.log.critical('Pass options.key in to bot initializer. Database not initializing.');\n      return;\n    }\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8__db__[\"DB\"])({\n      key: key,\n      readFile: readFile,\n      writeFile: writeFile,\n      path: dbPath,\n      emitter: _this5.emitter\n    }).then(function (db) {\n      _this5.db = db;\n      _this5.emitter.emit('dbLoaded', db);\n    }, _this5.log.critical.bind(_this5.log));\n  };\n\n  this.logProcess = function () {\n    _this5.log.debug(process.memoryUsage(), process.cpuUsage());\n  };\n}, _temp);\n\n\n\n\n\n\nvar LogLevels = __WEBPACK_IMPORTED_MODULE_1_log___default.a;\n\n/***/ },\n/* 33 */,\n/* 34 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"proptypes\");\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// exobot.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8e0d44de64670686b4bd","import Plugin from './plugin';\nimport TextMessage from '../messages/text';\n\n\nconst DEFAULT_REGEXP = /.+/;\n\nexport class ChatPlugin extends Plugin {\n  regexp = DEFAULT_REGEXP;\n\n  respondFunctions = [];\n  listenFunctions = [];\n  help = [];\n\n  constructor () {\n    super(...arguments);\n  }\n\n  helpText () {\n    return this.help.map(n => `[${this[n].permissionGroup}] ${this[n].help}`);\n  }\n\n  register (bot) {\n    super.register(bot);\n    this.bot = bot;\n    this.botNameRegex = new RegExp(`^(?:(?:@?${bot.name}|${bot.alias})[,\\\\s:.-]*)(.+)`, 'i');\n\n    if (this.postConstructor) {\n      this.postConstructor.forEach(([fn, args]) => fn.call(this, ...args));\n    }\n\n    bot.emitter.on('receive-message', m => {\n      // v = [\n      //   validation function or regex,\n      //   the response function from the plugin,\n      //   the name of the function (the class.property name)\n      // ];\n      // as pushed by the listen/respond functions below\n\n      // strip out the bot name from the beginning before processing\n      const text = this.stripLeadingBotName(m.text);\n\n      let skipFns = [];\n\n      // If it had the bot name at the beginning, process the respond functions\n      if (text) {\n        // create a new message with the stripped text and pass it in\n        const message = new TextMessage({ ...m, text });\n        this.respondFunctions.forEach(v => this.process(...v, message));\n        skipFns = this.respondFunctions.map(([,,name]) => name);\n      }\n\n      this.listenFunctions\n            .filter(([,,name]) => !skipFns.includes(name))\n            .forEach(v => this.process(...v, m));\n    });\n  }\n\n  async process (validation, response, fnName, message) {\n    try {\n      const fn = validation.exec ? this.validateMessage(validation) : validation;\n      const res = fn(message, this.bot);\n\n      if (res) {\n        if (await this.checkPermissions(message.user.id, this[fnName].permissionGroup)) {\n          const text = response.call(this, res, message);\n          if (!text) { return; }\n\n          if (text instanceof Promise) {\n            const t = await text;\n            const newMessage = new TextMessage({ ...message, text: t });\n            return this.bot.send(newMessage);\n          }\n\n          const newMessage = new TextMessage({ ...message, text });\n          this.bot.send(newMessage);\n        }\n      }\n    } catch (e) {\n      this.bot.log.warning(e);\n    }\n  }\n\n  async checkPermissions (userId, commandPermissionGroup) {\n    return this.bot.checkPermissions(userId, commandPermissionGroup);\n  }\n\n  stripLeadingBotName (text) {\n    const exec = this.botNameRegex.exec(text);\n    if (!exec) { return; }\n\n    return exec[1];\n  }\n\n  respond (validation, fn, name) {\n    this.respondFunctions.push([validation, fn, name]);\n  }\n\n  listen (validation, fn, name) {\n    this.listenFunctions.push([validation, fn, name]);\n  }\n\n  setHelp (text, fnName) {\n    this.help.push(fnName);\n    this[fnName].help = text;\n  }\n\n  setPermissionGroup (fn, name) {\n    this[fn].permissionGroup = `${this.name}.${name}`;\n  }\n\n  validateMessage (regex) {\n    return message => regex.exec(message.text);\n  }\n}\n\nexport const listen = (validation) => (target, name, descriptor) => {\n  const fn = descriptor.value;\n\n  if (!fn.permissionGroup) {\n    fn.permissionGoup = `${target.name}.${name}`;\n  }\n\n  target.postConstructor = target.postConstructor || [];\n  target.postConstructor.push(\n    [target.listen, [validation, fn, name]]\n  );\n};\n\nexport const respond = (validation) => (target, name, descriptor) => {\n  const fn = descriptor.value;\n\n  if (!fn.permissionGroup) {\n    fn.permissionGoup = `${target.name}.${name}`;\n  }\n\n  target.postConstructor = target.postConstructor || [];\n  target.postConstructor.push(\n    [target.respond, [validation, fn, name]]\n  );\n};\n\nexport const help = (text) => (target, fnName) => {\n  target.postConstructor.push(\n    [target.setHelp, [text, fnName]]\n  );\n};\n\nexport const permissionGroup = (name) => (target, fnName) => {\n  target.postConstructor.push([target.setPermissionGroup, [fnName, name] ]);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/chat.js","const KEY_REGEX = /([a-z][A-Z])/g;\n\nexport default class Plugin {\n  help = undefined;\n  _requiresDatabase = false;\n  propTypes = null;\n  defaultProps = {};\n\n  constructor (options={}) {\n    this.options = options;\n  }\n\n  register (bot) {\n    this.bot = bot;\n\n    this.options = this.parseConfig({ ...this.defaultProps, ...this.options });\n\n    if (this.propTypes && Object.keys(this.propTypes).length) {\n      this.checkConfig(this.options, this.propTypes, bot);\n    }\n\n    if (!bot) { throw new Error('No bot passed to register; fatal.'); }\n\n    if (!this.name) {\n      throw new Error('This plugin has a missing `name` property.');\n    }\n\n    if (!this.propTypes) {\n      bot.log.notice(`Plugin \"${this.name}\" does not define propTypes; it should.`);\n    }\n\n    this.database();\n  }\n\n  listen () {\n    if (!this.bot) {\n      throw new Error('No bot to listen on; fatal.');\n    }\n  }\n\n  parseConfig (options={}) {\n    const optionKeys = Object.keys(options);\n\n    const config = {\n      ...options,\n      ...(\n          Object.keys(this.propTypes || {})\n            .filter(k => !optionKeys.includes(k))\n            .reduce((c, k) => {\n              const env = process.env[this.envify(k)];\n\n              if (env) {\n                c[k] = env;\n              }\n\n              return c;\n            }, {})\n      ),\n    };\n\n    return config;\n  }\n\n  checkConfig (config={}, propTypes={}, bot) {\n    return Object.keys(propTypes).reduce((pass, k) => {\n      if (!propTypes[k]) {\n        bot.log.warning(`Unrecognized prop ${k} passed into options of ${this.name} plugin`);\n        return false;\n      }\n\n      const err = propTypes[k](config, k, `${this.name} config`, 'property');\n\n      if (err) {\n        bot.log.warning(err.toString());\n        return false;\n      }\n\n      return pass;\n    }, true);\n  }\n\n  // turn a key like myKey into PLUGINNAME_MY_KEY\n  envify (key='') {\n    return [\n      this.name,\n      key.replace(KEY_REGEX, l => l.split('').join('_')),\n    ].join('_').toUpperCase();\n  }\n\n  async database () {\n    if (this.defaultDatabase) {\n      await this.databaseInitialized();\n\n      Object.keys(this.defaultDatabase).forEach(name => {\n        const val = this.bot.db.get(name).value();\n\n        if (typeof val === 'undefined') {\n          this.bot.db.set(name, this.defaultDatabase[name]).value();\n        }\n      });\n    }\n  }\n\n  async databaseInitialized () {\n    this._requiresDatabase = true;\n\n    if (this._requiresDatabase && this.bot.db) {\n      return true;\n    }\n\n    return new Promise((resolve) => {\n      this.bot.emitter.on('dbLoaded', resolve);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugin.js","import { v4 as uuid } from 'node-uuid';\n\nexport default class Message {\n  constructor ({ user, channel, adapter, id=uuid() }) {\n    this.user = user;\n    this.channel = channel;\n    this.adapter = adapter;\n    this.id = id;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/message.js","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 5\n// module chunks = 0","import { v4 as uuid } from 'node-uuid';\n\nexport default class User {\n  constructor (name, id, adapter) {\n    this.name = name;\n    this.id = id || uuid();\n    this.roles = {};\n    this.adapters = adapter || {};\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/user.js","import TextMessage from '../messages/text';\nimport PresenceMessage from '../messages/presence';\nimport User from '../user';\nexport default class Adapter {\n  static STATUS = {\n    UNINITIALIZED: 0,\n    CONNECTING: 1,\n    CONNECTED: 2,\n    DISCONNECTED: 3,\n    RECONNECTING: 4,\n    ERROR: 5,\n  }\n\n  constructor (options={}) {\n    this.options = options;\n    this.status = Adapter.STATUS.UNINITIALIZED;\n    this.roleMapping = options.roleMapping;\n  }\n\n  register (bot) {\n    if (!bot) { throw new Error('No bot passed to register; fatal.'); }\n    if (!this.name) {\n      throw new Error('This adapter has no `name` property; some plugins will not work.');\n    }\n\n    this.bot = bot;\n    this.initUsers();\n    this.status = Adapter.STATUS.CONNECTING;\n    this.listen();\n\n  }\n\n  listen () {\n    if (!this.bot) { throw new Error('No bot to listen on; fatal.'); }\n  }\n\n  receive ({ user, text, channel, whisper }) {\n    if (!text) {\n      this.bot.log.info('Message received with undefined text.');\n      return;\n    }\n\n    const message = new TextMessage({ user, text, channel, whisper, adapter: this.name });\n    this.bot.emitter.emit('receive-message', message);\n  }\n\n  receiveWhisper ({ user, text, channel }) {\n    if (!text) {\n      this.bot.log.warning('Message received with undefined text.');\n      return;\n    }\n\n    text = this.bot.prependNameForWhisper(text);\n    this.receive({ user, text, channel, whisper: true });\n  }\n\n  enter ({ user, channel }) {\n    const message = new PresenceMessage({\n      user,\n      channel,\n      adapter: this.name,\n      type: PresenceMessage.TYPES.ENTER,\n    });\n\n    this.bot.emitter.emit('enter', message);\n  }\n\n  leave ({ user, channel }) {\n    const message = new PresenceMessage({\n      user,\n      channel,\n      adapter: this.name,\n      type: PresenceMessage.TYPES.LEAVE,\n    });\n\n    this.bot.emitter.emit('leave', message);\n  }\n\n  send (message) {\n    console.log(message.text);\n  }\n\n  ping () {\n    this.pong();\n  }\n\n  pong () {\n    this.bot.log.warning('Ping received, this.pong() not implemented.');\n  }\n\n  getUserIdByUserName (name) {\n    this.bot.log.warning('getUserIdByUserName not implemented by this adapter.');\n    return name;\n  }\n\n  getRoleIdByRoleName (name) {\n    this.bot.log.warning('getRoleIdByRoleName not implemented by this adapter');\n    return name;\n  }\n\n  getRolesForUser () {\n    return [];\n  }\n\n  async initUsers() {\n    await this.bot.databaseInitialized();\n    this.adapterUsers = this.bot.users[this.name];\n    if (this.adapterUsers) {\n      return;\n    }\n\n    this.bot.users[this.name] = {};\n    this.adapterUsers = this.bot.users[this.name];\n    this.bot.db.write();\n  }\n\n  getRoles() {\n    this.bot.log.warning('getRoles not implemented by this adapter');\n    return false;\n  }\n\n  async getUser(adapterUserId, adapterUsername, adapterUser = {}) {\n    await this.bot.databaseInitialized();\n    if (!adapterUserId) {\n      this.bot.error(`Adapter ${this.name} called getUser without adapterUserId`);\n    }\n    if (!adapterUsername) {\n      this.bot.warning(`Adapter ${this.name} called getUser without adapterUsername`);\n    }\n\n    const roles = this.getRoles(adapterUserId, adapterUser);\n    if (this.adapterUsers) {\n      if (this.adapterUsers[adapterUserId]) {\n        if (roles) {\n          console.log('1');\n          this.adapterUsers[adapterUserId].roles = roles;\n        }\n\n        if (adapterUsername) {\n          this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId].name = adapterUsername;\n        }\n\n        return this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId];\n      }\n\n      const user = new User(adapterUsername);\n      user.adapters = {[this.name]: {userId: adapterUserId}};\n      this.adapterUsers[adapterUserId] = {name: adapterUsername,\n                                          botId: user.id,\n                                          roles: roles || []};\n      this.bot.users.botUsers[user.id] = user;\n      this.bot.db.write();\n      return user;\n    }\n\n    return new User(adapterUsername,\n                    adapterUserId,\n                    {[this.name]: adapterUserId});\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapter.js","import Message from './message';\n\nexport default class PresenceMessage extends Message {\n  static TYPES = {\n    ENTER: 0,\n    LEAVE: 1,\n  }\n\n  constructor ({ type }) {\n    super(...arguments);\n    this.type = type;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/presence.js","import Message from './message';\n\nexport default class TextMessage extends Message {\n  constructor ({ text, whisper=false }) {\n    super(...arguments);\n\n    if (text) {\n      this.text = text.trim();\n    }\n\n    this.whisper = !!whisper;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/text.js","export { default as Adapter } from './adapter';\n\nimport * as a from './adapters';\nexport const adapters = a;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/index.js","export { default as Plugin } from './plugin';\nexport { default as EventPlugin } from './event';\nexport { default as HTTPPlugin } from './http';\n\nexport { ChatPlugin, respond, listen, help, permissionGroup } from './chat';\n\nimport * as p from './plugins';\nexport const plugins = p;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/index.js","module.exports = require(\"eventemitter3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter3\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"lodash/array\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/array\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"log\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"superagent\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"superagent-promise-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent-promise-plugin\"\n// module id = 18\n// module chunks = 0","import readline from 'readline';\n\nimport Adapter from '../adapter';\n\nconst SHELL = 'SHELL';\n\nconst EXIT_COMMANDS = [\n  'exit',\n  'quit',\n  'q',\n];\n\nexport default class ShellAdapter extends Adapter {\n  name = 'shell';\n\n  constructor () {\n    super();\n    this.rl = readline.createInterface({\n      input: process.stdin,\n      output: process.stdout,\n    });\n\n  }\n\n  async prompt () {\n    await this.bot.databaseInitialized();\n    this.user = await this.getUser('shell', 'shell');\n    this.rl.question('Chat: ', (answer) => {\n      if (EXIT_COMMANDS.includes(answer)) {\n        this.bot.db.write().then(() => process.exit());\n      }\n\n      super.receive({\n        text: answer,\n        channel: SHELL,\n        user: this.user,\n      });\n\n      this.prompt();\n    });\n  }\n\n  register (bot) {\n    super.register(bot);\n    this.prompt();\n    this.status = Adapter.STATUS.CONNECTED;\n\n  }\n\n  getUserIdByUserName () {\n    return this.user.id;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapters/shell.js","import Cryptr from 'cryptr';\nimport Low from 'lowdb';\nimport fs from 'fs-extra';\nimport underscoredb from 'underscore-db';\n\nexport const deserialize = cryptr => {\n  return str => {\n    if (!str) { return {}; }\n    const decrypted = cryptr.decrypt(str);\n    const obj = JSON.parse(decrypted);\n    return obj;\n  };\n};\n\nexport const serialize = cryptr => {\n  return obj => {\n    const str = JSON.stringify(obj);\n    const encrypted = cryptr.encrypt(str);\n    return encrypted;\n  };\n};\n\nexport const read = (readFile) => {\n  return (path, deserialize) => {\n    return new Promise((resolve, reject) => {\n      readFile(path).then(data => {\n        try {\n          resolve(deserialize(data));\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  };\n};\n\nexport const write = writeFile => {\n  return (path, obj, serialize) => {\n    return new Promise((resolve, reject) => {\n      try {\n        const data = serialize(obj);\n        writeFile(path, data).then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n};\n\nexport const readLocal = (path) => {\n  return new Promise((resolve, reject) => {\n    fs.ensureFile(path, (err) => {\n      if (err) { return reject(err); }\n      fs.readFile(path, 'utf8', (err, data) => {\n        if (err) { return reject(err); }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nexport const writeLocal = (path, data) => {\n  return new Promise((resolve, reject) => {\n    fs.ensureFile(path, (err) => {\n      if (err) { return reject(err); }\n      fs.writeFile(path, data, 'utf8', (err) => {\n        if (err) { return reject(err); }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nexport async function DB ({ path, key, readFile=readLocal, writeFile=writeLocal }) {\n  const cryptr = new Cryptr(key || name);\n  const dbPath = path || `./data/${name}.json`;\n\n  const db = await new Low(dbPath, {\n    storage: {\n      read: read(readFile),\n      write: write(writeFile),\n    },\n    format: {\n      deserialize: deserialize(cryptr),\n      serialize: serialize(cryptr),\n    },\n  });\n\n  db._.mixin(underscoredb);\n  return db;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/db.js","import Plugin from './plugin';\n\nexport default class EventPlugin extends Plugin {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/event.js","import Plugin from './plugin';\n\nexport default class HTTPPlugin extends Plugin {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/http.js","import { ChatPlugin, listen, respond, help, permissionGroup } from '../chat';\n\nconst GREETINGS = [\n  'hi',\n  'hello',\n  'sup',\n  'greetings',\n  'yo',\n  'hey',\n];\n\nconst FAREWELLS = [\n  'goodbye',\n  'farwell',\n  'bye',\n  'later',\n  'see ya',\n  'cya',\n];\n\nlet GREETINGS_REGEX;\nconst getGreetingsRegex = bot => {\n  if (GREETINGS_REGEX) { return GREETINGS_REGEX; }\n\n  GREETINGS_REGEX =\n    new RegExp(`^(?:${GREETINGS.join('|')})[\\\\s,:]*(?:@?${bot.name})?[!\\\\.]*$`, 'i');\n\n  return GREETINGS_REGEX;\n};\n\nlet FAREWELLS_REGEX;\nconst getFarewellsRegex = bot => {\n  if (FAREWELLS_REGEX) { return FAREWELLS_REGEX; }\n\n  FAREWELLS_REGEX =\n    new RegExp(`^(?:${FAREWELLS.join('|')})[\\\\s,:]*(?:@?${bot.name})?[!\\\\.]*$`, 'i');\n\n  return FAREWELLS_REGEX;\n};\n\nconst shouldGreet = (m, bot) => getGreetingsRegex(bot).exec(m.text);\nconst shouldFarewell = (m, bot) => getFarewellsRegex(bot).exec(m.text);\n\nexport class Greetings extends ChatPlugin {\n  name = 'greeting';\n  propTypes = {};\n\n  @help('Greets you back when you greet the channel.');\n  @permissionGroup('greetings');\n  @listen(shouldGreet)\n  @respond(shouldGreet)\n  greeting (_, message) {\n    const randomGreeting = GREETINGS[parseInt(Math.random() * GREETINGS.length)];\n    return `${randomGreeting}, ${message.user.name}!`;\n  }\n\n  @help('Says goodbye when you do.');\n  @permissionGroup('greetings');\n  @listen(shouldFarewell)\n  @respond(shouldFarewell)\n  farewell (_, message) {\n    const randomFarewell = FAREWELLS[parseInt(Math.random() * FAREWELLS.length)];\n    return `${randomFarewell}, ${message.user.name}!`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/greetings.js","import { ChatPlugin, respond, help, permissionGroup } from '../chat';\n\nexport class Help extends ChatPlugin {\n  name = 'help';\n  propTypes = {};\n\n  @help('/help explains commands.');\n  @permissionGroup('help');\n  @respond(/^help$/i);\n  pluginHelp () {\n    return this.bot.plugins\n                    .filter(p => p.help && p.help.length > 0)\n                    .map(p => p.helpText().join('\\n'), [])\n                    .join('\\n');\n  }\n\n  @help('/help <search> finds information about a specific command.');\n  @permissionGroup('help');\n  @respond(/^help (\\w+)$/i);\n  pluginHelpSearch ([, search]) {\n    return this.bot.plugins\n                    .filter(p => p.help && p.help.length > 0)\n                    .map(p => {\n                      return p.helpText().filter(t => {\n                        return t.toLowerCase().indexOf(search.toLowerCase()) > -1;\n                      }).join('\\n');\n                    }, [])\n                    .join('\\n');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/help.js","import { ChatPlugin, respond, help, permissionGroup } from '../chat';\nimport { PropTypes as T } from '../../exobot';\n\nimport { v4 as uuid } from 'node-uuid';\n\nexport class Permissions extends ChatPlugin {\n  name = 'permissions';\n  defaultDatabase = { permissions: {} };\n\n  propTypes = {\n    adminPassword: T.string.isRequired,\n  };\n\n  static nameToId = (name) => {\n    if (name) {\n      return name.replace(/[^\\w-]/g, '').toLowerCase();\n    }\n    return;\n  }\n\n  @help('/permissions authorize admin <password> to authorize yourself as an admin');\n  @permissionGroup('public');\n  @respond(/^permissions authorize admin (.+)$/i);\n  async admin ([, adminPassword], message) {\n    await this.databaseInitialized();\n\n    // Validate the password - if there is one.\n    if (this.options.adminPassword && adminPassword === this.options.adminPassword) {\n      const id = Permissions.nameToId(message.user.id);\n      this.bot.addRole(id, 'admin');\n      return 'User authorized as admin.';\n    }\n  }\n\n  @help('/permissions add role <role> to <user> to add a role to a user');\n  @permissionGroup('role-management');\n  @respond(/^permissions add role (\\w+) to (.+)$/i);\n  async addRoleToUser ([match, role, name], message) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n    let userIdDirty;\n    try {\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\n    } catch (err) {\n      this.bot.log.warn(err);\n    }\n    const userId = Permissions.nameToId(userIdDirty);\n    if (userId) {\n      this.bot.addRole(userId, role);\n      return `${name} added to role ${role}.`;\n    }\n  }\n\n  @help('/permissions view user <user> to view roles given to a user');\n  @permissionGroup('role-management');\n  @respond(/^permissions view user (.+)$/i);\n  async viewUser ([match, name], message) {\n    await this.databaseInitialized();\n    let userIdDirty;\n    try {\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\n    } catch (err) {\n      this.bot.log.warn(err);\n    }\n    const userId = Permissions.nameToId(userIdDirty);\n    if (userId) {\n      const perms = this.bot.getRoles(userId);\n      return perms.join(', ');\n    }\n  }\n\n  @help('/permissions view effective user <user> to view all roles assigned to <user>');\n  @permissionGroup('role-management');\n  @respond(/^permissions view effective user (.+)$/i);\n  async viewEffectiveUser ([match, name], message) {\n    await this.databaseInitialized();\n    let userIdDirty;\n    try {\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\n    } catch (err) {\n      this.bot.log.warn(err);\n    }\n    const userId = Permissions.nameToId(userIdDirty);\n    if (userId) {\n      const perms = this.bot.getUserRoles(userId);\n      return perms.join(', ');\n    }\n  }\n\n  @help('/permissions remove role <role> from <user> to remove a role from a user');\n  @permissionGroup('role-management');\n  @respond(/^permissions remove role (\\w+) from (.+)$/i);\n  async removeRoleFromUser ([match, role, name], message) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n    let userIdDirty;\n    try {\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\n    } catch (err) {\n      this.bot.log.warn(err);\n    }\n    const userId = Permissions.nameToId(userIdDirty);\n    if (userId) {\n      this.bot.removeRole(userId, role);\n      return `${name} removed from role ${role}.`;\n    }\n  }\n\n  @help('/permissions add role <permissiongroup> <role> to allow access to a permissionGroup');\n  @permissionGroup('role-management');\n  @respond(/^permissions add role (\\S+) (\\w+)$/i);\n  async addRoleToGroup ([, permissionGroup, role]/*, message*/) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n\n    this.bot.db.set(`permissions.groups.${permissionGroup}.${role}`, true).value();\n    this.bot.db.write();\n    return `role \"${role}\" given permission to commands under group \"${permissionGroup}\".`;\n  }\n\n  @help('/permissions remove group <permissionGroup> <role> to allow access to a permissionGroup');\n  @permissionGroup('role-management');\n  @respond(/^permissions remove role (\\S+) (\\w+)$/i);\n  async removeRoleFromGroup ([, permissionGroup, role]/*, message*/) {\n    role = Permissions.nameToId(role);\n    await this.databaseInitialized();\n\n    const group = this.bot.db.get(`permissions.groups.${permissionGroup}`).value();\n    delete group[role];\n    this.bot.db.set(`permissions.groups.${permissionGroup}`, group).value();\n    this.bot.db.write();\n    return `role \"${role}\" removed permission to commands under group \"${permissionGroup}\".`;\n  }\n\n  @help(\n    '/permissions view group <permissionGroup> to view roles with access to ' +\n    'commands under that permissionGroup'\n  );\n  @permissionGroup('role-management');\n  @respond(/^permissions view group (\\S+)$/i);\n  async viewGroup ([, group]/*, message*/) {\n    await this.databaseInitialized();\n\n    const perms = Object.keys(this.bot.db.get(`permissions.groups.${group}`).value());\n    return perms.join(', ');\n  }\n\n  @help('/login to recieve a token to claim your users across chat adapters, ' +\n    '/login <userIdString> <userToken> to login on another adapter');\n  @permissionGroup('public');\n  @respond(/^login\\s*(\\S+)?\\s*(\\S+)?$/i);\n  async multipleAdapterLogin ([, userId, token], message) {\n    await this.databaseInitialized();\n    if (userId && token) {\n      const user = this.bot.users.botUsers[userId];\n      if (user && user.id !== message.user.id) {\n        if (user.token === token) {\n          user.token = undefined;\n          return this.bot.mergeUsers(user, message.user);\n        }\n      }\n      return 'Wrong userId or token specified';\n    }\n    token = uuid();\n    message.user.token = token;\n    return 'Please whisper this to the bot on the other adapter \\n' +\n            `login ${message.user.id} ${token}`;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/permissions.js","module.exports = require(\"cryptr\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cryptr\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"lowdb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lowdb\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"underscore-db\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore-db\"\n// module id = 31\n// module chunks = 0","import Emitter from 'eventemitter3';\nimport Log from 'log';\nimport superagent from 'superagent';\nimport sapp from 'superagent-promise-plugin';\nimport { intersection } from 'lodash/array';\nimport { merge } from 'lodash';\nimport T from 'proptypes';\n\nexport const PropTypes = T;\n\nsapp.Promise = Promise;\n\nimport { Permissions } from './plugins/plugins';\n\nconst http = sapp.patch(superagent);\nconst USERS_DB = 'exobot-users';\n\nimport { DB } from './db';\n\nexport class Exobot {\n  plugins = [];\n  adapters = {};\n\n  constructor (name, options={}) {\n    this.name = name;\n    this.alias = options.alias;\n    this.emitter = new Emitter();\n    this.http = http;\n    this.requirePermissions = options.requirePermissions;\n\n    this.initLog(options.logLevel || Log.WARNING);\n\n    process.on('unhandledRejection', this.log.critical.bind(this.log));\n\n    const dbPath = options.dbPath || `./data/${name}.json`;\n    this.initDB(options.key, dbPath, options.readFile, options.writeFile);\n    this.initUsers();\n\n    this.initAdapters(options.adapters);\n    this.initPlugins(options.plugins);\n\n  }\n\n  initAdapters = (adapters=[]) => {\n    adapters.forEach(a => this.addAdapter(a));\n  }\n\n  initPlugins = (plugins=[]) => {\n    plugins.forEach(p => {\n      this.addPlugin(p);\n\n      // if the Permissions plugin isn't initialized, we can optimize later on\n      // by not waiting for DB initialization and permissions checking.\n      if (p instanceof Permissions) {\n        this.usePermissions = true;\n      }\n    });\n  }\n\n  initLog = (logLevel) => {\n    const log = new Log(logLevel || Log.WARNING);\n    this.log = log;\n    this.logLevel = logLevel;\n\n    if (logLevel === Log.DEBUG) {\n      setInterval(this.logProcess, 10000);\n    }\n  }\n\n  initDB = (key, dbPath, readFile, writeFile) => {\n    if (!key) {\n      this.log.critical('Pass options.key in to bot initializer. Database not initializing.');\n      return;\n    }\n\n    DB({\n      key,\n      readFile,\n      writeFile,\n      path: dbPath,\n      emitter: this.emitter,\n    }).then((db) => {\n      this.db = db;\n      this.emitter.emit('dbLoaded', db);\n    }, this.log.critical.bind(this.log));\n  }\n\n  async initUsers () {\n    await this.databaseInitialized();\n    this.users = this.db.get(USERS_DB).value();\n\n    if (this.users) {\n      this.log.debug(Object.keys(this.users.botUsers).length, 'exobot users');\n      return;\n    }\n\n    this.db.set(USERS_DB, {botUsers: {}}).value();\n    this.users = this.db.get(USERS_DB).value();\n  }\n\n  mergeUsers (destUser, srcUser) {\n    if (destUser && srcUser) {\n      merge(destUser.roles, srcUser.roles);\n      Object.keys(srcUser.adapters).map(adapter => {\n        this.users[adapter][srcUser.adapters[adapter].userId].botId = destUser.id;\n      });\n      merge(destUser.adapters, srcUser.adapters);\n      delete this.users.botUsers[srcUser.id];\n      this.db.write();\n      return 'Login complete';\n    }\n\n  }\n\n  addRole(userId, roleName) {\n    this.users.botUsers[userId].roles[roleName] = true;\n    this.db.write();\n  }\n\n  getRoles(userId) {\n    return Object.keys(this.users.botUsers[userId].roles);\n  }\n\n  removeRole(userId, roleName) {\n    const roles = this.users.botUsers[userId].roles;\n    delete roles[roleName];\n    this.db.write();\n  }\n\n  getUserRoles (userId) {\n    const user = this.users.botUsers[userId];\n    let roles = [];\n\n    if (user) {\n      Object.keys(user.adapters).map(adapter => {\n        const adapterRoles = this.adapters[adapter].getRolesForUser(user.adapters[adapter].userId);\n        if (adapterRoles) {\n          roles = roles.concat(adapterRoles);\n        }\n      });\n      roles = roles.concat(Object.keys(user.roles));\n      return roles;\n    }\n  }\n\n  async checkPermissions (userId, commandPermissionGroup) {\n    if (!this.usePermissions) { return true; }\n    // special group for admin authorization - otherwise you could never auth\n    // in the first place when public commands are disabled\n    if (commandPermissionGroup === 'permissions.public') { return true; }\n\n    await this.databaseInitialized();\n\n    // get user's roles\n    const roles = this.getUserRoles(userId);\n    // if user has `admin` role, allow it\n    if (roles && roles.includes('admin')) { return true; }\n\n    // get roles assigned to the command group\n    const groups = this.db.get(`permissions.groups.${commandPermissionGroup}`).value();\n    // if there are no groups, and requirePermissions is false, allow it\n    // requirePermissions = false == (public by default)\n    if (!groups || !Object.keys(groups)) {\n      if (!this.requirePermissions) {\n        return true;\n      }\n\n      // otherwise, if there are no groups, and we're not an admin, return\n      // false.\n      return false;\n    }\n    // if command is in `public`, allow it\n    if (groups.public) { return true; }\n\n    // check user's list of roles against list of groups that have the command\n    // if there's a match (user is in a group with the command), allow it\n    if (intersection(roles, Object.keys(groups)).length) {\n      return true;\n    }\n\n    return false;\n  }\n\n  async databaseInitialized () {\n    if (this.db) {\n      return true;\n    }\n    return new Promise((resolve) => {\n      this.emitter.on('dbLoaded', resolve);\n    });\n  }\n\n  logProcess = () => {\n    this.log.debug(process.memoryUsage(), process.cpuUsage());\n  }\n\n  addPlugin (plugin) {\n    plugin.register(this);\n    this.plugins.push(plugin);\n  }\n\n  addAdapter (adapter) {\n    const name = adapter.name;\n\n    if (this.getAdapterByName(name)) {\n      this.log.warning(`Multiple \"${name}\" adapters were initialized.`);\n    }\n\n    adapter.register(this);\n    this.adapters[adapter.name] = adapter;\n  }\n\n  prependNameForWhisper (text) {\n    if (\n      text.slice(0, this.name.length).toLowerCase() !== this.name.toLowerCase() &&\n      text.slice(0, this.alias.length).toLowerCase() !== this.alias.toLowerCase()\n    ) {\n      text = `${this.name} ${text}`;\n    }\n\n    return text;\n  }\n\n  send (message) {\n    if (!message.text) { return; }\n    const adapter = this.getAdapterByMessage(message);\n\n    if (!adapter) {\n      this.log.warning(`Message sent with invalid adapter: ${message.adapter}`);\n      return;\n    }\n\n    adapter.send(message);\n  }\n\n  getAdapterByMessage (message) {\n    return this.adapters[message.adapter];\n  }\n\n  getAdapterByName (name) {\n    return Object\n            .keys(this.adapters)\n            .map(id => this.adapters[id])\n            .find(a => a.name.toLowerCase() === name.toLowerCase());\n  }\n}\n\nexport * from './adapters';\nexport * from './messages';\nexport * from './plugins';\nexport * from './db';\nexport { default as User } from './user';\nexport const LogLevels = Log;\n\n\n\n// WEBPACK FOOTER //\n// ./src/exobot.js","module.exports = require(\"proptypes\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"proptypes\"\n// module id = 34\n// module chunks = 0"],"sourceRoot":""}