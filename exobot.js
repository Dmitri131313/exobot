require("source-map-support").install();
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("node-uuid"),require("babel-polyfill"),require("eventemitter3"),require("log"),require("superagent"),require("superagent-promise-plugin"),require("cryptr"),require("fs-extra"),require("lowdb"),require("readline"),require("underscore-db")):"function"==typeof define&&define.amd?define(["node-uuid","babel-polyfill","eventemitter3","log","superagent","superagent-promise-plugin","cryptr","fs-extra","lowdb","readline","underscore-db"],t):"object"==typeof exports?exports["exobot.js"]=t(require("node-uuid"),require("babel-polyfill"),require("eventemitter3"),require("log"),require("superagent"),require("superagent-promise-plugin"),require("cryptr"),require("fs-extra"),require("lowdb"),require("readline"),require("underscore-db")):e["exobot.js"]=t(e["node-uuid"],e["babel-polyfill"],e.eventemitter3,e.log,e.superagent,e["superagent-promise-plugin"],e.cryptr,e["fs-extra"],e.lowdb,e.readline,e["underscore-db"])}(this,function(e,t,n,r,o,i,u,a,s,c,f){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(s){return void n(s)}return u.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),this.help=void 0,this._requiresDatabase=!1,this.options=t}return i(e,[{key:"register",value:function(e){if(!e)throw new Error("No bot passed to register; fatal.");this.bot=e}},{key:"listen",value:function(){if(!this.bot)throw new Error("No bot to listen on; fatal.")}},{key:"database",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function n(e,t){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.databaseInitialized();case 2:r=this.bot.db.get(e).value(),"undefined"==typeof r&&this.bot.db.set(e,t).value();case 4:case"end":return n.stop()}},n,this)}));return e}()},{key:"databaseInitialized",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function n(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._requiresDatabase=!0,!this._requiresDatabase||!this.bot.db){t.next=3;break}return t.abrupt("return",!0);case 3:return t.abrupt("return",new Promise(function(t){e.bot.emitter.on("dbLoaded",t)}));case 4:case"end":return t.stop()}},n,this)}));return e}()}]),e}();t.a=u},function(e,t,n){"use strict";var r=n(19);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(8),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};n.d(i,"a",i);var u=function a(e){var t=e.user,i=e.channel,u=e.adapter,s=e.id,c=void 0===s?n.i(o.v4)():s;r(this,a),this.user=t,this.channel=i,this.adapter=u,this.id=c};t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(2),a=function(e){function t(e){var n=e.text,i=e.whisper,u=void 0===i?!1:i;r(this,t);var a=o(this,Object.getPrototypeOf(t).apply(this,arguments));return a.text=n,a.whisper=u,a}return i(t,e),t}(u.a);t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),a=n(3),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=/.+/,l=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.regexp=f,e.respondFunctions=[],e.listenFunctions=[],e}return i(t,e),c(t,[{key:"register",value:function(e){var t=this;this.bot=e,this.botNameRegex=new RegExp("^(?:(?:"+e.name+"|"+e.alias+")[,\\s:.-]*)(.+)"),e.emitter.on("receive-message",function(e){t.respondFunctions.forEach(function(n){return t.process(n[0],n[1],e,!0)}),t.listenFunctions.forEach(function(n){return t.process(n[0],n[1],e)})})}},{key:"process",value:function(e,t,n){var r=this,o=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(o){var i=this.validateBotName(n);if(!i)return;n=new a.a(s({},n,{text:i,direct:!0}))}e.exec&&(e=this.validate(e));var u=e(n);if(u){var c=t(u,n);if(c)if(c instanceof Promise)c.then(function(e){var t=new a.a(s({},n,{text:e}));r.bot.send(t)});else{var f=new a.a(s({},n,{text:c}));this.bot.send(f)}}}},{key:"validate",value:function(e){return function(t){return e.exec(t.text)}}},{key:"validateBotName",value:function(e){var t=this.botNameRegex.exec(e.text);if(t)return t[1]}},{key:"respond",value:function(e,t){t&&(t=t.bind(this)),this.respondFunctions.push([e,t])}},{key:"listen",value:function(e,t){t&&(t=t.bind(this)),this.listenFunctions.push([e,t])}}]),t}(u.a);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function i(e){var t=arguments.length<=1||void 0===arguments[1]?e:arguments[1];r(this,i),this.name=e,this.id=t};t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(8),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};n.d(i,"a",i);var u=n(3),a=n(7),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.options=t,this.id=t.id||n.i(o.v4)(),this.status=e.STATUS.UNINITIALIZED}return s(e,[{key:"register",value:function(t){if(!t)throw new Error("No bot passed to register; fatal.");this.bot=t,this.status=e.STATUS.CONNECTING,this.listen()}},{key:"listen",value:function(){if(!this.bot)throw new Error("No bot to listen on; fatal.")}},{key:"receive",value:function(e){var t=e.user,n=e.text,r=e.channel,o=e.whisper,i=new u.a({user:t,text:n,channel:r,whisper:o,adapter:this.id});this.bot.emitter.emit("receive-message",i)}},{key:"receiveWhisper",value:function(e){var t=e.user,n=e.text,r=e.channel;n=this.bot.prependNameForWhisper(n),this.receive({user:t,text:n,channel:r,whisper:!0})}},{key:"enter",value:function(e){var t=e.user,n=e.channel,r=new a.a({user:t,channel:n,adapter:this.id,type:a.a.TYPES.ENTER});this.bot.emitter.emit("enter",r)}},{key:"leave",value:function(e){var t=e.user,n=e.channel,r=new a.a({user:t,channel:n,adapter:this.id,type:a.a.TYPES.LEAVE});this.bot.emitter.emit("leave",r)}},{key:"send",value:function(e){console.log(e.text)}},{key:"ping",value:function(){this.pong()}},{key:"pong",value:function(){console.log("Ping received, this.pong() not implemented.")}}]),e}();c.STATUS={UNINITIALIZED:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3,RECONNECTING:4,ERROR:5},t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(2),a=function(e){function t(e){var n=e.type;r(this,t);var i=o(this,Object.getPrototypeOf(t).apply(this,arguments));return i.type=n,i}return i(t,e),t}(u.a);a.TYPES={ENTER:0,LEAVE:1},t.a=a},function(e,t){e.exports=require("node-uuid")},function(e,t,n){"use strict";var r=n(6),o=n(17);n.d(t,"adapters",function(){return i}),n.o(r,"a")&&n.d(t,"Adapter",function(){return r.a});var i=o},function(e,t,n){"use strict";var r=n(2),o=n(7),i=n(3);n.o(r,"a")&&n.d(t,"Message",function(){return r.a}),n.o(o,"a")&&n.d(t,"PresenceMessage",function(){return o.a}),n.o(i,"a")&&n.d(t,"TextMessage",function(){return i.a})},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(21),u=n(22),a=n(25);n.d(t,"plugins",function(){return s}),n.o(r,"a")&&n.d(t,"Plugin",function(){return r.a}),n.o(o,"a")&&n.d(t,"ChatPlugin",function(){return o.a}),n.o(i,"a")&&n.d(t,"EventPlugin",function(){return i.a}),n.o(u,"a")&&n.d(t,"HTTPPlugin",function(){return u.a});var s=a},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("eventemitter3")},function(e,t){e.exports=require("log")},function(e,t){e.exports=require("superagent")},function(e,t){e.exports=require("superagent-promise-plugin")},function(e,t,n){"use strict";var r=n(18);n.o(r,"a")&&n.d(t,"Shell",function(){return r.a})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(29),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};n.d(a,"a",a);var s=n(6),c=n(5),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function b(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},p="SHELL",h=new c.a("shell"),d=["exit","quit","q"],v=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.rl=a.a.createInterface({input:process.stdin,output:process.stdout}),e}return i(t,e),f(t,[{key:"prompt",value:function(){var e=this;this.rl.question("Chat: ",function(n){return d.includes(n)?process.exit():(l(Object.getPrototypeOf(t.prototype),"receive",e).call(e,{text:n,channel:p,user:h}),void e.prompt())})}},{key:"register",value:function(e){l(Object.getPrototypeOf(t.prototype),"register",this).call(this,e),this.prompt(),this.status=s.a.STATUS.CONNECTED}}]),t}(s.a);t.a=v},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(s){return void n(s)}return u.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}var o=n(26),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};n.d(i,"a",i);var u=n(28),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};n.d(a,"a",a);var s=n(27),c=s&&s.__esModule?function(){return s["default"]}:function(){return s};n.d(c,"a",c);var f=n(30),l=f&&f.__esModule?function(){return f["default"]}:function(){return f};n.d(l,"a",l),n.d(t,"deserialize",function(){return p}),n.d(t,"serialize",function(){return h}),n.d(t,"read",function(){return d}),n.d(t,"write",function(){return v}),n.d(t,"readLocal",function(){return b}),n.d(t,"writeLocal",function(){return y}),n.d(t,"DB",function(){return g});var p=function(e){return function(t){if(!t)return{};var n=e.decrypt(t),r=JSON.parse(n);return r}},h=function(e){return function(t){var n=JSON.stringify(t),r=e.encrypt(n);return r}},d=function(e){return function(t,n){return new Promise(function(r,o){e(t).then(function(e){try{r(n(e))}catch(t){o(t)}})})}},v=function(e){return function(t,n,r){return new Promise(function(o,i){try{var u=r(n);e(t,u).then(o,i)}catch(a){i(a)}})}},b=function(e){return new Promise(function(t,n){c.a.ensureFile(e,function(r){return r?n(r):void c.a.readFile(e,"utf8",function(e,r){return e?n(e):t(r)})})})},y=function(e,t){return new Promise(function(n,r){c.a.ensureFile(e,function(o){return o?r(o):void c.a.writeFile(e,t,"utf8",function(e){return e?r(e):n(t)})})})},g=function(){var e=r(regeneratorRuntime.mark(function t(e){var n,r,o,u=e.path,s=e.key,c=e.readFile,f=void 0===c?b:c,g=e.writeFile,w=void 0===g?y:g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.a(s||name),r=u||"./data/"+name+".json",e.next=4,new a.a(r,{storage:{read:d(f),write:v(w)},format:{deserialize:p(n),serialize:h(n)}});case 4:return o=e.sent,o._.mixin(l.a),e.abrupt("return",o);case 7:case"end":return e.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(12),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};n.d(i,"a",i);var u=n(13),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};n.d(a,"a",a);var s=n(14),c=s&&s.__esModule?function(){return s["default"]}:function(){return s};n.d(c,"a",c);var f=n(15),l=f&&f.__esModule?function(){return f["default"]}:function(){return f};n.d(l,"a",l);var p=n(16),h=p&&p.__esModule?function(){return p["default"]}:function(){return p};n.d(h,"a",h);var d=n(1),v=n(9),b=n(10),y=n(11),g=n(5);n.d(t,"Exobot",function(){return x}),n.d(t,"LogLevels",function(){return P});for(var w in v)["Exobot","User","LogLevels","default"].indexOf(w)<0&&function(e){n.d(t,e,function(){return v[e]})}(w);for(var w in b)["Exobot","User","LogLevels","default"].indexOf(w)<0&&function(e){n.d(t,e,function(){return b[e]})}(w);for(var w in y)["Exobot","User","LogLevels","default"].indexOf(w)<0&&function(e){n.d(t,e,function(){return y[e]})}(w);for(var w in d)["Exobot","User","LogLevels","default"].indexOf(w)<0&&function(e){n.d(t,e,function(){return d[e]})}(w);n.o(g,"a")&&n.d(t,"User",function(){return g.a});var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();h.a.Promise=Promise;var O=h.a.patch(l.a),x=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,e),E.call(this),this.name=t,this.alias=n.alias,this.emitter=new a.a,this.http=O,this.initLog(n.logLevel||c.a.WARNING),this.initAdapters(n.adapters),this.initPlugins(n.plugins);var o=n.dbPath||"./data/"+t+".json";this.initDB(n.key,o,n.readFile,n.writeFile)}return m(e,[{key:"addPlugin",value:function(e){e.register(this),this.plugins.push(e)}},{key:"addAdapter",value:function(e){e.register(this),this.adapters[e.id]=e}},{key:"prependNameForWhisper",value:function(e){return e.slice(0,this.name.length).toLowerCase()!==this.name.toLowerCase()&&e.slice(0,this.alias.length).toLowerCase()!==this.alias.toLowerCase()&&(e=this.name+" "+e),e}},{key:"send",value:function(e){var t=this.adapters[e.adapter];return t?void t.send(e):void this.bot.log.warning("Message sent with invalid adapter: "+e.adapter)}}]),e}(),E=function(){var e=this;this.plugins=[],this.adapters={},this.initAdapters=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];t.forEach(function(t){return e.addAdapter(t)})},this.initPlugins=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];t.forEach(function(t){return e.addPlugin(t)})},this.initLog=function(t){var n=new c.a(t||c.a.WARNING);e.log=n,e.logLevel=t,t===c.a.DEBUG&&setInterval(e.logProcess,1e4)},this.initDB=function(t,r,o,i){return t?void n.i(d.DB)({key:t,readFile:o,writeFile:i,path:r,emitter:e.emitter}).then(function(t){e.db=t,e.emitter.emit("dbLoaded",t)},e.log.critical):void e.log.critical("Pass options.key in to bot initializer. Database not initializing.")},this.logProcess=function(){e.log.debug(process.memoryUsage(),process.cpuUsage())}},P=c.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),a=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(u.a);t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),a=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(u.a);t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(4),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=["hi","hello","sup","greetings","yo","hey"],f=["goodbye","farwell","bye","later","see ya","cya"],l=function(e,t){return new RegExp("^("+t.join("|")+")[,\\s]*"+e,"i")},p=function(e){function t(){var e,n,i,u;r(this,t);for(var a=arguments.length,s=Array(a),c=0;a>c;c++)s[c]=arguments[c];return n=i=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.help='Greetings: says "hi" back. Say "hi <botname>" for a response.',u=n,o(i,u)}return i(t,e),a(t,[{key:"register",value:function(e){s(Object.getPrototypeOf(t.prototype),"register",this).apply(this,arguments),this.listen(l(e.name,c),this.greeting),this.listen(function(e){return c.includes(e.text.toLowerCase())},this.greeting),this.respond(function(e){return c.includes(e.text.toLowerCase())},this.greeting),this.listen(l(e.name,f),this.farewell),this.listen(function(e){return f.includes(e.text.toLowerCase())},this.farewell),this.respond(function(e){return f.includes(e.text.toLowerCase())},this.farewell)}},{key:"greeting",value:function(e,t){var n=c[parseInt(Math.random()*c.length)];return n+", "+t.user.name+"!"}},{key:"farewell",value:function(e,t){var n=f[parseInt(Math.random()*f.length)];return n+", "+t.user.name+"!"}}]),t}(u.a);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(4),a=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).apply(this,arguments));return e.help='Help: Explains commands. Say "<botname> help" for information.',e.pluginHelp=function(){return e.bot.plugins.filter(function(e){return e.help}).map(function(e){return e.help},[]).join("\n")},e.respond(/^help$/i,e.pluginHelp),e}return i(t,e),t}(u.a);t.a=a},function(e,t,n){"use strict";var r=n(23),o=n(24);n.o(r,"a")&&n.d(t,"Greetings",function(){return r.a}),n.o(o,"a")&&n.d(t,"Help",function(){return o.a})},function(e,t){e.exports=require("cryptr")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("lowdb")},function(e,t){e.exports=require("readline")},function(e,t){e.exports=require("underscore-db")}])});
//# sourceMappingURL=exobot.js.map