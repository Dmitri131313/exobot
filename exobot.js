require("source-map-support").install();
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("node-uuid"),require("babel-polyfill"),require("eventemitter3"),require("readline")):"function"==typeof define&&define.amd?define(["node-uuid","babel-polyfill","eventemitter3","readline"],t):"object"==typeof exports?exports["exobot.js"]=t(require("node-uuid"),require("babel-polyfill"),require("eventemitter3"),require("readline")):e["exobot.js"]=t(e["node-uuid"],e["babel-polyfill"],e.eventemitter3,e.readline)}(this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(t.s=15)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.help=void 0,this.options=t}return o(e,[{key:"register",value:function(e){if(!e)throw new Error("No bot passed to register; fatal.");this.bot=e}},{key:"listen",value:function(){if(!this.bot)throw new Error("No bot to listen on; fatal.")}}]),e}();t.a=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),u=function(e){function t(e){var n=e.text;r(this,t);var i=o(this,Object.getPrototypeOf(t).apply(this,arguments));return i.text=n,i}return i(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(6),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};Object.defineProperty(i,"a",{get:i});var a=function u(e){var t=e.user,n=e.channel,i=e.adapter,a=e.id,c=void 0===a?o.v4.call():a;r(this,u),this.user=t,this.channel=n,this.adapter=i,this.id=c};t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(6),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};Object.defineProperty(i,"a",{get:i});var a=n(1),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.options=t,this.id=t.id||o.v4.call()}return u(e,[{key:"register",value:function(e){if(!e)throw new Error("No bot passed to register; fatal.");this.bot=e,this.listen()}},{key:"listen",value:function(){if(!this.bot)throw new Error("No bot to listen on; fatal.");this.bot.on("send-message:"+this.id,this.respond)}},{key:"receive",value:function(e){var t=e.user,n=e.text,r=e.channel,o=new a.a({user:t,text:n,channel:r,adapter:this.id});this.bot.emit("receive-message",o)}},{key:"enter",value:function(e){var t=e.user,n=e.channel,r=new a.a({user:t,channel:n,adapter:this.id,type:a.a.PRESENCE_TYPES.ENTER});this.bot.emit("receive-message",r)}},{key:"leave",value:function(e){var t=e.user,n=e.channel,r=new a.a({user:t,channel:n,adapter:this.id,type:a.a.PRESENCE_TYPES.LEAVE});this.bot.emit("receive-message",r)}},{key:"respond",value:function(e){console.log(e.text)}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),u=n(1),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=/.+/,l=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.regexp=s,e.respondFunctions=[],e.listenFunctions=[],e}return i(t,e),f(t,[{key:"register",value:function(e){var t=this;this.bot=e,this.botNameRegex=new RegExp("^(?:(?:"+e.name+"|"+e.alias+")[,\\s:.-]*)(.+)"),e.on("receive-message",function(e){t.respondFunctions.forEach(function(n){return t.process(n[0],n[1],e,!0)}),t.listenFunctions.forEach(function(n){return t.process(n[0],n[1],e)})})}},{key:"process",value:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(r){var o=this.validateBotName(n);if(!o)return;n=new u.a(c({},n,{text:o,direct:!0}))}if(e.exec&&(e=this.validate(e)),e(n)){var i=t(n);if(i){var a=new u.a(c({},n,{text:i}));this.bot.emit("send-message:"+n.adapter,a)}}}},{key:"validate",value:function(e){return function(t){return e.exec(t.text)}}},{key:"validateBotName",value:function(e){var t=this.botNameRegex.exec(e.text);if(t)return t[1]}},{key:"respond",value:function(e,t){this.respondFunctions.push([e,t])}},{key:"listen",value:function(e,t){this.listenFunctions.push([e,t])}}]),t}(a.a);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),u=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(a.a);t.a=u},function(e,t){e.exports=require("node-uuid")},function(e,t,n){"use strict";var r=n(3),o=n(13);Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"Adapter",{configurable:!1,enumerable:!0,get:function(){return r.a}});var i=o;Object.defineProperty(t,"adapters",{configurable:!1,enumerable:!0,get:function(){return i}})},function(e,t,n){"use strict";var r=n(2),o=n(16),i=n(1);Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"Message",{configurable:!1,enumerable:!0,get:function(){return r.a}}),Object.prototype.hasOwnProperty.call(o,"a")&&Object.defineProperty(t,"PresenceMessage",{configurable:!1,enumerable:!0,get:function(){return o.a}}),Object.prototype.hasOwnProperty.call(i,"a")&&Object.defineProperty(t,"TextMessage",{configurable:!1,enumerable:!0,get:function(){return i.a}})},function(e,t,n){"use strict";var r=n(0),o=n(17),i=n(5),a=n(18),u=n(21);Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"Plugin",{configurable:!1,enumerable:!0,get:function(){return r.a}}),Object.prototype.hasOwnProperty.call(o,"a")&&Object.defineProperty(t,"DatabasePlugin",{configurable:!1,enumerable:!0,get:function(){return o.a}}),Object.prototype.hasOwnProperty.call(i,"a")&&Object.defineProperty(t,"EventPlugin",{configurable:!1,enumerable:!0,get:function(){return i.a}}),Object.prototype.hasOwnProperty.call(a,"a")&&Object.defineProperty(t,"HTTPPlugin",{configurable:!1,enumerable:!0,get:function(){return a.a}});var c=u;Object.defineProperty(t,"plugins",{configurable:!1,enumerable:!0,get:function(){return c}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function i(e){var t=arguments.length<=1||void 0===arguments[1]?e:arguments[1];r(this,i),this.name=e,this.id=t};t.a=o},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("eventemitter3")},function(e,t,n){"use strict";var r=n(14);Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"Shell",{configurable:!1,enumerable:!0,get:function(){return r.a}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(23),u=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(u,"a",{get:u});var c=n(3),f=n(10),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},p="SHELL",b=new f.a("shell"),y=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.rl=u.a.createInterface({input:process.stdin,output:process.stdout}),e}return i(t,e),s(t,[{key:"prompt",value:function(){var e=this;this.rl.question("Chat: ",function(n){l(Object.getPrototypeOf(t.prototype),"receive",e).call(e,{text:n,channel:p,user:b}),e.prompt()})}},{key:"register",value:function(e){l(Object.getPrototypeOf(t.prototype),"register",this).call(this,e),this.prompt()}}]),t}(c.a);t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(11),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};Object.defineProperty(i,"a",{get:i});var a=n(12),u=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(u,"a",{get:u});var c=n(7),f=n(8),s=n(9),l=n(10);for(var p in c)["Exobot","User","default"].indexOf(p)<0&&function(e){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:function(){return c[e]}})}(p);for(var p in f)["Exobot","User","default"].indexOf(p)<0&&function(e){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:function(){return f[e]}})}(p);for(var p in s)["Exobot","User","default"].indexOf(p)<0&&function(e){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:function(){return s[e]}})}(p);Object.prototype.hasOwnProperty.call(l,"a")&&Object.defineProperty(t,"User",{configurable:!1,enumerable:!0,get:function(){return l.a}});var b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=["on","once","emit","removeListener","listeners"],h=function(){function e(t){var n=this,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,e),this.plugins=[],this.adapters={},this.name=t,this.alias=o.alias,this.emitter=new u.a,y.forEach(function(e){n[e]=n.emitter[e]}),o.adapters&&o.adapters.forEach(function(e){return n.addAdapter(e)}),o.plugins&&o.plugins.forEach(function(e){return n.addPlugin(e)})}return b(e,[{key:"addPlugin",value:function(e){e.register(this),this.plugins.push(e)}},{key:"addAdapter",value:function(e){e.register(this),this.adapters[e.id]=e}}]),e}();Object.defineProperty(t,"Exobot",{configurable:!1,enumerable:!0,get:function(){return h}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),u=function(e){function t(e){var n=e.type;r(this,t);var i=o(this,Object.getPrototypeOf(t).apply(this,arguments));return i.type=n,i}return i(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),u=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),u=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(4),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},f=["hi","hello","sup","greetings","yo"],s=function(e){return new RegExp("^("+f.join("|")+")[,\\s]*"+e,"i")},l=function(e){function t(){var e,n,i,a;r(this,t);for(var u=arguments.length,c=Array(u),f=0;u>f;f++)c[f]=arguments[f];return n=i=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),i.help='Greetings: says "hi" back. Say "hi <botname>" for a response.',a=n,o(i,a)}return i(t,e),u(t,[{key:"register",value:function(e){c(Object.getPrototypeOf(t.prototype),"register",this).apply(this,arguments),this.listen(s(e.name),this.greeting),this.listen(function(e){return f.includes(e.text.toLowerCase())},this.greeting)}},{key:"greeting",value:function(e){var t=f[parseInt(Math.random()*f.length)];return t+", "+e.user.name+"!"}}]),t}(a.a);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(4),u=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).apply(this,arguments));return e.help='Help: Explains commands. Say "<botname> help" for information.',e.pluginHelp=function(){return e.bot.plugins.filter(function(e){return e.help}).map(function(e){return e.help},[]).join("\n")},e.respond(/^help$/,e.pluginHelp),e}return i(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";var r=n(19),o=n(20),i=n(22);Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"Greetings",{configurable:!1,enumerable:!0,get:function(){return r.a}}),Object.prototype.hasOwnProperty.call(o,"a")&&Object.defineProperty(t,"Help",{configurable:!1,enumerable:!0,get:function(){return o.a}}),Object.prototype.hasOwnProperty.call(i,"a")&&Object.defineProperty(t,"Logger",{configurable:!1,enumerable:!0,get:function(){return i.a}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),u=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(a.a);u.levels={DEBUG:3,WARNING:2,ERROR:1,FATAL:0},t.a=u},function(e,t){e.exports=require("readline")}])});
//# sourceMappingURL=exobot.js.map