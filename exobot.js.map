{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///exobot.js","webpack:///webpack/bootstrap 8759f8d502159ea67d7e","webpack:///./src/plugins/chat.js","webpack:///./src/plugins/plugin.js","webpack:///./src/messages/message.js","webpack:///./src/messages/text.js","webpack:///external \"node-uuid\"","webpack:///./src/user.js","webpack:///./src/adapters/adapter.js","webpack:///./src/messages/presence.js","webpack:///./src/adapters/index.js","webpack:///./src/plugins/index.js","webpack:///external \"eventemitter3\"","webpack:///external \"lodash\"","webpack:///external \"lodash/array\"","webpack:///external \"log\"","webpack:///external \"superagent\"","webpack:///external \"superagent-promise-plugin\"","webpack:///external \"util\"","webpack:///./src/adapters/adapters/shell.js","webpack:///./src/db/db.js","webpack:///./src/plugins/event.js","webpack:///./src/plugins/http.js","webpack:///./src/plugins/plugins/greetings.js","webpack:///./src/plugins/plugins/help.js","webpack:///./src/plugins/plugins/permissions.js","webpack:///external \"cryptr\"","webpack:///external \"fs-extra\"","webpack:///external \"lowdb\"","webpack:///external \"readline\"","webpack:///external \"underscore-db\"","webpack:///./src/exobot.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_28__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_29__","__WEBPACK_EXTERNAL_MODULE_14__","__WEBPACK_EXTERNAL_MODULE_15__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_30__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_31__","__WEBPACK_EXTERNAL_MODULE_17__","__WEBPACK_EXTERNAL_MODULE_18__","__WEBPACK_EXTERNAL_MODULE_32__","__WEBPACK_EXTERNAL_MODULE_19__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","_toConsumableArray","arr","Array","isArray","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__plugin__","__WEBPACK_IMPORTED_MODULE_1__messages_text__","ChatPlugin","listen","respond","help","permissionGroup","_extends","assign","target","source","_slicedToArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","push","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","DEFAULT_REGEXP","_Plugin","_this","regexp","respondFunctions","listenFunctions","_this2","map","bot","_this3","botNameRegex","RegExp","alias","postConstructor","forEach","_ref","_ref2","args","bind","emitter","on","message","v","process","concat","_x","_x2","_x3","_x4","_x5","_ref3","regeneratorRuntime","mark","_callee","validation","response","fnName","text","_text","_text2","res","_text3","newMessage","_this4","isResponder","wrap","_context","prev","validateBotName","abrupt","direct","whisper","exec","validate","checkPermissions","user","id","sent","t","send","t0","log","warning","stop","_x7","_x8","_ref4","_callee2","userId","commandPermissionGroup","_context2","regex","permissionGoup","setHelp","setPermissionGroup","Plugin","options","_requiresDatabase","Error","database","defaultDatabase","databaseInitialized","keys","val","db","set","__WEBPACK_IMPORTED_MODULE_0__db__","__WEBPACK_IMPORTED_MODULE_0_node_uuid__","Message","channel","adapter","_ref$id","__WEBPACK_IMPORTED_MODULE_0__message__","TextMessage","_Message","_ref$whisper","trim","__WEBPACK_IMPORTED_MODULE_0__greetings__","__WEBPACK_IMPORTED_MODULE_1__help__","__WEBPACK_IMPORTED_MODULE_2__permissions__","User","roles","adapters","_defineProperty","obj","__WEBPACK_IMPORTED_MODULE_0__messages_text__","__WEBPACK_IMPORTED_MODULE_1__messages_presence__","__WEBPACK_IMPORTED_MODULE_2__user__","Adapter","_class","_temp","status","STATUS","UNINITIALIZED","roleMapping","initUsers","CONNECTING","emit","prependNameForWhisper","receive","type","TYPES","ENTER","LEAVE","pong","_ref5","adapterUsers","users","write","getUser","_ref6","adapterUserId","adapterUsername","adapterUser","getRoles","botUsers","botId","CONNECTED","DISCONNECTED","RECONNECTING","ERROR","PresenceMessage","__WEBPACK_IMPORTED_MODULE_1__adapter__","__WEBPACK_IMPORTED_MODULE_0__adapters__","__WEBPACK_IMPORTED_MODULE_1__presence__","__WEBPACK_IMPORTED_MODULE_2__text__","__WEBPACK_IMPORTED_MODULE_1__plugin__","__WEBPACK_IMPORTED_MODULE_2__event__","__WEBPACK_IMPORTED_MODULE_3__http__","__WEBPACK_IMPORTED_MODULE_4__chat__","__WEBPACK_IMPORTED_MODULE_0__plugins__","plugins","__WEBPACK_IMPORTED_MODULE_0__shell__","__WEBPACK_IMPORTED_MODULE_0_readline__","__WEBPACK_IMPORTED_MODULE_0_readline___default","ShellAdapter","SHELL","EXIT_COMMANDS","_Adapter","rl","a","createInterface","input","stdin","output","stdout","prompt","question","answer","includes","exit","__WEBPACK_IMPORTED_MODULE_0_cryptr__","__WEBPACK_IMPORTED_MODULE_0_cryptr___default","__WEBPACK_IMPORTED_MODULE_1_lowdb__","__WEBPACK_IMPORTED_MODULE_1_lowdb___default","__WEBPACK_IMPORTED_MODULE_2_fs_extra__","__WEBPACK_IMPORTED_MODULE_2_fs_extra___default","__WEBPACK_IMPORTED_MODULE_3_underscore_db__","__WEBPACK_IMPORTED_MODULE_3_underscore_db___default","deserialize","serialize","read","readLocal","writeLocal","DB","cryptr","str","decrypted","decrypt","JSON","parse","stringify","encrypted","encrypt","readFile","path","data","e","writeFile","ensureFile","dbPath","_ref2$readFile","_ref2$writeFile","storage","format","_","mixin","EventPlugin","HTTPPlugin","_applyDecoratedDescriptor","decorators","context","initializer","slice","reverse","reduce","decorator","__WEBPACK_IMPORTED_MODULE_0__chat__","Greetings","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","GREETINGS","FAREWELLS","shouldGreet","toLowerCase","shouldFarewell","_ChatPlugin","_ret","_len","_key","randomGreeting","parseInt","Math","random","randomFarewell","Help","filter","helpText","join","search","indexOf","__WEBPACK_IMPORTED_MODULE_1_node_uuid__","Permissions","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_class2","permissions","adminPassword","admin","nameToId","addRole","addRoleToUser","userIdDirty","role","getUserIdByUserName","warn","viewUser","_x6","_ref7","_callee3","_ref8","perms","_ref9","_context3","viewEffectiveUser","_ref10","_callee4","_ref11","_ref12","_context4","getUserRoles","removeRoleFromUser","_x9","_x10","_ref13","_callee5","_ref14","_ref15","_context5","removeRole","addRoleToGroup","_x11","_ref16","_callee6","_ref17","_ref18","_context6","removeRoleFromGroup","_x12","_ref19","_callee7","_ref20","group","_ref21","_context7","viewGroup","_x13","_ref22","_callee8","_ref23","_ref24","_context8","multipleAdapterLogin","_x14","_x15","_ref25","_callee9","_ref26","_ref27","token","_context9","mergeUsers","replace","__WEBPACK_IMPORTED_MODULE_0_eventemitter3__","__WEBPACK_IMPORTED_MODULE_0_eventemitter3___default","__WEBPACK_IMPORTED_MODULE_1_log__","__WEBPACK_IMPORTED_MODULE_1_log___default","__WEBPACK_IMPORTED_MODULE_2_superagent__","__WEBPACK_IMPORTED_MODULE_2_superagent___default","__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__","__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default","__WEBPACK_IMPORTED_MODULE_4_lodash_array__","__WEBPACK_IMPORTED_MODULE_5_lodash__","__WEBPACK_IMPORTED_MODULE_6_util__","__WEBPACK_IMPORTED_MODULE_7__plugins_plugins__","__WEBPACK_IMPORTED_MODULE_8__db__","__WEBPACK_IMPORTED_MODULE_9__adapters__","__WEBPACK_IMPORTED_MODULE_10__messages__","__WEBPACK_IMPORTED_MODULE_11__plugins__","__WEBPACK_IMPORTED_MODULE_12__user__","Exobot","LogLevels","_initialiseProps","http","patch","USERS_DB","requirePermissions","initLog","logLevel","WARNING","initDB","initAdapters","initPlugins","destUser","srcUser","roleName","adapterRoles","getRolesForUser","groups","usePermissions","plugin","register","getAdapterByName","getAdapterByMessage","find","_this5","addAdapter","addPlugin","DEBUG","setInterval","logProcess","critical","debug","memoryUsage","cpuUsage"],"mappings":";CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,UAAAA,QAAA,iBAAAA,QAAA,YAAAA,QAAA,UAAAA,QAAA,gBAAAA,QAAA,OAAAA,QAAA,SAAAA,QAAA,aAAAA,QAAA,YAAAA,QAAA,cAAAA,QAAA,6BAAAA,QAAA,iBAAAA,QAAA,SACA,kBAAAC,gBAAAC,IACAD,QAAA,kKAAAJ,GACA,gBAAAC,SACAA,QAAA,aAAAD,EAAAG,QAAA,UAAAA,QAAA,iBAAAA,QAAA,YAAAA,QAAA,UAAAA,QAAA,gBAAAA,QAAA,OAAAA,QAAA,SAAAA,QAAA,aAAAA,QAAA,YAAAA,QAAA,cAAAA,QAAA,6BAAAA,QAAA,iBAAAA,QAAA,SAEAJ,EAAA,aAAAC,EAAAD,EAAA,OAAAA,EAAA,cAAAA,EAAA,YAAAA,EAAA,OAAAA,EAAA,gBAAAA,EAAA,IAAAA,EAAA,MAAAA,EAAA,aAAAA,EAAA,SAAAA,EAAA,WAAAA,EAAA,6BAAAA,EAAA,iBAAAA,EAAA,OACCO,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAArB,OAGA,IAAAC,GAAAqB,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAxB,WAUA,OANAmB,GAAAE,GAAAI,KAAAxB,EAAAD,QAAAC,IAAAD,QAAAoB,GAGAnB,EAAAuB,GAAA,EAGAvB,EAAAD,QAvBA,GAAAsB,KA6DA,OAjCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAG,EAAA,SAAAK,GAA2C,MAAAA,IAG3CR,EAAAS,EAAA,SAAA7B,EAAA8B,EAAAC,GACAC,OAAAC,eAAAjC,EAAA8B,GACAI,cAAA,EACAC,YAAA,EACAC,IAAAL,KAKAX,EAAAiB,EAAA,SAAApC,GACA,GAAA8B,GAAA9B,KAAAqC,WACA,WAA2B,MAAArC,GAAA,YAC3B,WAAiC,MAAAA,GAEjC,OADAmB,GAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAmB,EAAA,SAAAC,EAAAC,GAAsD,MAAAT,QAAAU,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDrB,EAAAwB,EAAA,GAGAxB,IAAAyB,EAAA,MDgBM,SAAS5C,EAAQD,EAASoB,GAEhC,YAgBA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASQ,GAAmBC,GAAO,GAAIC,MAAMC,QAAQF,GAAM,CAAE,IAAK,GAAIxC,GAAI,EAAG2C,EAAOF,MAAMD,EAAII,QAAS5C,EAAIwC,EAAII,OAAQ5C,IAAO2C,EAAK3C,GAAKwC,EAAIxC,EAAM,OAAO2C,GAAe,MAAOF,OAAMI,KAAKL,GAE1L,QAASM,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAvB5c,GAAIM,GAAwChE,EAAoB,GAC5DiE,EAA+CjE,EAAoB,EAC7DA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOsF,KACxDlE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOuF,KACxDnE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOwF,KACxDpE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOyF,KACxDrE,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO0F,IACvF,IAAIC,GAAW3D,OAAO4D,QAAU,SAAUC,GAAU,IAAK,GAAItE,GAAI,EAAGA,EAAI2B,UAAUiB,OAAQ5C,IAAK,CAAE,GAAIuE,GAAS5C,UAAU3B,EAAI,KAAK,GAAIgC,KAAOuC,GAAc9D,OAAOU,UAAUC,eAAelB,KAAKqE,EAAQvC,KAAQsC,EAAOtC,GAAOuC,EAAOvC,IAAY,MAAOsC,IAEnPE,EAAiB,WAAc,QAASC,GAAcjC,EAAKxC,GAAK,GAAI0E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAKC,MAAW,KAAM,IAAK,GAAiCC,GAA7BC,EAAKxC,EAAIyC,OAAOC,cAAmBP,GAAMI,EAAKC,EAAGG,QAAQ/C,QAAoBsC,EAAKU,KAAKL,EAAG1E,QAAYL,GAAK0E,EAAK9B,SAAW5C,GAA3D2E,GAAK,IAAoE,MAAOrC,GAAOsC,GAAK,EAAMC,EAAKvC,EAAO,QAAU,KAAWqC,GAAMK,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIJ,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUlC,EAAKxC,GAAK,GAAIyC,MAAMC,QAAQF,GAAQ,MAAOA,EAAY,IAAIyC,OAAOC,WAAYzE,QAAO+B,GAAQ,MAAOiC,GAAcjC,EAAKxC,EAAa,MAAM,IAAIiD,WAAU,4DAEllBoC,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MAE5hB2C,EAAO,QAAS9E,GAAII,EAAQC,EAAU0E,GAA2B,OAAX3E,IAAiBA,EAAS4E,SAAS1E,UAAW,IAAI2E,GAAOrF,OAAOsF,yBAAyB9E,EAAQC,EAAW,IAAa4D,SAATgB,EAAoB,CAAE,GAAIE,GAASvF,OAAOwF,eAAehF,EAAS,OAAe,QAAX+E,EAAmB,OAAkCnF,EAAImF,EAAQ9E,EAAU0E,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKzF,KAAgB,IAAIG,GAASsF,EAAKjF,GAAK,IAAeiE,SAAXtE,EAA4C,MAAOA,GAAON,KAAK0F,IE1FtdM,EAAiB,KAEVnC,EAAb,SAAAoC,GAOE,QAAApC,KAAejB,EAAAhE,KAAAiF,EAAA,IAAAqC,GAAAlD,EAAApE,MAAAiF,EAAAH,WAAAnD,OAAAwF,eAAAlC,IAAArC,MAAA5C,KACJ6C,WADI,OAAAyE,GANfC,OAASH,EAMME,EAJfE,oBAIeF,EAHfG,mBAGeH,EAFflC,QAEekC,EAPjB,MAAA/C,GAAAU,EAAAoC,GAAAd,EAAAtB,IAAA/B,IAAA,WAAA3B,MAAA,WAWc,GAAAmG,GAAA1H,IACV,OAAOA,MAAKoF,KAAKuC,IAAI,SAAA3F,GAAA,UAAS0F,EAAK1F,GAAGqD,gBAAjB,KAAqCqC,EAAK1F,GAAGoD,UAZtElC,IAAA,WAAA3B,MAAA,SAeYqG,GAAK,GAAAC,GAAA7H,IACb6G,GAAA5B,EAAA5C,UAAAyC,WAAAnD,OAAAwF,eAAAlC,EAAA5C,WAAA,WAAArC,MAAAoB,KAAApB,KAAe4H,GACf5H,KAAK4H,IAAMA,EACX5H,KAAK8H,aAAe,GAAIC,QAAJ,YAAuBH,EAAInG,KAA3B,IAAmCmG,EAAII,MAAvC,mBAAgE,KAEhFhI,KAAKiI,iBACPjI,KAAKiI,gBAAgBC,QAAQ,SAAAC,GAAA,GAAAC,GAAA1C,EAAAyC,EAAA,GAAEzF,EAAF0F,EAAA,GAAMC,EAAND,EAAA,SAAgB1F,GAAG4F,KAAHT,GAAAjF,MAAAoD,OAAAvC,EAAiB4E,MAGhET,EAAIW,QAAQC,GAAG,kBAAmB,SAAAC,GAOhCZ,EAAKL,iBAAiBU,QAAQ,SAAAQ,GAAA,MAAKb,GAAKc,QAAL/F,MAAAiF,EAAApE,EAAgBiF,GAAhBE,QAAmBH,GAAS,OAC/DZ,EAAKJ,gBAAgBS,QAAQ,SAAAQ,GAAA,MAAKb,GAAKc,QAAL/F,MAAAiF,EAAApE,EAAgBiF,GAAhBE,QAAmBH,YAhC3DvF,IAAA,UAAA3B,MAAA,mBAAAoH,GAAAE,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,MAAAC,GAAAtG,MAAA5C,KAAA6C,WAAA,GAAAqG,GAAAzG,EAAA0G,mBAAAC,KAAA,QAAAC,GAoCiBC,EAAYC,EAAUC,EAAQf,GApC/C,GAAAgB,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA/J,KAoCwDgK,IApCxDnH,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,KAAAA,UAAA,SAAAsG,oBAAAc,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA7D,MAAA,UAAA6D,EAAAC,KAAA,GAsCUH,EAtCV,CAAAE,EAAA7D,KAAA,WAuCcoD,EAAOzJ,KAAKoK,gBAAgB3B,GAvC1C,CAAAyB,EAAA7D,KAAA,cAAA6D,GAAAG,OAAA,iBA0CQ5B,EAAU,GAAIzD,GAAA,EAAJM,KAAqBmD,GAASgB,OAAMa,QAAQ,KA1C9DJ,EAAA7D,KAAA,oBA2CiBoC,EAAQ8B,QA3CzB,CAAAL,EAAA7D,KAAA,YA+CcoD,EAAOzJ,KAAKoK,gBAAgB3B,GA/C1C,CAAAyB,EAAA7D,KAAA,eAAA6D,GAAAG,OAAA,kBAkDQ5B,EAAU,GAAIzD,GAAA,EAAJM,KAAqBmD,GAASgB,OAAMa,QAAQ,KAlD9DJ,EAAA7D,KAAA,oBAoDcoD,EAAOhB,EAAQgB,KApD7B,CAAAS,EAAA7D,KAAA,eAAA6D,GAAAG,OAAA,kBAuDQ5B,EAAU,GAAIzD,GAAA,EAAJM,KAAqBmD,GAASgB,OAAMa,QAAQ,IAvD9D,YA0DUhB,EAAWkB,OAAQlB,EAAatJ,KAAKyK,SAASnB,IAE5CM,EAAMN,EAAWb,IAEnBmB,EA9DV,CAAAM,EAAA7D,KAAA,eAAA6D,GAAA7D,KAAA,GA+DkBrG,KAAK0K,iBAAiBjC,EAAQkC,KAAKC,GAAI5K,KAAKwJ,GAAQnE,gBA/DtE,aAAA6E,EAAAW,KAAA,CAAAX,EAAA7D,KAAA,YAgEgBoD,EAAOF,EAASjB,KAAKtI,MAAM4J,EAAKnB,GAhEhD,CAAAyB,EAAA7D,KAAA,eAAA6D,GAAAG,OAAA,kBAmEcZ,YAAgB3G,SAClB2G,EAAKlG,KAAK,SAAAuH,GACR,GAAMhB,GAAa,GAAI9E,GAAA,EAAJM,KAAqBmD,GAASgB,KAAMqB,IACvDf,GAAKnC,IAAImD,KAAKjB,MAGVA,EAAa,GAAI9E,GAAA,EAAJM,KAAqBmD,GAASgB,UACjDzJ,KAAK4H,IAAImD,KAAKjB,GA1E1B,SAAAI,EAAA7D,KAAA,iBAAA6D,EAAAC,KAAA,GAAAD,EAAAc,GAAAd,EAAA,YA+EMlK,KAAK4H,IAAIqD,IAAIC,QAAbhB,EAAAc,GA/EN,yBAAAd,GAAAiB,SAAA9B,EAAArJ,OAAA,iBAAA2I,QAAAzF,IAAA,mBAAA3B,MAAA,mBAAAmJ,GAAAU,EAAAC,GAAA,MAAAC,GAAA1I,MAAA5C,KAAA6C,WAAA,GAAAyI,GAAA7I,EAAA0G,mBAAAC,KAAA,QAAAmC,GAmF0BC,EAAQC,GAnFlC,MAAAtC,oBAAAc,KAAA,SAAAyB,GAAA,cAAAA,EAAAvB,KAAAuB,EAAArF,MAAA,aAAAqF,GAAArB,OAAA,SAoFWrK,KAAK4H,IAAI8C,iBAAiBc,EAAQC,GApF7C,wBAAAC,GAAAP,SAAAI,EAAAvL,QAAA,OAAA0K,QAAAxH,IAAA,WAAA3B,MAAA,SAuFYoK,GACR,MAAO,UAAAlD,GAAA,MAAWkD,GAAMnB,KAAK/B,EAAQgB,UAxFzCvG,IAAA,kBAAA3B,MAAA,SA2FmBkH,GACf,GAAM+B,GAAOxK,KAAK8H,aAAa0C,KAAK/B,EAAQgB,KAC5C,IAAKe,EAEL,MAAOA,GAAK,MA/FhBtH,IAAA,UAAA3B,MAAA,SAkGW+H,EAAY5G,EAAIjB,GACvBzB,KAAKwH,iBAAiBlB,MAAMgD,EAAY5G,EAAIjB,OAnGhDyB,IAAA,SAAA3B,MAAA,SAsGU+H,EAAY5G,EAAIjB,GACtBzB,KAAKyH,gBAAgBnB,MAAMgD,EAAY5G,EAAIjB,OAvG/CyB,IAAA,UAAA3B,MAAA,SA0GWkI,EAAMD,GACbxJ,KAAKoF,KAAKkB,KAAKkD,GACfxJ,KAAKwJ,GAAQpE,KAAOqE,KA5GxBvG,IAAA,qBAAA3B,MAAA,SA+GsBmB,EAAIjB,GACtBzB,KAAK0C,GAAI2C,gBAAqBrF,KAAKyB,KAAnC,IAA2CA,MAhH/CwD,GAAgCF,EAAA,GAoHnBG,EAAS,SAACoE,GAAD,MAAgB,UAAC9D,EAAQ/D,EAAMiF,GACnD,GAAMhE,GAAKgE,EAAWnF,KAEjBmB,GAAG2C,kBACN3C,EAAGkJ,eAAoBpG,EAAO/D,KAA9B,IAAsCA,GAGxC+D,EAAOyC,gBAAkBzC,EAAOyC,oBAChCzC,EAAOyC,gBAAgB3B,MACpBd,EAAON,QAASoE,EAAY5G,EAAIjB,OAIxB0D,EAAU,SAACmE,GAAD,MAAgB,UAAC9D,EAAQ/D,EAAMiF,GACpD,GAAMhE,GAAKgE,EAAWnF,KAEjBmB,GAAG2C,kBACN3C,EAAGkJ,eAAoBpG,EAAO/D,KAA9B,IAAsCA,GAGxC+D,EAAOyC,gBAAkBzC,EAAOyC,oBAChCzC,EAAOyC,gBAAgB3B,MACpBd,EAAOL,SAAUmE,EAAY5G,EAAIjB,OAIzB2D,EAAO,SAACqE,GAAD,MAAU,UAACjE,EAAQgE,GACrChE,EAAOyC,gBAAgB3B,MACpBd,EAAOqG,SAAUpC,EAAMD,OAIfnE,EAAkB,SAAC5D,GAAD,MAAU,UAAC+D,EAAQgE,GAChDhE,EAAOyC,gBAAgB3B,MAAMd,EAAOsG,oBAAqBtC,EAAQ/H,QFsQ7D,SAAS7B,EAAQD,EAASoB,GAEhC,YAIA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCALjFpD,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOoM,IACvF,IAAIxF,GAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MGra3gB6H,EH2aR,WGvaX,QAAAA,KAAyB,GAAZC,GAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAAAmB,GAAAhE,KAAA+L,GAAA/L,KAHzBoF,KAAOY,OAGkBhG,KAFzBiM,mBAAoB,EAGlBjM,KAAKgM,QAAUA,EHyhBjB,MAvGAzF,GAAawF,IACX7I,IAAK,WACL3B,MAAO,SGjbCqG,GACR,IAAKA,EAAO,KAAM,IAAIsE,OAAM,oCAE5B,KAAKlM,KAAKyB,KACR,KAAM,IAAIyK,OACR,+EAIJlM,MAAK4H,IAAMA,EACX5H,KAAKmM,cHobLjJ,IAAK,SACL3B,MAAO,WGjbP,IAAKvB,KAAK4H,IACR,KAAM,IAAIsE,OAAM,kCHsblBhJ,IAAK,WACL3B,MAAO,WAkCL,QAAS4K,KACP,MAAOhE,GAAKvF,MAAM5C,KAAM6C,WAlC1B,GAAIsF,GAAO1F,EAAkB0G,mBAAmBC,KAAK,QAASC,KAC5D,GAAI/B,GAAQtH,IAEZ,OAAOmJ,oBAAmBc,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAAS7D,MAC/B,IAAK,GACH,IG1bRrG,KAAKoM,gBH0b8B,CACzBlC,EAAS7D,KAAO,CAChB,OAIF,MADA6D,GAAS7D,KAAO,EG9bpBrG,KAAKqM,qBHicH,KAAK,GG/bb1K,OAAO2K,KAAKtM,KAAKoM,iBAAiBlE,QAAQ,SAAAzG,GACxC,GAAM8K,GAAMjF,EAAKM,IAAI4E,GAAGzK,IAAIN,GAAMF,OAEf,oBAARgL,IACTjF,EAAKM,IAAI4E,GAAGC,IAAIhL,EAAM6F,EAAK8E,gBAAgB3K,IAAOF,SHqc9C,KAAK,GACL,IAAK,MACH,MAAO2I,GAASiB,SAGrB9B,EAASrJ,QAOd,OAAOmM,QAGTjJ,IAAK,sBACL3B,MAAO,WA8BL,QAAS8K,KACP,MAAOjE,GAAMxF,MAAM5C,KAAM6C,WA9B3B,GAAIuF,GAAQ3F,EAAkB0G,mBAAmBC,KAAK,QAASmC,KAC7D,GAAI7D,GAAS1H,IAEb,OAAOmJ,oBAAmBc,KAAK,SAAmByB,GAChD,OACE,OAAQA,EAAUvB,KAAOuB,EAAUrF,MACjC,IAAK,GAGH,GGxdZrG,KAAKiM,mBAAoB,GAErBjM,KAAKiM,oBAAqBjM,KAAK4H,IAAI4E,GHsdmB,CAC5Cd,EAAUrF,KAAO,CACjB,OAGF,MAAOqF,GAAUrB,OAAO,UG1d3B,EH4dC,KAAK,GACH,MAAOqB,GAAUrB,OAAO,SG1d7B,GAAIvH,SAAQ,SAACC,GAClB2E,EAAKE,IAAIW,QAAQC,GAAG,WAAYzF,KH6dxB,KAAK,GACL,IAAK,MACH,MAAO2I,GAAUP,SAGtBI,EAAUvL,QAOf,OAAOqM,SAIJN,MAOH,SAASnM,EAAQD,EAASoB,GAEhC,YACqB,IAAI2L,GAAoC3L,EAAoB,GACtCA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,IAC7F3L,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,IAC7F3L,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,IAC7F3L,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,IAC7F3L,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,IAC7F3L,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,IAC7F3L,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+M,GAAqC,KAKlI,SAAS9M,EAAQD,EAASoB,GAEhC,YAIA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAH3F,GAAIwI,GAA0C5L,EAAoB,EACZA,GAAoBiB,EAAE2K,EAClE5L,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOiN,IAKvF,II5jBqBA,GACnB,QAAAA,GAAAzE,GAAoD,GAArCwC,GAAqCxC,EAArCwC,KAAMkC,EAA+B1E,EAA/B0E,QAASC,EAAsB3E,EAAtB2E,QAAsBC,EAAA5E,EAAbyC,KAAa5E,SAAA+G,EAAVhM,EAAAG,EAAAyL,EAAA,MAAUI,CAAA/I,GAAAhE,KAAA4M,GAClD5M,KAAK2K,KAAOA,EACZ3K,KAAK6M,QAAUA,EACf7M,KAAK8M,QAAUA,EACf9M,KAAK4K,GAAKA,IJ0kBR,SAAShL,EAAQD,EAASoB,GAEhC,YAGA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAN5c,GAAIuI,GAAyCjM,EAAoB,EACvDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOsN,IASvF,IK5lBqBA,GL4lBH,SAAUC,GK3lB1B,QAAAD,GAAA9E,GAAsC,GAAvBsB,GAAuBtB,EAAvBsB,KAAuB0D,EAAAhF,EAAjBoC,UAAiBvE,SAAAmH,IAAAnJ,GAAAhE,KAAAiN,EAAA,IAAA3F,GAAAlD,EAAApE,MAAAiN,EAAAnI,WAAAnD,OAAAwF,eAAA8F,IAAArK,MAAA5C,KAC3B6C,WAD2B,OAGhC4G,KACFnC,EAAKmC,KAAOA,EAAK2D,QAGnB9F,EAAKiD,UAAYA,EAPmBjD,EL+mBtC,MAnBA/C,GAAU0I,EAAaC,GAmBhBD,GKhnBgCD,EAAA,ILunBnC,SAASpN,EAAQD,GMznBvBC,EAAAD,QAAAE,QAAA,cN+nBM,SAASD,EAAQD,EAASoB,GAEhC,YACqB,IAAIsM,GAA2CtM,EAAoB,IAC/DuM,EAAsCvM,EAAoB,IAC1DwM,EAA6CxM,EAAoB,GACzDA,GAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAO0N,GAA4C,IAC5GtM,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAO2N,GAAuC,IAClGvM,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAO4N,GAA8C,KAO3I,SAAS3N,EAAQD,EAASoB,GAEhC,YAIA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAH3F,GAAIwI,GAA0C5L,EAAoB,EACZA,GAAoBiB,EAAE2K,EAClE5L,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO6N,IAKvF,IOtpBqBA,GACnB,QAAAA,GAAa/L,EAAMmJ,EAAIkC,GAAS9I,EAAAhE,KAAAwN,GAC9BxN,KAAKyB,KAAOA,EACZzB,KAAK4K,GAAKA,GAAM7J,EAAAG,EAAAyL,EAAA,MAChB3M,KAAKyN,SACLzN,KAAK0N,SAAWZ,QP8pBd,SAASlN,EAAQD,EAASoB,GAEhC,YASA,SAAS4M,GAAgBC,EAAK1K,EAAK3B,GAAiK,MAApJ2B,KAAO0K,GAAOjM,OAAOC,eAAegM,EAAK1K,GAAO3B,MAAOA,EAAOO,YAAY,EAAMD,cAAc,EAAM+C,UAAU,IAAkBgJ,EAAI1K,GAAO3B,EAAgBqM,EAE3M,QAASnL,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAZ3F,GAAI0J,GAA+C9M,EAAoB,GACnE+M,EAAmD/M,EAAoB,GACvEgN,EAAsChN,EAAoB,EACpDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOqO,IACvF,IAEIC,GAAQC,EAFR3H,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MQzqB3gB8J,GRsrBNE,EAAQD,EAAS,WQ5qB9B,QAAAD,KAAyB,GAAZhC,GAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAAAmB,GAAAhE,KAAAgO,GACvBhO,KAAKgM,QAAUA,EACfhM,KAAKmO,OAASH,EAAQI,OAAOC,cAC7BrO,KAAKsO,YAActC,EAAQsC,YR+5B7B,MA3OA/H,GAAayH,IACX9K,IAAK,WACL3B,MAAO,SQnrBCqG,GACR,IAAKA,EAAO,KAAM,IAAIsE,OAAM,oCAC5B,KAAKlM,KAAKyB,KACR,KAAM,IAAIyK,OAAM,mEAGlBlM,MAAK4H,IAAMA,EACX5H,KAAKuO,YACLvO,KAAKmO,OAASH,EAAQI,OAAOI,WAC7BxO,KAAKkF,YRwrBLhC,IAAK,SACL3B,MAAO,WQprBP,IAAKvB,KAAK4H,IAAO,KAAM,IAAIsE,OAAM,kCR0rBjChJ,IAAK,UACL3B,MAAO,SAAiB4G,GQxrBiB,GAAhCwC,GAAgCxC,EAAhCwC,KAAMlB,EAA0BtB,EAA1BsB,KAAMoD,EAAoB1E,EAApB0E,QAAStC,EAAWpC,EAAXoC,OAC9B,KAAKd,EAEH,WADAzJ,MAAK4H,IAAIqD,IAAIC,QAAQ,wCAIvB,IAAMzC,GAAU,GAAIoF,GAAA,GAAclD,OAAMlB,OAAMoD,UAAStC,UAASuC,QAAS9M,KAAKyB,MAC9EzB,MAAK4H,IAAIW,QAAQkG,KAAK,kBAAmBhG,MRgsBzCvF,IAAK,iBACL3B,MAAO,SAAwB6G,GQ9rBQ,GAAvBuC,GAAuBvC,EAAvBuC,KAAMlB,EAAiBrB,EAAjBqB,KAAMoD,EAAWzE,EAAXyE,OAC5B,OAAKpD,IAKLA,EAAOzJ,KAAK4H,IAAI8G,sBAAsBjF,OACtCzJ,MAAK2O,SAAUhE,OAAMlB,OAAMoD,UAAStC,SAAS,SAL3CvK,MAAK4H,IAAIqD,IAAIC,QAAQ,4CR0sBvBhI,IAAK,QACL3B,MAAO,SAAe2H,GQnsBE,GAAjByB,GAAiBzB,EAAjByB,KAAMkC,EAAW3D,EAAX2D,QACPpE,EAAU,GAAIqF,GAAA,GAClBnD,OACAkC,UACAC,QAAS9M,KAAKyB,KACdmN,KAAMd,EAAA,EAAgBe,MAAMC,OAG9B9O,MAAK4H,IAAIW,QAAQkG,KAAK,QAAShG,MRysB/BvF,IAAK,QACL3B,MAAO,SAAe+J,GQvsBE,GAAjBX,GAAiBW,EAAjBX,KAAMkC,EAAWvB,EAAXuB,QACPpE,EAAU,GAAIqF,GAAA,GAClBnD,OACAkC,UACAC,QAAS9M,KAAKyB,KACdmN,KAAMd,EAAA,EAAgBe,MAAME,OAG9B/O,MAAK4H,IAAIW,QAAQkG,KAAK,QAAShG,MR6sB/BvF,IAAK,OACL3B,MAAO,SQ3sBHkH,GACJzI,KAAK4H,IAAIqD,IAAIC,QAAQzC,EAAQgB,SR8sB7BvG,IAAK,OACL3B,MAAO,WQ3sBPvB,KAAKgP,UR+sBL9L,IAAK,OACL3B,MAAO,WQ5sBPvB,KAAK4H,IAAIqD,IAAIC,QAAQ,kDRgtBrBhI,IAAK,sBACL3B,MAAO,SQ9sBYE,GAEnB,MADAzB,MAAK4H,IAAIqD,IAAIC,QAAQ,wDACdzJ,KRitBPyB,IAAK,sBACL3B,MAAO,SQ/sBYE,GAEnB,MADAzB,MAAK4H,IAAIqD,IAAIC,QAAQ,uDACdzJ,KRktBPyB,IAAK,kBACL3B,MAAO,WQ/sBP,YRmtBA2B,IAAK,YACL3B,MAAO,WAiCL,QAASgN,KACP,MAAOU,GAAMrM,MAAM5C,KAAM6C,WAjC3B,GAAIoM,GAAQxM,EAAkB0G,mBAAmBC,KAAK,QAASC,KAC7D,MAAOF,oBAAmBc,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAAS7D,MAC/B,IAAK,GAEH,MADA6D,GAAS7D,KAAO,EQttBtBrG,KAAK4H,IAAIyE,qBRytBL,KAAK,GAGH,GQ3tBZrM,KAAKkP,aAAelP,KAAK4H,IAAIuH,MAAMnP,KAAKyB,OACpCzB,KAAKkP,aR0tB2B,CACtBhF,EAAS7D,KAAO,CAChB,OAGF,MAAO6D,GAASG,OAAO,SAEzB,KAAK,GQ7tBfrK,KAAK4H,IAAIuH,MAAMnP,KAAKyB,SACpBzB,KAAKkP,aAAelP,KAAK4H,IAAIuH,MAAMnP,KAAKyB,MACxCzB,KAAK4H,IAAI4E,GAAG4C,ORiuBF,KAAK,GACL,IAAK,MACH,MAAOlF,GAASiB,SAGrB9B,EAASrJ,QAOd,OAAOuO,QAGTrL,IAAK,WACL3B,MAAO,WQ5uBP,MADAvB,MAAK4H,IAAIqD,IAAIC,QAAQ,6CACd,KRivBPhI,IAAK,UACL3B,MAAO,WA+DL,QAAS8N,GAAQvG,EAAKC,EAAKC,GACzB,MAAOsG,GAAM1M,MAAM5C,KAAM6C,WA/D3B,GAAIyM,GAAQ7M,EAAkB0G,mBAAmBC,KAAK,QAASmC,GQhvBrDgE,EAAeC,GRivBvB,GACI/B,GAAO9C,EQlvB6B8E,ERivBtB5M,UAAUiB,QAAU,GAAsBkC,SAAjBnD,UAAU,MAAwBA,UAAU,EAEvF,OAAOsG,oBAAmBc,KAAK,SAAmByB,GAChD,OACE,OAAQA,EAAUvB,KAAOuB,EAAUrF,MACjC,IAAK,GAEH,MADAqF,GAAUrF,KAAO,EQtvBvBrG,KAAK4H,IAAIyE,qBRyvBL,KAAK,GAUH,GQlwBPkD,GACHvP,KAAK4H,IAAIvE,MAAT,WAA0BrD,KAAKyB,KAA/B,yCAEG+N,GACHxP,KAAK4H,IAAIsD,QAAT,WAA4BlL,KAAKyB,KAAjC,2CAGIgM,EAAQzN,KAAK0P,SAASH,EAAeE,IACvCzP,KAAKkP,aR0vB2B,CACtBxD,EAAUrF,KAAO,EACjB,OAGF,IQ9vBNrG,KAAKkP,aAAaK,GR8vB2B,CACrC7D,EAAUrF,KAAO,EACjB,OAWF,MQ1wBJoH,KACFzN,KAAKkP,aAAaK,GAAe9B,MAAQA,GAGvC+B,IACFxP,KAAK4H,IAAIuH,MAAMQ,SAAS3P,KAAKkP,aAAaK,GAAeK,OAAOnO,KAAO+N,GRqwB1D9D,EAAUrB,OAAO,SQlwBzBrK,KAAK4H,IAAIuH,MAAMQ,SAAS3P,KAAKkP,aAAaK,GAAeK,ORowB1D,KAAK,IASH,MQ1wBJjF,GAAO,GAAIoD,GAAA,EAAKyB,GACtB7E,EAAK+C,SAALC,KAAkB3N,KAAKyB,MAAQ+J,OAAQ+D,IACvCvP,KAAKkP,aAAaK,IAAkB9N,KAAM+N,EACNI,MAAOjF,EAAKC,GACZ6C,MAAOA,OAC3CzN,KAAK4H,IAAIuH,MAAMQ,SAAShF,EAAKC,IAAMD,EACnC3K,KAAK4H,IAAI4E,GAAG4C,QRowBK1D,EAAUrB,OAAO,SQnwB3BM,ERqwBC,KAAK,IACH,MAAOe,GAAUrB,OAAO,SQnwB7B,GAAI0D,GAAA,EAAKyB,EACAD,EADT5B,KAEW3N,KAAKyB,KAAO8N,IRmwBpB,KAAK,IACL,IAAK,MACH,MAAO7D,GAAUP,SAGtBI,EAAUvL,QAOf,OAAOqP,SAIJrB,KACJC,EQ56BIG,QACLC,cAAe,EACfG,WAAY,EACZqB,UAAW,EACXC,aAAc,EACdC,aAAc,EACdC,MAAO,GR66BR9B,IAKG,SAAStO,EAAQD,EAASoB,GAEhC,YAKA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAR5c,GAAIuI,GAAyCjM,EAAoB,EACvDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOsQ,IACvF,IAAIhC,GAAQC,ES/7BS+B,GTy8BE/B,EAAQD,EAAS,SAAUf,GSn8BhD,QAAA+C,GAAA9H,GAAuB,GAARyG,GAAQzG,EAARyG,IAAQ5K,GAAAhE,KAAAiQ,EAAA,IAAA3I,GAAAlD,EAAApE,MAAAiQ,EAAAnL,WAAAnD,OAAAwF,eAAA8I,IAAArN,MAAA5C,KACZ6C,WADY,OAErByE,GAAKsH,KAAOA,EAFStH,ETi9BvB,MAbA/C,GAAU0L,EAAiB/C,GAapB+C,GSv9BoCjD,EAAA,GTw9BiBiB,ESv9BrDY,OACLC,MAAO,EACPC,MAAO,GTw9BRb,IAKG,SAAStO,EAAQD,EAASoB,GAEhC,YACqB,IAAImP,GAAyCnP,EAAoB,GAC7DoP,EAA0CpP,EAAoB,GACxDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+N,KACtD3M,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOuQ,GAA0C,GUr+B5H,IAAMxC,GAAWyC,GV6+BlB,SAASvQ,EAAQD,EAASoB,GAEhC,YACqB,IAAIiM,GAAyCjM,EAAoB,GAC7DqP,EAA0CrP,EAAoB,GAC9DsP,EAAsCtP,EAAoB,EAClDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOqN,GAA0C,IAClGjM,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOyQ,GAA2C,IACnGrP,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO0Q,GAAuC,KAO1H,SAASzQ,EAAQD,EAASoB,GAEhC,YACqB,IAAIuP,GAAwCvP,EAAoB,GAC5DwP,EAAuCxP,EAAoB,IAC3DyP,EAAsCzP,EAAoB,IAC1D0P,EAAsC1P,EAAoB,GAC1D2P,EAAyC3P,EAAoB,EACvDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOgR,KACtD5P,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO2Q,GAAyC,IACjGvP,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO4Q,GAAwC,IAChGxP,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO6Q,GAAuC,IAC/FzP,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8Q,GAAuC,IAC/F1P,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8Q,GAAuC,IAC/F1P,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8Q,GAAuC,IAC/F1P,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8Q,GAAuC,IAC/F1P,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8Q,GAAuC,GWxgCzH,IAAME,GAAUD,GXohCjB,SAAS9Q,EAAQD,GY3hCvBC,EAAAD,QAAAE,QAAA,kBZiiCM,SAASD,EAAQD,GajiCvBC,EAAAD,QAAAE,QAAA,WbuiCM,SAASD,EAAQD,GcviCvBC,EAAAD,QAAAE,QAAA,iBd6iCM,SAASD,EAAQD,Ge7iCvBC,EAAAD,QAAAE,QAAA,QfmjCM,SAASD,EAAQD,GgBnjCvBC,EAAAD,QAAAE,QAAA,ehByjCM,SAASD,EAAQD,GiBzjCvBC,EAAAD,QAAAE,QAAA,8BjB+jCM,SAASD,EAAQD,GkB/jCvBC,EAAAD,QAAAE,QAAA,SlBqkCM,SAASD,EAAQD,EAASoB,GAEhC,YACqB,IAAI6P,GAAuC7P,EAAoB,GACnDA,GAAoBS,EAAE7B,EAAS,QAAS,WAAa,MAAOiR,GAAwC,KAK/H,SAAShR,EAAQD,EAASoB,GAEhC,YASA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAd5c,GAAIoM,GAAyC9P,EAAoB,IAC7D+P,EAAiD/P,EAAoBiB,EAAE6O,GACvEX,EAAyCnP,EAAoB,EACvDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOoR,IACvF,IAAIxK,GAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MAE5hB2C,EAAO,QAAS9E,GAAII,EAAQC,EAAU0E,GAA2B,OAAX3E,IAAiBA,EAAS4E,SAAS1E,UAAW,IAAI2E,GAAOrF,OAAOsF,yBAAyB9E,EAAQC,EAAW,IAAa4D,SAATgB,EAAoB,CAAE,GAAIE,GAASvF,OAAOwF,eAAehF,EAAS,OAAe,QAAX+E,EAAmB,OAAkCnF,EAAImF,EAAQ9E,EAAU0E,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKzF,KAAgB,IAAIG,GAASsF,EAAKjF,GAAK,IAAeiE,SAAXtE,EAA4C,MAAOA,GAAON,KAAK0F,ImBnlCtdkK,EAAQ,QAERC,GACJ,OACA,OACA,KAGmBF,EnB6lCF,SAAUG,GmB1lC3B,QAAAH,KAAe/M,EAAAhE,KAAA+Q,EAAA,IAAAzJ,GAAAlD,EAAApE,MAAA+Q,EAAAjM,WAAAnD,OAAAwF,eAAA4J,IAAA3P,KAAApB,MAAA,OAAAsH,GAFf7F,KAAO,QAIL6F,EAAK6J,GAAKL,EAAAM,EAASC,iBACjBC,MAAO3I,QAAQ4I,MACfC,OAAQ7I,QAAQ8I,SAJLnK,EnB4qCf,MAjFA/C,GAAUwM,EAAcG,GAiBxB3K,EAAawK,IACX7N,IAAK,SACL3B,MAAO,WA0CL,QAASmQ,KACP,MAAOvJ,GAAKvF,MAAM5C,KAAM6C,WA1C1B,GAAIsF,GAAO1F,EAAkB0G,mBAAmBC,KAAK,QAASC,KAC5D,GAAI3B,GAAS1H,IAEb,OAAOmJ,oBAAmBc,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAAS7D,MAC/B,IAAK,GAEH,MADA6D,GAAS7D,KAAO,EmB5mCtBrG,KAAK4H,IAAIyE,qBnB+mCL,KAAK,GAEH,MADAnC,GAAS7D,KAAO,EmB/mCVrG,KAAKqP,QAAQ,QAAS,QnBknC9B,KAAK,GmBlnCfrP,KAAK2K,KnBmnCmBT,EAASW,KmBlnCjC7K,KAAKmR,GAAGQ,SAAS,SAAU,SAACC,GACtBX,EAAcY,SAASD,IACzBlK,EAAKE,IAAI4E,GAAG4C,QAAQ7L,KAAK,iBAAMoF,SAAQmJ,SAGzCjL,EAAAkK,EAAA1O,UAAAyC,WAAAnD,OAAAwF,eAAA4J,EAAA1O,WAAA,UAAAqF,GAAAtG,KAAAsG,GACE+B,KAAMmI,EACN/E,QAASmE,EACTrG,KAAMjD,EAAKiD,OAGbjD,EAAKgK,UnBynCG,KAAK,GACL,IAAK,MACH,MAAOxH,GAASiB,SAGrB9B,EAASrJ,QAOd,OAAO0R,QAGTxO,IAAK,WACL3B,MAAO,SmBroCCqG,GACRf,EAAAkK,EAAA1O,UAAAyC,WAAAnD,OAAAwF,eAAA4J,EAAA1O,WAAA,WAAArC,MAAAoB,KAAApB,KAAe4H,GACf5H,KAAK0R,SACL1R,KAAKmO,OAAS+B,EAAA,EAAQ9B,OAAOyB,anBwoC7B3M,IAAK,sBACL3B,MAAO,WmBpoCP,MAAOvB,MAAK2K,KAAKC,OnByoCZmG,GmB/qCiCb,EAAA,InBsrCpC,SAAStQ,EAAQD,EAASoB,GAEhC,YAgBA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAflb,GAAI8O,GAAuChR,EAAoB,IAC3DiR,EAA+CjR,EAAoBiB,EAAE+P,GACrEE,EAAsClR,EAAoB,IAC1DmR,EAA8CnR,EAAoBiB,EAAEiQ,GACpEE,EAAyCpR,EAAoB,IAC7DqR,EAAiDrR,EAAoBiB,EAAEmQ,GACvEE,EAA8CtR,EAAoB,IAClEuR,EAAsDvR,EAAoBiB,EAAEqQ,EACtEtR,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO4S,KACxDxR,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO6S,KACxDzR,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO8S,KACxD1R,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOyP,KACxDrO,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+S,KACxD3R,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOgT,KACxD5R,EAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOiT,IoB9sChF,IAAML,GAAc,SAAAM,GACzB,MAAO,UAAAC,GACL,IAAKA,EAAO,QACZ,IAAMC,GAAYF,EAAOG,QAAQF,GAC3BlF,EAAMqF,KAAKC,MAAMH,EACvB,OAAOnF,KAIE4E,EAAY,SAAAK,GACvB,MAAO,UAAAjF,GACL,GAAMkF,GAAMG,KAAKE,UAAUvF,GACrBwF,EAAYP,EAAOQ,QAAQP,EACjC,OAAOM,KAIEX,EAAO,SAACa,GACnB,MAAO,UAACC,EAAMhB,GACZ,MAAO,IAAIzP,SAAQ,SAACC,EAASC,GAC3BsQ,EAASC,GAAMhQ,KAAK,SAAAiQ,GAClB,IACEzQ,EAAQwP,EAAYiB,IACpB,MAAOC,GACPzQ,EAAOyQ,UAOJrE,EAAQ,SAAAsE,GACnB,MAAO,UAACH,EAAM3F,EAAK4E,GACjB,MAAO,IAAI1P,SAAQ,SAACC,EAASC,GAC3B,IACE,GAAMwQ,GAAOhB,EAAU5E,EACvB8F,GAAUH,EAAMC,GAAMjQ,KAAKR,EAASC,GACpC,MAAOyQ,GACPzQ,EAAOyQ,QAMFf,EAAY,SAACa,GACxB,MAAO,IAAIzQ,SAAQ,SAACC,EAASC,GAC3BoP,EAAAhB,EAAGuC,WAAWJ,EAAM,SAAC/P,GACnB,MAAIA,GAAcR,EAAOQ,OACzB4O,GAAAhB,EAAGkC,SAASC,EAAM,OAAQ,SAAC/P,EAAKgQ,GAC9B,MAAIhQ,GAAcR,EAAOQ,GAClBT,EAAQyQ,UAMVb,EAAa,SAACY,EAAMC,GAC/B,MAAO,IAAI1Q,SAAQ,SAACC,EAASC,GAC3BoP,EAAAhB,EAAGuC,WAAWJ,EAAM,SAAC/P,GACnB,MAAIA,GAAcR,EAAOQ,OACzB4O,GAAAhB,EAAGsC,UAAUH,EAAMC,EAAM,OAAQ,SAAChQ,GAChC,MAAIA,GAAcR,EAAOQ,GAClBT,EAAQyQ,UAMvBZ,EAAA,cAAAzK,GAAA1F,EAAA0G,mBAAAC,KAAO,QAAAC,GAAAjB,GAAA,GAAAyK,GAAAe,EAAApH,EAAqB+G,EAArBnL,EAAqBmL,KAAMrQ,EAA3BkF,EAA2BlF,IAA3B2Q,EAAAzL,EAAgCkL,WAAhCtN,SAAA6N,EAAyCnB,EAAzCmB,EAAAC,EAAA1L,EAAoDsL,YAApD1N,SAAA8N,EAA8DnB,EAA9DmB,CAAA,OAAA3K,oBAAAc,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA7D,MAAA,aACCwM,GAAS,GAAIb,GAAAZ,EAAOlO,GAAOzB,MAC3BmS,EAASL,aAAkB9R,KAAlB,QAFVyI,EAAA7D,KAAA,EAIY,GAAI6L,GAAAd,EAAIwC,GACvBG,SACEtB,KAAMA,EAAKa,GACXlE,MAAOA,EAAMsE,IAEfM,QACEzB,YAAaA,EAAYM,GACzBL,UAAWA,EAAUK,KAXpB,cAICrG,GAJDtC,EAAAW,KAeL2B,EAAGyH,EAAEC,MAAM5B,EAAAlB,GAfNlH,EAAAG,OAAA,SAgBEmC,EAhBF,wBAAAtC,GAAAiB,SAAA9B,EAAArJ,QAAP,iBAAA6I,GAAA,MAAAV,GAAAvF,MAAA5C,KAAA6C,gBpBixCM,SAASjD,EAAQD,EAASoB,GAEhC,YAGA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAN5c,GAAIM,GAAwChE,EAAoB,EACtDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOwU,IASvF,IqBr2CqBA,GrBq2CH,SAAU9M,GAG1B,QAAS8M,KAGP,MAFAnQ,GAAgBhE,KAAMmU,GAEf/P,EAA2BpE,MAAOmU,EAAYrP,WAAanD,OAAOwF,eAAegN,IAAcvR,MAAM5C,KAAM6C,YAGpH,MARA0B,GAAU4P,EAAa9M,GAQhB8M,GqB92CgCpP,EAAA,IrBq3CnC,SAASnF,EAAQD,EAASoB,GAEhC,YAGA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAN5c,GAAIM,GAAwChE,EAAoB,EACtDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOyU,IASvF,IsBl4CqBA,GtBk4CJ,SAAU/M,GAGzB,QAAS+M,KAGP,MAFApQ,GAAgBhE,KAAMoU,GAEfhQ,EAA2BpE,MAAOoU,EAAWtP,WAAanD,OAAOwF,eAAeiN,IAAaxR,MAAM5C,KAAM6C,YAGlH,MARA0B,GAAU6P,EAAY/M,GAQf+M,GsB34C+BrP,EAAA,ItBk5ClC,SAASnF,EAAQD,EAASoB,GAEhC,YAOA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAEje,QAAS4P,GAA0B7O,EAAQpD,EAAUkS,EAAY5N,EAAY6N,GAC3E,GAAIvN,KAyBJ,OAxBArF,QAAkB,KAAE+E,GAAYwB,QAAQ,SAAUhF,GAChD8D,EAAK9D,GAAOwD,EAAWxD,KAEzB8D,EAAKlF,aAAekF,EAAKlF,WACzBkF,EAAKnF,eAAiBmF,EAAKnF,cAEvB,SAAWmF,IAAQA,EAAKwN,eAC1BxN,EAAKpC,UAAW,GAGlBoC,EAAOsN,EAAWG,QAAQC,UAAUC,OAAO,SAAU3N,EAAM4N,GACzD,MAAOA,GAAUpP,EAAQpD,EAAU4E,IAASA,GAC3CA,GAECuN,GAAgC,SAArBvN,EAAKwN,cAClBxN,EAAKzF,MAAQyF,EAAKwN,YAAcxN,EAAKwN,YAAYpT,KAAKmT,GAAW,OACjEvN,EAAKwN,YAAcxO,QAGI,SAArBgB,EAAKwN,cACP7S,OAA4B,eAAE6D,EAAQpD,EAAU4E,GAChDA,EAAO,MAGFA,EAtCY,GAAI6N,GAAsC9T,EAAoB,EACpDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOmV,IACvF,IAEIC,GAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAsBnH,EAFxD1H,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MuBv5C1hBmR,GACJ,KACA,QACA,MACA,YACA,KACA,OAGIC,GACJ,UACA,UACA,MACA,QACA,SACA,OAGIC,EAAc,SAAClU,GAAD,MAAOgU,GAAUxD,SAASxQ,EAAEoI,KAAK+L,gBAC/CC,EAAiB,SAACpU,GAAD,MAAOiU,GAAUzD,SAASxQ,EAAEoI,KAAK+L,gBAE3CV,GAAbC,EAGGhU,EAAAG,EAAA2T,EAAA,GAAK,+CAHRG,EAIGjU,EAAAG,EAAA2T,EAAA,GAAgB,aAJnBI,EAKGlU,EAAAG,EAAA2T,EAAA,GAAOU,GALVL,EAWGnU,EAAAG,EAAA2T,EAAA,GAAK,6BAXRM,EAYGpU,EAAAG,EAAA2T,EAAA,GAAgB,aAZnBO,EAaGrU,EAAAG,EAAA2T,EAAA,GAAOY,GAbVxH,EAAA,SAAAyH,GAAA,QAAAZ,KAAA,GAAA3M,GAAA+F,EAAA5G,EAAAqO,CAAA3R,GAAAhE,KAAA8U,EAAA,QAAAc,GAAA/S,UAAAiB,OAAAuE,EAAA1E,MAAAiS,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAAxN,EAAAwN,GAAAhT,UAAAgT,EAAA,OAAA3H,GAAA5G,EAAAlD,EAAApE,MAAAmI,EAAA2M,EAAAhQ,WAAAnD,OAAAwF,eAAA2N,IAAA1T,KAAAwB,MAAAuF,GAAAnI,MAAA4I,OAAAP,KAAAf,EACE7F,KAAO,WADTkU,EAAAzH,EAAA9J,EAAAkD,EAAAqO,GAAA,MAAApR,GAAAuQ,EAAAY,GAAAnP,EAAAuO,IAAA5R,IAAA,WAAA3B,MAAA,SAMY0S,EAAGxL,GACX,GAAMqN,GAAiBT,EAAUU,SAASC,KAAKC,SAAWZ,EAAUvR,QACpE,OAAUgS,GAAV,KAA6BrN,EAAQkC,KAAKlJ,KAA1C,OARJyB,IAAA,WAAA3B,MAAA,SAcY0S,EAAGxL,GACX,GAAMyN,GAAiBZ,EAAUS,SAASC,KAAKC,SAAWX,EAAUxR,QACpE,OAAUoS,GAAV,KAA6BzN,EAAQkC,KAAKlJ,KAA1C,QAhBJqT,GAA+BD,EAAA,GAA/BR,EAAApG,EAAA5L,UAAA,YAAA0S,EAAAC,EAAAC,GAAAtT,OAAAsF,yBAAAgH,EAAA5L,UAAA,YAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,YAAA6S,EAAAC,EAAAC,GAAAzT,OAAAsF,yBAAAgH,EAAA5L,UAAA,YAAA4L,EAAA5L,WAAA4L,IvB09CM,SAASrO,EAAQD,EAASoB,GAEhC,YASA,SAASiD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAEje,QAAS4P,GAA0B7O,EAAQpD,EAAUkS,EAAY5N,EAAY6N,GAC3E,GAAIvN,KAyBJ,OAxBArF,QAAkB,KAAE+E,GAAYwB,QAAQ,SAAUhF,GAChD8D,EAAK9D,GAAOwD,EAAWxD,KAEzB8D,EAAKlF,aAAekF,EAAKlF,WACzBkF,EAAKnF,eAAiBmF,EAAKnF,cAEvB,SAAWmF,IAAQA,EAAKwN,eAC1BxN,EAAKpC,UAAW,GAGlBoC,EAAOsN,EAAWG,QAAQC,UAAUC,OAAO,SAAU3N,EAAM4N,GACzD,MAAOA,GAAUpP,EAAQpD,EAAU4E,IAASA,GAC3CA,GAECuN,GAAgC,SAArBvN,EAAKwN,cAClBxN,EAAKzF,MAAQyF,EAAKwN,YAAcxN,EAAKwN,YAAYpT,KAAKmT,GAAW,OACjEvN,EAAKwN,YAAcxO,QAGI,SAArBgB,EAAKwN,cACP7S,OAA4B,eAAE6D,EAAQpD,EAAU4E,GAChDA,EAAO,MAGFA,EAxCY,GAAI6N,GAAsC9T,EAAoB,EACpDA,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAOwW,IACvF,IAIIpB,GAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAsBnH,EAJxDvI,EAAiB,WAAc,QAASC,GAAcjC,EAAKxC,GAAK,GAAI0E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAKC,MAAW,KAAM,IAAK,GAAiCC,GAA7BC,EAAKxC,EAAIyC,OAAOC,cAAmBP,GAAMI,EAAKC,EAAGG,QAAQ/C,QAAoBsC,EAAKU,KAAKL,EAAG1E,QAAYL,GAAK0E,EAAK9B,SAAW5C,GAA3D2E,GAAK,IAAoE,MAAOrC,GAAOsC,GAAK,EAAMC,EAAKvC,EAAO,QAAU,KAAWqC,GAAMK,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIJ,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUlC,EAAKxC,GAAK,GAAIyC,MAAMC,QAAQF,GAAQ,MAAOA,EAAY,IAAIyC,OAAOC,WAAYzE,QAAO+B,GAAQ,MAAOiC,GAAcjC,EAAKxC,EAAa,MAAM,IAAIiD,WAAU,4DAEllBoC,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MwBt/CnhBiS,GAAbpB,EAGGhU,EAAAG,EAAA2T,EAAA,GAAK,4BAHRG,EAIGjU,EAAAG,EAAA2T,EAAA,GAAgB,QAJnBI,EAKGlU,EAAAG,EAAA2T,EAAA,GAAQ,WALXK,EAaGnU,EAAAG,EAAA2T,EAAA,GAAK,8DAbRM,EAcGpU,EAAAG,EAAA2T,EAAA,GAAgB,QAdnBO,EAeGrU,EAAAG,EAAA2T,EAAA,GAAQ,iBAfX5G,EAAA,SAAAyH,GAAA,QAAAS,KAAA,GAAAhO,GAAA+F,EAAA5G,EAAAqO,CAAA3R,GAAAhE,KAAAmW,EAAA,QAAAP,GAAA/S,UAAAiB,OAAAuE,EAAA1E,MAAAiS,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAAxN,EAAAwN,GAAAhT,UAAAgT,EAAA,OAAA3H,GAAA5G,EAAAlD,EAAApE,MAAAmI,EAAAgO,EAAArR,WAAAnD,OAAAwF,eAAAgP,IAAA/U,KAAAwB,MAAAuF,GAAAnI,MAAA4I,OAAAP,KAAAf,EACE7F,KAAO,OADTkU,EAAAzH,EAAA9J,EAAAkD,EAAAqO,GAAA,MAAApR,GAAA4R,EAAAT,GAAAnP,EAAA4P,IAAAjT,IAAA,aAAA3B,MAAA,WAOI,MAAOvB,MAAK4H,IAAI+I,QACCyF,OAAO,SAAA7T,GAAA,MAAKA,GAAE6C,MAAQ7C,EAAE6C,KAAKtB,OAAS,IACtC6D,IAAI,SAAApF,GAAA,MAAKA,GAAE8T,WAAWC,KAAK,WAC3BA,KAAK,SAV1BpT,IAAA,mBAAA3B,MAAA,SAAA6G,GAgBgC,GAAAc,GAAAxD,EAAA0C,EAAA,GAATmO,EAASrN,EAAA,EAC5B,OAAOlJ,MAAK4H,IAAI+I,QACCyF,OAAO,SAAA7T,GAAA,MAAKA,GAAE6C,MAAQ7C,EAAE6C,KAAKtB,OAAS,IACtC6D,IAAI,SAAApF,GACH,MAAOA,GAAE8T,WAAWD,OAAO,SAAAtL,GACzB,MAAOA,GAAE0K,cAAcgB,QAAQD,EAAOf,oBACrCc,KAAK,WAETA,KAAK,UAxB1BH,GAA0BtB,EAAA,GAA1BR,EAAApG,EAAA5L,UAAA,cAAA0S,EAAAC,EAAAC,GAAAtT,OAAAsF,yBAAAgH,EAAA5L,UAAA,cAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,oBAAA6S,EAAAC,EAAAC,GAAAzT,OAAAsF,yBAAAgH,EAAA5L,UAAA,oBAAA4L,EAAA5L,WAAA4L,IxB+kDM,SAASrO,EAAQD,EAASoB,GAEhC,YAaA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMjD,GAAQ,IAAKiD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOlD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BiD,EAAPjD,EAElO,QAASmD,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASnC,UAAYV,OAAO+C,OAAOD,GAAcA,EAAWpC,WAAasC,aAAepD,MAAOiD,EAAU1C,YAAY,EAAO8C,UAAU,EAAM/C,cAAc,KAAe4C,IAAY9C,OAAOkD,eAAiBlD,OAAOkD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAEje,QAAS4P,GAA0B7O,EAAQpD,EAAUkS,EAAY5N,EAAY6N,GAC3E,GAAIvN,KAyBJ,OAxBArF,QAAkB,KAAE+E,GAAYwB,QAAQ,SAAUhF,GAChD8D,EAAK9D,GAAOwD,EAAWxD,KAEzB8D,EAAKlF,aAAekF,EAAKlF,WACzBkF,EAAKnF,eAAiBmF,EAAKnF,cAEvB,SAAWmF,IAAQA,EAAKwN,eAC1BxN,EAAKpC,UAAW,GAGlBoC,EAAOsN,EAAWG,QAAQC,UAAUC,OAAO,SAAU3N,EAAM4N,GACzD,MAAOA,GAAUpP,EAAQpD,EAAU4E,IAASA,GAC3CA,GAECuN,GAAgC,SAArBvN,EAAKwN,cAClBxN,EAAKzF,MAAQyF,EAAKwN,YAAcxN,EAAKwN,YAAYpT,KAAKmT,GAAW,OACjEvN,EAAKwN,YAAcxO,QAGI,SAArBgB,EAAKwN,cACP7S,OAA4B,eAAE6D,EAAQpD,EAAU4E,GAChDA,EAAO,MAGFA,EA9CY,GAAI6N,GAAsC9T,EAAoB,GAC1D0V,EAA0C1V,EAAoB,EACZA,GAAoBiB,EAAEyU,EAClE1V,GAAoBS,EAAE7B,EAAS,IAAK,WAAa,MAAO+W,IACvF,IAMI3B,GAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOuB,EAAOC,EAAOC,EAAOC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAuB9J,EAAQ+J,EAAS9J,EAN9OxI,EAAiB,WAAc,QAASC,GAAcjC,EAAKxC,GAAK,GAAI0E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAKC,MAAW,KAAM,IAAK,GAAiCC,GAA7BC,EAAKxC,EAAIyC,OAAOC,cAAmBP,GAAMI,EAAKC,EAAGG,QAAQ/C,QAAoBsC,EAAKU,KAAKL,EAAG1E,QAAYL,GAAK0E,EAAK9B,SAAW5C,GAA3D2E,GAAK,IAAoE,MAAOrC,GAAOsC,GAAK,EAAMC,EAAKvC,EAAO,QAAU,KAAWqC,GAAMK,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIJ,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUlC,EAAKxC,GAAK,GAAIyC,MAAMC,QAAQF,GAAQ,MAAOA,EAAY,IAAIyC,OAAOC,WAAYzE,QAAO+B,GAAQ,MAAOiC,GAAcjC,EAAKxC,EAAa,MAAM,IAAIiD,WAAU,4DAEllBoC,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,MAE5hB2C,EAAO,QAAS9E,GAAII,EAAQC,EAAU0E,GAA2B,OAAX3E,IAAiBA,EAAS4E,SAAS1E,UAAW,IAAI2E,GAAOrF,OAAOsF,yBAAyB9E,EAAQC,EAAW,IAAa4D,SAATgB,EAAoB,CAAE,GAAIE,GAASvF,OAAOwF,eAAehF,EAAS,OAAe,QAAX+E,EAAmB,OAAkCnF,EAAImF,EAAQ9E,EAAU0E,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKzF,KAAgB,IAAIG,GAASsF,EAAKjF,GAAK,IAAeiE,SAAXtE,EAA4C,MAAOA,GAAON,KAAK0F,IyBzlD/c4P,GAAb3B,EA2BGhU,EAAAG,EAAA2T,EAAA,GAAK;AA3BRG,EA4BGjU,EAAAG,EAAA2T,EAAA,GAAgB,UA5BnBI,EA6BGlU,EAAAG,EAAA2T,EAAA,GAAQ,uCA7BXK,EAyCGnU,EAAAG,EAAA2T,EAAA,GAAK,kEAzCRM,EA0CGpU,EAAAG,EAAA2T,EAAA,GAAgB,mBA1CnBO,EA2CGrU,EAAAG,EAAA2T,EAAA,GAAQ,yCA3CX8B,EA4DG5V,EAAAG,EAAA2T,EAAA,GAAK,+DA5DR+B,EA6DG7V,EAAAG,EAAA2T,EAAA,GAAgB,mBA7DnBgC,EA8DG9V,EAAAG,EAAA2T,EAAA,GAAQ,iCA9DXiC,EA8EG/V,EAAAG,EAAA2T,EAAA,GAAK,gFA9ERkC,EA+EGhW,EAAAG,EAAA2T,EAAA,GAAgB,mBA/EnBmC,EAgFGjW,EAAAG,EAAA2T,EAAA,GAAQ,2CAhFXoC,EAgGGlW,EAAAG,EAAA2T,EAAA,GAAK,4EAhGRqC,EAiGGnW,EAAAG,EAAA2T,EAAA,GAAgB,mBAjGnBsC,EAkGGpW,EAAAG,EAAA2T,EAAA,GAAQ,8CAlGXuC,EAmHGrW,EAAAG,EAAA2T,EAAA,GAAK,uFAnHRwC,EAoHGtW,EAAAG,EAAA2T,EAAA,GAAgB,mBApHnByC,EAqHGvW,EAAAG,EAAA2T,EAAA,GAAQ,uCArHX0C,EA+HGxW,EAAAG,EAAA2T,EAAA,GAAK,2FA/HR2C,EAgIGzW,EAAAG,EAAA2T,EAAA,GAAgB,mBAhInB4C,EAiIG1W,EAAAG,EAAA2T,EAAA,GAAQ,0CAjIX6C,EA6IG3W,EAAAG,EAAA2T,EAAA,GACC,8GA9IJ8C,EAiJG5W,EAAAG,EAAA2T,EAAA,GAAgB,mBAjJnB+C,EAkJG7W,EAAAG,EAAA2T,EAAA,GAAQ,mCAlJXgD,EA0JG9W,EAAAG,EAAA2T,EAAA,GAAK,qIA1JRiD,EA4JG/W,EAAAG,EAAA2T,EAAA,GAAgB,UA5JnBkD,EA6JGhX,EAAAG,EAAA2T,EAAA,GAAQ,8BA7JX3G,EAAA8J,EAAA,SAAAtC,GAWE,QAAAgB,GAAa1K,GAAShI,EAAAhE,KAAA0W,EAAA,IAAApP,GAAAlD,EAAApE,MAAA0W,EAAA5R,WAAAnD,OAAAwF,eAAAuP,IAAA9T,MAAA5C,KACX6C,WADW,OAAAyE,GAVtB7F,KAAO,cAUe6F,EATtB8E,iBAAoB6L,gBAYdjM,IACF1E,EAAK4Q,cAAgBlM,EAAQkM,eAJX5Q,EAXxB,MAAA/C,GAAAmS,EAAAhB,GAAAnP,EAAAmQ,IAAAxT,IAAA,WAAA3B,MAAA,SAmBYqG,GACRf,EAAA6P,EAAArU,UAAAyC,WAAAnD,OAAAwF,eAAAuP,EAAArU,WAAA,WAAArC,MAAAoB,KAAApB,KAAe4H,GAEV5H,KAAKkY,eACRtQ,EAAIqD,IAAI5H,MAAM,sDAvBpBH,IAAA,QAAA3B,MAAA,mBAAA4W,GAAAtP,EAAAC,GAAA,MAAAX,GAAAvF,MAAA5C,KAAA6C,WAAA,GAAAsF,GAAA1F,EAAA0G,mBAAAC,KAAA,QAAAC,GAAAjB,EA8BkCK,GA9BlC,GAAAmC,GAAA1B,EAAAxD,EAAA0C,EAAA,GA8BkB8P,EA9BlBhP,EAAA,SAAAC,oBAAAc,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA7D,MAAA,aAAA6D,GAAA7D,KAAA,EA+BUrG,KAAKqM,qBA/Bf,YAkCQrM,KAAKkY,eAAiBA,IAAkBlY,KAAKkY,cAlCrD,CAAAhO,EAAA7D,KAAA,cAmCYuE,GAAK8L,EAAY0B,SAAS3P,EAAQkC,KAAKC,IAC7C5K,KAAK4H,IAAIyQ,QAAQzN,EAAI,SApC3BV,EAAAG,OAAA,SAqCa,4BArCb,wBAAAH,GAAAiB,SAAA9B,EAAArJ,QAAA,OAAAmY,QAAAjV,IAAA,gBAAA3B,MAAA,mBAAA+W,GAAAvP,EAAAC,GAAA,MAAAsC,GAAA1I,MAAA5C,KAAA6C,WAAA,GAAAyI,GAAA7I,EAAA0G,mBAAAC,KAAA,QAAAmC,GAAA0D,EA4C4CxG,GA5C5C,GAAA8P,GAAA/M,EAAA8D,EAAA5J,EAAAuJ,EAAA,GA4C+BuJ,GA5C/BlJ,EAAA,GAAAA,EAAA,IA4CqC7N,EA5CrC6N,EAAA,SAAAnG,oBAAAc,KAAA,SAAAyB,GAAA,cAAAA,EAAAvB,KAAAuB,EAAArF,MAAA,aA6CImS,GAAO9B,EAAY0B,SAASI,GA7ChC9M,EAAArF,KAAA,EA8CUrG,KAAKqM,qBA9Cf,cA+CQkM,GA/CR,OAAA7M,EAAAvB,KAAA,EAAAuB,EAAArF,KAAA,EAiD0BrG,KAAK4H,IAAI8F,SAASjF,EAAQqE,SAAS2L,oBAAoBhX,EAjDjF,QAiDM8W,EAjDN7M,EAAAb,KAAAa,EAAArF,KAAA,iBAAAqF,EAAAvB,KAAA,GAAAuB,EAAAV,GAAAU,EAAA,YAmDM1L,KAAK4H,IAAIqD,IAAIyN,KAAbhN,EAAAV,GAnDN,YAqDUQ,EAASkL,EAAY0B,SAASG,IAChC/M,EAtDR,CAAAE,EAAArF,KAAA,eAuDMrG,MAAK4H,IAAIyQ,QAAQ7M,EAAQgN,GAvD/B9M,EAAArB,OAAA,SAwDgB5I,EAxDhB,kBAwDsC+W,EAxDtC,6BAAA9M,GAAAP,SAAAI,EAAAvL,OAAA,iBAAAsY,QAAApV,IAAA,WAAA3B,MAAA,mBAAAoX,GAAA1P,EAAA2P,GAAA,MAAAC,GAAAjW,MAAA5C,KAAA6C,WAAA,GAAAgW,GAAApW,EAAA0G,mBAAAC,KAAA,QAAA0P,GAAAC,EA+DiCtQ,GA/DjC,GAAA8P,GAAA/M,EAAAwN,EAAAC,EAAAvT,EAAAqT,EAAA,GA+D0BtX,GA/D1BwX,EAAA,GAAAA,EAAA,UAAA9P,oBAAAc,KAAA,SAAAiP,GAAA,cAAAA,EAAA/O,KAAA+O,EAAA7S,MAAA,aAAA6S,GAAA7S,KAAA,EAgEUrG,KAAKqM,qBAhEf,cAiEQkM,GAjER,OAAAW,EAAA/O,KAAA,EAAA+O,EAAA7S,KAAA,EAmE0BrG,KAAK4H,IAAI8F,SAASjF,EAAQqE,SAAS2L,oBAAoBhX,EAnEjF,QAmEM8W,EAnENW,EAAArO,KAAAqO,EAAA7S,KAAA,gBAAA6S,EAAA/O,KAAA,EAAA+O,EAAAlO,GAAAkO,EAAA,YAqEMlZ,KAAK4H,IAAIqD,IAAIyN,KAAbQ,EAAAlO,GArEN,YAuEUQ,EAASkL,EAAY0B,SAASG,IAChC/M,EAxER,CAAA0N,EAAA7S,KAAA,eAyEY2S,GAAQhZ,KAAK4H,IAAI8H,SAASlE,GAzEtC0N,EAAA7O,OAAA,SA0Ea2O,EAAM1C,KAAK,MA1ExB,yBAAA4C,GAAA/N,SAAA2N,EAAA9Y,OAAA,gBAAA2Y,QAAAzV,IAAA,oBAAA3B,MAAA,mBAAA4X,GAAA/N,EAAAC,GAAA,MAAA+N,GAAAxW,MAAA5C,KAAA6C,WAAA,GAAAuW,GAAA3W,EAAA0G,mBAAAC,KAAA,QAAAiQ,GAAAC,EAiF0C7Q,GAjF1C,GAAA8P,GAAA/M,EAAAwN,EAAAO,EAAA7T,EAAA4T,EAAA,GAiFmC7X,GAjFnC8X,EAAA,GAAAA,EAAA,UAAApQ,oBAAAc,KAAA,SAAAuP,GAAA,cAAAA,EAAArP,KAAAqP,EAAAnT,MAAA,aAAAmT,GAAAnT,KAAA,EAkFUrG,KAAKqM,qBAlFf,cAmFQkM,GAnFR,OAAAiB,EAAArP,KAAA,EAAAqP,EAAAnT,KAAA,EAqF0BrG,KAAK4H,IAAI8F,SAASjF,EAAQqE,SAAS2L,oBAAoBhX,EArFjF,QAqFM8W,EArFNiB,EAAA3O,KAAA2O,EAAAnT,KAAA,gBAAAmT,EAAArP,KAAA,EAAAqP,EAAAxO,GAAAwO,EAAA,YAuFMxZ,KAAK4H,IAAIqD,IAAIyN,KAAbc,EAAAxO,GAvFN,YAyFUQ,EAASkL,EAAY0B,SAASG,IAChC/M,EA1FR,CAAAgO,EAAAnT,KAAA,eA2FY2S,GAAQhZ,KAAK4H,IAAI6R,aAAajO,GA3F1CgO,EAAAnP,OAAA,SA4Fa2O,EAAM1C,KAAK,MA5FxB,yBAAAkD,GAAArO,SAAAkO,EAAArZ,OAAA,gBAAAmZ,QAAAjW,IAAA,qBAAA3B,MAAA,mBAAAmY,GAAAC,EAAAC,GAAA,MAAAC,GAAAjX,MAAA5C,KAAA6C,WAAA,GAAAgX,GAAApX,EAAA0G,mBAAAC,KAAA,QAAA0Q,GAAAC,EAmGiDtR,GAnGjD,GAAA8P,GAAA/M,EAAAwO,EAAAtU,EAAAqU,EAAA,GAmGoCvB,GAnGpCwB,EAAA,GAAAA,EAAA,IAmG0CvY,EAnG1CuY,EAAA,SAAA7Q,oBAAAc,KAAA,SAAAgQ,GAAA,cAAAA,EAAA9P,KAAA8P,EAAA5T,MAAA,aAoGImS,GAAO9B,EAAY0B,SAASI,GApGhCyB,EAAA5T,KAAA,EAqGUrG,KAAKqM,qBArGf,cAsGQkM,GAtGR,OAAA0B,EAAA9P,KAAA,EAAA8P,EAAA5T,KAAA,EAwG0BrG,KAAK4H,IAAI8F,SAASjF,EAAQqE,SAAS2L,oBAAoBhX,EAxGjF,QAwGM8W,EAxGN0B,EAAApP,KAAAoP,EAAA5T,KAAA,iBAAA4T,EAAA9P,KAAA,GAAA8P,EAAAjP,GAAAiP,EAAA,YA0GMja,KAAK4H,IAAIqD,IAAIyN,KAAbuB,EAAAjP,GA1GN,YA4GUQ,EAASkL,EAAY0B,SAASG,IAChC/M,EA7GR,CAAAyO,EAAA5T,KAAA,eA8GMrG,MAAK4H,IAAIsS,WAAW1O,EAAQgN,GA9GlCyB,EAAA5P,OAAA,SA+GgB5I,EA/GhB,sBA+G0C+W,EA/G1C,6BAAAyB,GAAA9O,SAAA2O,EAAA9Z,OAAA,iBAAA0Z,QAAAxW,IAAA,iBAAA3B,MAAA,mBAAA4Y,GAAAC,GAAA,MAAAC,GAAAzX,MAAA5C,KAAA6C,WAAA,GAAAwX,GAAA5X,EAAA0G,mBAAAC,KAAA,QAAAkR,GAAAC,GAAA,GAAAC,GAAA9U,EAAA6U,EAAA,GAsH2BlV,EAtH3BmV,EAAA,GAsH4ChC,EAtH5CgC,EAAA,SAAArR,oBAAAc,KAAA,SAAAwQ,GAAA,cAAAA,EAAAtQ,KAAAsQ,EAAApU,MAAA,aAuHImS,GAAO9B,EAAY0B,SAASI,GAvHhCiC,EAAApU,KAAA,EAwHUrG,KAAKqM,qBAxHf,cA0HIrM,MAAK4H,IAAI4E,GAAGC,IAAZ,sBAAsCpH,EAAtC,IAAyDmT,GAAQ,GAAMjX,QACvEvB,KAAK4H,IAAI4E,GAAG4C,QA3HhBqL,EAAApQ,OAAA,kBA4HoBmO,EA5HpB,+CA4HuEnT,EA5HvE,6BAAAoV,GAAAtP,SAAAmP,EAAAta,QAAA,OAAAma,QAAAjX,IAAA,sBAAA3B,MAAA,mBAAAmZ,GAAAC,GAAA,MAAAC,GAAAhY,MAAA5C,KAAA6C,WAAA,GAAA+X,GAAAnY,EAAA0G,mBAAAC,KAAA,QAAAyR,GAAAC,GAAA,GAAAC,GAAAC,EAAAtV,EAAAoV,EAAA,GAkIgCzV,EAlIhC2V,EAAA,GAkIiDxC,EAlIjDwC,EAAA,SAAA7R,oBAAAc,KAAA,SAAAgR,GAAA,cAAAA,EAAA9Q,KAAA8Q,EAAA5U,MAAA,aAmIImS,GAAO9B,EAAY0B,SAASI,GAnIhCyC,EAAA5U,KAAA,EAoIUrG,KAAKqM,qBApIf,cAsIU0O,GAAQ/a,KAAK4H,IAAI4E,GAAGzK,IAAZ,sBAAsCsD,GAAmB9D,cAChEwZ,GAAMvC,GACbxY,KAAK4H,IAAI4E,GAAGC,IAAZ,sBAAsCpH,EAAmB0V,GAAOxZ,QAChEvB,KAAK4H,IAAI4E,GAAG4C,QAzIhB6L,EAAA5Q,OAAA,kBA0IoBmO,EA1IpB,iDA0IyEnT,EA1IzE,6BAAA4V,GAAA9P,SAAA0P,EAAA7a,QAAA,OAAA0a,QAAAxX,IAAA,YAAA3B,MAAA,mBAAA2Z,GAAAC,GAAA,MAAAC,GAAAxY,MAAA5C,KAAA6C,WAAA,GAAAuY,GAAA3Y,EAAA0G,mBAAAC,KAAA,QAAAiS,GAAAC,GAAA,GAAAtC,GAAAuC,EAAA7V,EAAA4V,EAAA,GAmJsBP,EAnJtBQ,EAAA,SAAApS,oBAAAc,KAAA,SAAAuR,GAAA,cAAAA,EAAArR,KAAAqR,EAAAnV,MAAA,aAAAmV,GAAAnV,KAAA,EAoJUrG,KAAKqM,qBApJf,cAsJU2M,GAAQrX,OAAO2K,KAAKtM,KAAK4H,IAAI4E,GAAGzK,IAAZ,sBAAsCgZ,GAASxZ,SAtJ7Eia,EAAAnR,OAAA,SAuJW2O,EAAM1C,KAAK,MAvJtB,wBAAAkF,GAAArQ,SAAAkQ,EAAArb,QAAA,OAAAkb,QAAAhY,IAAA,uBAAA3B,MAAA,mBAAAka,GAAAC,EAAAC,GAAA,MAAAC,GAAAhZ,MAAA5C,KAAA6C,WAAA,GAAA+Y,GAAAnZ,EAAA0G,mBAAAC,KAAA,QAAAyS,GAAAC,EA8JiDrT,GA9JjD,GAAAkC,GAAAoR,EAAArW,EAAAoW,EAAA,GA8JiCtQ,EA9JjCuQ,EAAA,GA8JyCC,EA9JzCD,EAAA,SAAA5S,oBAAAc,KAAA,SAAAgS,GAAA,cAAAA,EAAA9R,KAAA8R,EAAA5V,MAAA,aAAA4V,GAAA5V,KAAA,EA+JUrG,KAAKqM,qBA/Jf,YAgKQb,IAAUwQ,EAhKlB,CAAAC,EAAA5V,KAAA,WAiKYsE,EAAO3K,KAAK4H,IAAIuH,MAAMQ,SAASnE,IACjCb,GAAQA,EAAKC,KAAOnC,EAAQkC,KAAKC,GAlK3C,CAAAqR,EAAA5V,KAAA,WAmKYsE,EAAKqR,QAAUA,EAnK3B,CAAAC,EAAA5V,KAAA,cAoKUsE,GAAKqR,MAAQhW,OApKvBiW,EAAA5R,OAAA,SAqKiBrK,KAAK4H,IAAIsU,WAAWvR,EAAMlC,EAAQkC,MArKnD,cAAAsR,GAAA5R,OAAA,SAwKa,kCAxKb,cA0KI2R,GAAQjb,EAAAG,EAAAuV,EAAA,MACRhO,EAAQkC,KAAKqR,MAAQA,EA3KzBC,EAAA5R,OAAA,SA4KW,mEACU5B,EAAQkC,KAAKC,GADvB,IAC6BoR,GA7KxC,yBAAAC,GAAA9Q,SAAA0Q,EAAA7b,QAAA,OAAAyb,SAAA/E,GAAiC7B,EAAA,GAAjCmD,EAISI,SAAW,SAAC3W,GACjB,GAAIA,EACF,MAAOA,GAAK0a,QAAQ,UAAW,IAAI3G,eANzCvH,EAAAC,EAAAmG,EAAApG,EAAA5L,UAAA,SAAA0S,EAAAC,EAAAC,GAAAtT,OAAAsF,yBAAAgH,EAAA5L,UAAA,SAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,iBAAA6S,EAAAC,EAAAC,GAAAzT,OAAAsF,yBAAAgH,EAAA5L,UAAA,iBAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,YAAAsU,EAAAC,EAAAC,GAAAlV,OAAAsF,yBAAAgH,EAAA5L,UAAA,YAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,qBAAAyU,EAAAC,EAAAC,GAAArV,OAAAsF,yBAAAgH,EAAA5L,UAAA,qBAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,sBAAA4U,EAAAC,EAAAC,GAAAxV,OAAAsF,yBAAAgH,EAAA5L,UAAA,sBAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,kBAAA+U,EAAAC,EAAAC,GAAA3V,OAAAsF,yBAAAgH,EAAA5L,UAAA,kBAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,uBAAAkV,EAAAC,EAAAC,GAAA9V,OAAAsF,yBAAAgH,EAAA5L,UAAA,uBAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,aAAAqV,EAAAC,EAAAC,GAAAjW,OAAAsF,yBAAAgH,EAAA5L,UAAA,aAAA4L,EAAA5L,WAAAgS,EAAApG,EAAA5L,UAAA,wBAAAwV,EAAAC,EAAAC,GAAApW,OAAAsF,yBAAAgH,EAAA5L,UAAA,wBAAA4L,EAAA5L,WAAA4L,IzBumEM,SAASrO,EAAQD,G0B1mEvBC,EAAAD,QAAAE,QAAA,W1BgnEM,SAASD,EAAQD,G2BhnEvBC,EAAAD,QAAAE,QAAA,a3BsnEM,SAASD,EAAQD,G4BtnEvBC,EAAAD,QAAAE,QAAA,U5B4nEM,SAASD,EAAQD,G6B5nEvBC,EAAAD,QAAAE,QAAA,a7BkoEM,SAASD,EAAQD,G8BloEvBC,EAAAD,QAAAE,QAAA,kB9BwoEM,SAASD,EAAQD,EAASoB,GAEhC,YAiDA,SAAS0B,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAM5C,KAAM6C,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOT,EAAIO,GAAKC,GAAU5B,EAAQ6B,EAAK7B,MAAS,MAAO8B,GAAwB,WAAfL,GAAOK,GAAkB,MAAID,GAAKE,SAAQP,GAAQxB,GAAwBuB,QAAQC,QAAQxB,GAAOgC,KAAK,SAAUhC,GAAS,MAAO0B,GAAK,OAAQ1B,IAAW,SAAUiC,GAAO,MAAOP,GAAK,QAASO,KAAc,MAAOP,GAAK,WAEvc,QAASe,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAlD3F,GAAIiY,GAA8Crb,EAAoB,IAClEsb,EAAsDtb,EAAoBiB,EAAEoa,GAC5EE,EAAoCvb,EAAoB,IACxDwb,EAA4Cxb,EAAoBiB,EAAEsa,GAClEE,EAA2Czb,EAAoB,IAC/D0b,EAAmD1b,EAAoBiB,EAAEwa,GACzEE,EAA0D3b,EAAoB,IAC9E4b,EAAkE5b,EAAoBiB,EAAE0a,GACxFE,EAA6C7b,EAAoB,IAEjE8b,GADqD9b,EAAoBiB,EAAE4a,GACpC7b,EAAoB,KAE3D+b,GAD+C/b,EAAoBiB,EAAE6a,GAChC9b,EAAoB,KAEzDgc,GAD6Chc,EAAoBiB,EAAE8a,GAClB/b,EAAoB,IACrEic,EAAoCjc,EAAoB,GACxDkc,EAA0Clc,EAAoB,IAC9Dmc,EAA2Cnc,EAAoB,IAC/Doc,EAA0Cpc,EAAoB,IAC9Dqc,EAAuCrc,EAAoB,EACrDA,GAAoBS,EAAE7B,EAAS,SAAU,WAAa,MAAO0d,KAC7Dtc,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAO2d,KAChDvc,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOsd,GAA2C,IACzGlc,EAAoBS,EAAE7B,EAAS,WAAY,WAAa,MAAOsd,GAA2C,IAC1Glc,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOud,GAA4C,IAC1Gnc,EAAoBS,EAAE7B,EAAS,kBAAmB,WAAa,MAAOud,GAA4C,IAClHnc,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAOud,GAA4C,IAC9Gnc,EAAoBS,EAAE7B,EAAS,SAAU,WAAa,MAAOwd,GAA2C,IACxGpc,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAOwd,GAA2C,IAC7Gpc,EAAoBS,EAAE7B,EAAS,aAAc,WAAa,MAAOwd,GAA2C,IAC5Gpc,EAAoBS,EAAE7B,EAAS,aAAc,WAAa,MAAOwd,GAA2C,IAC5Gpc,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOwd,GAA2C,IACzGpc,EAAoBS,EAAE7B,EAAS,SAAU,WAAa,MAAOwd,GAA2C,IACxGpc,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAOwd,GAA2C,IACtGpc,EAAoBS,EAAE7B,EAAS,kBAAmB,WAAa,MAAOwd,GAA2C,IACjHpc,EAAoBS,EAAE7B,EAAS,UAAW,WAAa,MAAOwd,GAA2C,IACzGpc,EAAoBS,EAAE7B,EAAS,cAAe,WAAa,MAAOqd,GAAqC,IACvGjc,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAOqd,GAAqC,IACrGjc,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAOqd,GAAqC,IAChGjc,EAAoBS,EAAE7B,EAAS,QAAS,WAAa,MAAOqd,GAAqC,IACjGjc,EAAoBS,EAAE7B,EAAS,YAAa,WAAa,MAAOqd,GAAqC,IACrGjc,EAAoBS,EAAE7B,EAAS,aAAc,WAAa,MAAOqd,GAAqC,IACtGjc,EAAoBS,EAAE7B,EAAS,KAAM,WAAa,MAAOqd,GAAqC,IAC5Gjc,EAAoBS,EAAE7B,EAAS,OAAQ,WAAa,MAAOyd,GAAwC,GACpI,IAEInP,GAAQC,EAAOqP,EAFfhX,EAAe,WAAc,QAASC,GAAiBhB,EAAQiB,GAAS,IAAK,GAAIvF,GAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAAK,CAAE,GAAIwF,GAAaD,EAAMvF,EAAIwF,GAAW5E,WAAa4E,EAAW5E,aAAc,EAAO4E,EAAW7E,cAAe,EAAU,SAAW6E,KAAYA,EAAW9B,UAAW,GAAMjD,OAAOC,eAAe4D,EAAQkB,EAAWxD,IAAKwD,IAAiB,MAAO,UAAUxC,EAAayC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtC,EAAY7B,UAAWsE,GAAiBC,GAAaJ,EAAiBtC,EAAa0C,GAAqB1C,K+B/qEhiByY,GAAAvL,EAAKtO,QAAUA,OAIf,IAAM0a,GAAOb,EAAAvL,EAAKqM,MAAMhB,EAAArL,GAClBsM,EAAW,eAIJL,GAAbnP,EAAAD,EAAA,WAIE,QAAAoP,GAAa5b,GAAkB,GAAZuK,GAAYnJ,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAAAmB,GAAAhE,KAAAqd,GAAAE,EAAAnc,KAAApB,MAC7BA,KAAKyB,KAAOA,EACZzB,KAAKgI,MAAQgE,EAAQhE,MACrBhI,KAAKuI,QAAU,GAAI8T,GAAAjL,EACnBpR,KAAKwd,KAAOA,EACZxd,KAAK2d,mBAAqB3R,EAAQ2R,mBAElC3d,KAAK4d,QAAQ5R,EAAQ6R,UAAYtB,EAAAnL,EAAI0M,QACrC,IAAMlK,GAAS5H,EAAQ4H,QAAR,UAA4BnS,EAA5B,OACfzB,MAAK+d,OAAO/R,EAAQ9I,IAAK0Q,EAAQ5H,EAAQsH,SAAUtH,EAAQ0H,WAC3D1T,KAAKuO,YAELvO,KAAKge,aAAahS,EAAQ0B,UAC1B1N,KAAKie,YAAYjS,EAAQ2E,SAjB7B,MAAApK,GAAA8W,IAAAna,IAAA,YAAA3B,MAAA,mBAAAgN,KAAA,MAAApG,GAAAvF,MAAA5C,KAAA6C,WAAA,GAAAsF,GAAA1F,EAAA0G,mBAAAC,KAAA,QAAAC,KAAA,MAAAF,oBAAAc,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA7D,MAAA,aAAA6D,GAAA7D,KAAA,EAkEUrG,KAAKqM,qBAlEf,WAmEIrM,KAAKmP,MAAQnP,KAAKwM,GAAGzK,IAAI2b,GAAUnc,SAC/BvB,KAAKmP,MApEb,CAAAjF,EAAA7D,KAAA,cAqEMrG,MAAKiL,IAAI7H,KAAKzB,OAAO2K,KAAKtM,KAAKmP,MAAMQ,UAAU7L,OAAQ,gBArE7DoG,EAAAG,OAAA,iBAwEIrK,KAAKwM,GAAGC,IAAIiR,GAAW/N,cAAepO,QACtCvB,KAAKmP,MAAQnP,KAAKwM,GAAGzK,IAAI2b,GAAUnc,OAzEvC,wBAAA2I,GAAAiB,SAAA9B,EAAArJ,QAAA,OAAAuO,QAAArL,IAAA,aAAA3B,MAAA,SA4Ec2c,EAAUC,GAAS,GAAA7W,GAAAtH,IAC7B,IAAIke,GAAYC,EAQd,MAPApd,GAAAG,EAAA2b,EAAA,OAAMqB,EAASzQ,MAAO0Q,EAAQ1Q,OAC9B9L,OAAO2K,KAAK6R,EAAQzQ,UAAU/F,IAAI,SAAAmF,GAChCxF,EAAK6H,MAAMrC,GAASqR,EAAQzQ,SAASZ,GAAStB,QAAQoE,MAAQsO,EAAStT,KAEzE7J,EAAAG,EAAA2b,EAAA,OAAMqB,EAASxQ,SAAUyQ,EAAQzQ,gBAC1B1N,MAAKmP,MAAMQ,SAASwO,EAAQvT,IACnC5K,KAAKwM,GAAG4C,QACD,oBArFblM,IAAA,UAAA3B,MAAA,SA0FUiK,EAAQ4S,GACdpe,KAAKmP,MAAMQ,SAASnE,GAAQiC,MAAM2Q,IAAY,EAC9Cpe,KAAKwM,GAAG4C,WA5FZlM,IAAA,WAAA3B,MAAA,SA+FWiK,GACP,MAAO7J,QAAO2K,KAAKtM,KAAKmP,MAAMQ,SAASnE,GAAQiC,UAhGnDvK,IAAA,aAAA3B,MAAA,SAmGaiK,EAAQ4S,GACjB,GAAM3Q,GAAQzN,KAAKmP,MAAMQ,SAASnE,GAAQiC,YACnCA,GAAM2Q,GACbpe,KAAKwM,GAAG4C,WAtGZlM,IAAA,eAAA3B,MAAA,SAyGgBiK,GAAQ,GAAA9D,GAAA1H,KACd2K,EAAO3K,KAAKmP,MAAMQ,SAASnE,GAC7BiC,IAEJ,IAAI9C,EAQF,MAPAhJ,QAAO2K,KAAK3B,EAAK+C,UAAU/F,IAAI,SAAAmF,GAC7B,GAAMuR,GAAe3W,EAAKgG,SAASZ,GAASwR,gBAAgB3T,EAAK+C,SAASZ,GAAStB,OAC/E6S,KACF5Q,EAAQA,EAAM7E,OAAOyV,MAGzB5Q,EAAQA,EAAM7E,OAAOjH,OAAO2K,KAAK3B,EAAK8C,WApH5CvK,IAAA,mBAAA3B,MAAA,mBAAAmJ,GAAA5B,EAAAC,GAAA,MAAAX,GAAAxF,MAAA5C,KAAA6C,WAAA,GAAAuF,GAAA3F,EAAA0G,mBAAAC,KAAA,QAAAmC,GAyH0BC,EAAQC,GAzHlC,GAAAgC,GAAA8Q,CAAA,OAAApV,oBAAAc,KAAA,SAAAyB,GAAA,cAAAA,EAAAvB,KAAAuB,EAAArF,MAAA,UA0HSrG,KAAKwe,eA1Hd,CAAA9S,EAAArF,KAAA,cAAAqF,GAAArB,OAAA,UA0HuC,EA1HvC,WA6HmC,uBAA3BoB,EA7HR,CAAAC,EAAArF,KAAA,cAAAqF,GAAArB,OAAA,UA6HkE,EA7HlE,cAAAqB,GAAArF,KAAA,EA+HUrG,KAAKqM,qBA/Hf,WAkIUoB,EAAQzN,KAAKyZ,aAAajO,IAE5BiC,IAASA,EAAMoE,SAAS,SApIhC,CAAAnG,EAAArF,KAAA,cAAAqF,GAAArB,OAAA,UAoImD,EApInD,WAuIUkU,EAASve,KAAKwM,GAAGzK,IAAR,sBAAkC0J,GAA0BlK,QAGtEgd,GAAW5c,OAAO2K,KAAKiS,GA1IhC,CAAA7S,EAAArF,KAAA,YA2IWrG,KAAK2d,mBA3IhB,CAAAjS,EAAArF,KAAA,eAAAqF,GAAArB,OAAA,UA4Ie,EA5If,eAAAqB,GAAArB,OAAA,UAiJa,EAjJb,aAoJQkU,YApJR,CAAA7S,EAAArF,KAAA,eAAAqF,GAAArB,OAAA,UAoJgC,EApJhC,aAwJQtJ,EAAAG,EAAA0b,EAAA,cAAanP,EAAO9L,OAAO2K,KAAKiS,IAASza,OAxJjD,CAAA4H,EAAArF,KAAA,eAAAqF,GAAArB,OAAA,UAyJa,EAzJb,eAAAqB,GAAArB,OAAA,UA4JW,EA5JX,yBAAAqB,GAAAP,SAAAI,EAAAvL,QAAA,OAAA0K,QAAAxH,IAAA,sBAAA3B,MAAA,mBAAA8K,KAAA,MAAAnD,GAAAtG,MAAA5C,KAAA6C,WAAA,GAAAqG,GAAAzG,EAAA0G,mBAAAC,KAAA,QAAA0P,KAAA,GAAAjR,GAAA7H,IAAA,OAAAmJ,oBAAAc,KAAA,SAAAiP,GAAA,cAAAA,EAAA/O,KAAA+O,EAAA7S,MAAA,WAgKQrG,KAAKwM,GAhKb,CAAA0M,EAAA7S,KAAA,cAAA6S,GAAA7O,OAAA,UAiKa,EAjKb,cAAA6O,GAAA7O,OAAA,SAmKW,GAAIvH,SAAQ,SAACC,GAClB8E,EAAKU,QAAQC,GAAG,WAAYzF,KApKlC,wBAAAmW,GAAA/N,SAAA2N,EAAA9Y,QAAA,OAAAqM,QAAAnJ,IAAA,YAAA3B,MAAA,SA4Kakd,GACTA,EAAOC,SAAS1e,MAChBA,KAAK2Q,QAAQrK,KAAKmY,MA9KtBvb,IAAA,aAAA3B,MAAA,SAiLcuL,GACV,GAAMrL,GAAOqL,EAAQrL,IAEjBzB,MAAK2e,iBAAiBld,IACxBzB,KAAKiL,IAAIC,QAAT,aAA8BzJ,EAA9B,gCAGFqL,EAAQ4R,SAAS1e,MACjBA,KAAK0N,SAASZ,EAAQrL,MAAQqL,KAzLlC5J,IAAA,wBAAA3B,MAAA,SA4LyBkI,GAQrB,MANEA,GAAKgL,MAAM,EAAGzU,KAAKyB,KAAKqC,QAAQ0R,gBAAkBxV,KAAKyB,KAAK+T,eAC5D/L,EAAKgL,MAAM,EAAGzU,KAAKgI,MAAMlE,QAAQ0R,gBAAkBxV,KAAKgI,MAAMwN,gBAE9D/L,EAAUzJ,KAAKyB,KAAf,IAAuBgI,GAGlBA,KApMXvG,IAAA,OAAA3B,MAAA,SAuMQkH,GACJ,GAAKA,EAAQgB,KAAb,CACA,GAAMqD,GAAU9M,KAAK4e,oBAAoBnW,EAEzC,OAAKqE,OAKLA,GAAQ/B,KAAKtC,OAJXzI,MAAKiL,IAAIC,QAAT,sCAAuDzC,EAAQqE,aA5MrE5J,IAAA,sBAAA3B,MAAA,SAmNuBkH,GACnB,MAAOzI,MAAK0N,SAASjF,EAAQqE,YApNjC5J,IAAA,mBAAA3B,MAAA,SAuNoBE,GAAM,GAAAsI,GAAA/J,IACtB,OAAO2B,QACE2K,KAAKtM,KAAK0N,UACV/F,IAAI,SAAAiD,GAAA,MAAMb,GAAK2D,SAAS9C,KACxBiU,KAAK,SAAAzN,GAAA,MAAKA,GAAE3P,KAAK+T,gBAAkB/T,EAAK+T,oBA3NrD6H,KAAAE,EAAA,cAAAuB,GAAA9e,UACE2Q,WADF3Q,KAEE0N,YAFF1N,KAqBEge,aAAe,WAAiB,GAAhBtQ,GAAgB7K,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAC9B6K,GAASxF,QAAQ,SAAAkJ,GAAA,MAAK0N,GAAKC,WAAW3N,MAtB1CpR,KAyBEie,YAAc,WAAgB,GAAftN,GAAe9N,UAAAiB,QAAA,GAAAkC,SAAAnD,UAAA,MAAAA,UAAA,EAC5B8N,GAAQzI,QAAQ,SAAA3F,GACduc,EAAKE,UAAUzc,GAIXA,YAAawa,GAAA,cACf+B,EAAKN,gBAAiB,MAhC9Bxe,KAqCE4d,QAAU,SAACC,GACT,GAAM5S,GAAM,GAAIsR,GAAAnL,EAAIyM,GAAYtB,EAAAnL,EAAI0M,QACpCgB,GAAK7T,IAAMA,EACX6T,EAAKjB,SAAWA,EAEZA,IAAatB,EAAAnL,EAAI6N,OACnBC,YAAYJ,EAAKK,WAAY,MA3CnCnf,KA+CE+d,OAAS,SAAC7a,EAAK0Q,EAAQN,EAAUI,GAC/B,MAAKxQ,OAKLnC,GAAAG,EAAA8b,EAAA,IACE9Z,MACAoQ,WACAI,YACAH,KAAMK,EACNrL,QAASuW,EAAKvW,UACbhF,KAAK,SAACiJ,GACPsS,EAAKtS,GAAKA,EACVsS,EAAKvW,QAAQkG,KAAK,WAAYjC,IAC7BsS,EAAK7T,IAAImU,SAAS9W,KAAKwW,EAAK7T,UAb7B6T,GAAK7T,IAAImU,SAAS,uEAjDxBpf,KAwKEmf,WAAa,WACXL,EAAK7T,IAAIoU,MAAM1W,QAAQ2W,cAAe3W,QAAQ4W,cAzKlDrR,GAoOaoP,EAAYf,EAAAnL","file":"exobot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"), require(\"util\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"cryptr\", \"eventemitter3\", \"fs-extra\", \"lodash\", \"lodash/array\", \"log\", \"lowdb\", \"node-uuid\", \"readline\", \"superagent\", \"superagent-promise-plugin\", \"underscore-db\", \"util\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exobot.js\"] = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"), require(\"util\"));\n\telse\n\t\troot[\"exobot.js\"] = factory(root[\"cryptr\"], root[\"eventemitter3\"], root[\"fs-extra\"], root[\"lodash\"], root[\"lodash/array\"], root[\"log\"], root[\"lowdb\"], root[\"node-uuid\"], root[\"readline\"], root[\"superagent\"], root[\"superagent-promise-plugin\"], root[\"underscore-db\"], root[\"util\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_30__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_19__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"), require(\"util\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"cryptr\", \"eventemitter3\", \"fs-extra\", \"lodash\", \"lodash/array\", \"log\", \"lowdb\", \"node-uuid\", \"readline\", \"superagent\", \"superagent-promise-plugin\", \"underscore-db\", \"util\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exobot.js\"] = factory(require(\"cryptr\"), require(\"eventemitter3\"), require(\"fs-extra\"), require(\"lodash\"), require(\"lodash/array\"), require(\"log\"), require(\"lowdb\"), require(\"node-uuid\"), require(\"readline\"), require(\"superagent\"), require(\"superagent-promise-plugin\"), require(\"underscore-db\"), require(\"util\"));\n\telse\n\t\troot[\"exobot.js\"] = factory(root[\"cryptr\"], root[\"eventemitter3\"], root[\"fs-extra\"], root[\"lodash\"], root[\"lodash/array\"], root[\"log\"], root[\"lowdb\"], root[\"node-uuid\"], root[\"readline\"], root[\"superagent\"], root[\"superagent-promise-plugin\"], root[\"underscore-db\"], root[\"util\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_30__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_19__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 33);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__messages_text__ = __webpack_require__(4);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"d\", function() { return ChatPlugin; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"c\", function() { return listen; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"e\", function() { return respond; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return help; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"b\", function() { return permissionGroup; });\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar DEFAULT_REGEXP = /.+/;\n\nvar ChatPlugin = function (_Plugin) {\n  _inherits(ChatPlugin, _Plugin);\n\n  function ChatPlugin() {\n    _classCallCheck(this, ChatPlugin);\n\n    var _this = _possibleConstructorReturn(this, (ChatPlugin.__proto__ || Object.getPrototypeOf(ChatPlugin)).apply(this, arguments));\n\n    _this.regexp = DEFAULT_REGEXP;\n    _this.respondFunctions = [];\n    _this.listenFunctions = [];\n    _this.help = [];\n    return _this;\n  }\n\n  _createClass(ChatPlugin, [{\n    key: 'helpText',\n    value: function helpText() {\n      var _this2 = this;\n\n      return this.help.map(function (n) {\n        return '[' + _this2[n].permissionGroup + '] ' + _this2[n].help;\n      });\n    }\n  }, {\n    key: 'register',\n    value: function register(bot) {\n      var _this3 = this;\n\n      _get(ChatPlugin.prototype.__proto__ || Object.getPrototypeOf(ChatPlugin.prototype), 'register', this).call(this, bot);\n      this.bot = bot;\n      this.botNameRegex = new RegExp('^(?:(?:@?' + bot.name + '|' + bot.alias + ')[,\\\\s:.-]*)(.+)', 'i');\n\n      if (this.postConstructor) {\n        this.postConstructor.forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2);\n\n          var fn = _ref2[0];\n          var args = _ref2[1];\n          return fn.bind(_this3).apply(undefined, _toConsumableArray(args));\n        });\n      }\n\n      bot.emitter.on('receive-message', function (message) {\n        // v = [\n        //   validation function or regex,\n        //   the response function from the plugin,\n        //   the name of the function (the class.property name)\n        // ];\n        // as pushed by the listen/respond functions below\n        _this3.respondFunctions.forEach(function (v) {\n          return _this3.process.apply(_this3, _toConsumableArray(v).concat([message, true]));\n        });\n        _this3.listenFunctions.forEach(function (v) {\n          return _this3.process.apply(_this3, _toConsumableArray(v).concat([message]));\n        });\n      });\n    }\n  }, {\n    key: 'process',\n    value: function () {\n      var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(validation, response, fnName, message) {\n        var _this4 = this;\n\n        var isResponder = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\n        var text, _text, _text2, res, _text3, newMessage;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n\n                if (!isResponder) {\n                  _context.next = 8;\n                  break;\n                }\n\n                text = this.validateBotName(message);\n\n                if (text) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 5:\n\n                message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: text, direct: true }));\n                _context.next = 19;\n                break;\n\n              case 8:\n                if (!message.whisper) {\n                  _context.next = 15;\n                  break;\n                }\n\n                // if it's a listener on a whisper, remove the botname first so it still\n                // works\n                _text = this.validateBotName(message);\n\n                if (_text) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 12:\n\n                message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: _text, direct: true }));\n                _context.next = 19;\n                break;\n\n              case 15:\n                _text2 = message.text;\n\n                if (_text2) {\n                  _context.next = 18;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 18:\n\n                message = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: _text2, direct: true }));\n\n              case 19:\n\n                if (validation.exec) {\n                  validation = this.validate(validation);\n                }\n\n                res = validation(message);\n\n                if (!res) {\n                  _context.next = 29;\n                  break;\n                }\n\n                _context.next = 24;\n                return this.checkPermissions(message.user.id, this[fnName].permissionGroup);\n\n              case 24:\n                if (!_context.sent) {\n                  _context.next = 29;\n                  break;\n                }\n\n                _text3 = response.bind(this)(res, message);\n\n                if (_text3) {\n                  _context.next = 28;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 28:\n\n                if (_text3 instanceof Promise) {\n                  _text3.then(function (t) {\n                    var newMessage = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: t }));\n                    _this4.bot.send(newMessage);\n                  });\n                } else {\n                  newMessage = new __WEBPACK_IMPORTED_MODULE_1__messages_text__[\"a\" /* default */](_extends({}, message, { text: _text3 }));\n\n                  this.bot.send(newMessage);\n                }\n\n              case 29:\n                _context.next = 34;\n                break;\n\n              case 31:\n                _context.prev = 31;\n                _context.t0 = _context['catch'](0);\n\n                this.bot.log.warning(_context.t0);\n\n              case 34:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 31]]);\n      }));\n\n      function process(_x, _x2, _x3, _x4, _x5) {\n        return _ref3.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: 'checkPermissions',\n    value: function () {\n      var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(userId, commandPermissionGroup) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt('return', this.bot.checkPermissions(userId, commandPermissionGroup));\n\n              case 1:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function checkPermissions(_x7, _x8) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: 'validate',\n    value: function validate(regex) {\n      return function (message) {\n        return regex.exec(message.text);\n      };\n    }\n  }, {\n    key: 'validateBotName',\n    value: function validateBotName(message) {\n      var exec = this.botNameRegex.exec(message.text);\n      if (!exec) {\n        return;\n      }\n\n      return exec[1];\n    }\n  }, {\n    key: 'respond',\n    value: function respond(validation, fn, name) {\n      this.respondFunctions.push([validation, fn, name]);\n    }\n  }, {\n    key: 'listen',\n    value: function listen(validation, fn, name) {\n      this.listenFunctions.push([validation, fn, name]);\n    }\n  }, {\n    key: 'setHelp',\n    value: function setHelp(text, fnName) {\n      this.help.push(fnName);\n      this[fnName].help = text;\n    }\n  }, {\n    key: 'setPermissionGroup',\n    value: function setPermissionGroup(fn, name) {\n      this[fn].permissionGroup = this.name + '.' + name;\n    }\n  }]);\n\n  return ChatPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\nvar listen = function listen(validation) {\n  return function (target, name, descriptor) {\n    var fn = descriptor.value;\n\n    if (!fn.permissionGroup) {\n      fn.permissionGoup = target.name + '.' + name;\n    }\n\n    target.postConstructor = target.postConstructor || [];\n    target.postConstructor.push([target.listen, [validation, fn, name]]);\n  };\n};\n\nvar respond = function respond(validation) {\n  return function (target, name, descriptor) {\n    var fn = descriptor.value;\n\n    if (!fn.permissionGroup) {\n      fn.permissionGoup = target.name + '.' + name;\n    }\n\n    target.postConstructor = target.postConstructor || [];\n    target.postConstructor.push([target.respond, [validation, fn, name]]);\n  };\n};\n\nvar help = function help(text) {\n  return function (target, fnName) {\n    target.postConstructor.push([target.setHelp, [text, fnName]]);\n  };\n};\n\nvar permissionGroup = function permissionGroup(name) {\n  return function (target, fnName) {\n    target.postConstructor.push([target.setPermissionGroup, [fnName, name]]);\n  };\n};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return Plugin; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Plugin = function () {\n  function Plugin() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Plugin);\n\n    this.help = undefined;\n    this._requiresDatabase = false;\n\n    this.options = options;\n  }\n\n  _createClass(Plugin, [{\n    key: 'register',\n    value: function register(bot) {\n      if (!bot) {\n        throw new Error('No bot passed to register; fatal.');\n      }\n\n      if (!this.name) {\n        throw new Error('This plugin has a missing `name` property; some functionality will not work.');\n      }\n\n      this.bot = bot;\n      this.database();\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      if (!this.bot) {\n        throw new Error('No bot to listen on; fatal.');\n      }\n    }\n  }, {\n    key: 'database',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.defaultDatabase) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n\n                Object.keys(this.defaultDatabase).forEach(function (name) {\n                  var val = _this.bot.db.get(name).value();\n\n                  if (typeof val === 'undefined') {\n                    _this.bot.db.set(name, _this.defaultDatabase[name]).value();\n                  }\n                });\n\n              case 4:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function database() {\n        return _ref.apply(this, arguments);\n      }\n\n      return database;\n    }()\n  }, {\n    key: 'databaseInitialized',\n    value: function () {\n      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this._requiresDatabase = true;\n\n                if (!(this._requiresDatabase && this.bot.db)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 3:\n                return _context2.abrupt('return', new Promise(function (resolve) {\n                  _this2.bot.emitter.on('dbLoaded', resolve);\n                }));\n\n              case 4:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function databaseInitialized() {\n        return _ref2.apply(this, arguments);\n      }\n\n      return databaseInitialized;\n    }()\n  }]);\n\n  return Plugin;\n}();\n\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__db__ = __webpack_require__(22);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"b\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"c\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"d\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"e\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"f\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, \"g\", function() { return __WEBPACK_IMPORTED_MODULE_0__db__[\"g\"]; });\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_uuid__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return Message; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Message = function Message(_ref) {\n  var user = _ref.user;\n  var channel = _ref.channel;\n  var adapter = _ref.adapter;\n  var _ref$id = _ref.id;\n  var id = _ref$id === undefined ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_node_uuid__[\"v4\"])() : _ref$id;\n\n  _classCallCheck(this, Message);\n\n  this.user = user;\n  this.channel = channel;\n  this.adapter = adapter;\n  this.id = id;\n};\n\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(3);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return TextMessage; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar TextMessage = function (_Message) {\n  _inherits(TextMessage, _Message);\n\n  function TextMessage(_ref) {\n    var text = _ref.text;\n    var _ref$whisper = _ref.whisper;\n    var whisper = _ref$whisper === undefined ? false : _ref$whisper;\n\n    _classCallCheck(this, TextMessage);\n\n    var _this = _possibleConstructorReturn(this, (TextMessage.__proto__ || Object.getPrototypeOf(TextMessage)).apply(this, arguments));\n\n    if (text) {\n      _this.text = text.trim();\n    }\n\n    _this.whisper = !!whisper;\n    return _this;\n  }\n\n  return TextMessage;\n}(__WEBPACK_IMPORTED_MODULE_0__message__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"node-uuid\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__greetings__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__help__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__permissions__ = __webpack_require__(27);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"Greetings\", function() { return __WEBPACK_IMPORTED_MODULE_0__greetings__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"Help\", function() { return __WEBPACK_IMPORTED_MODULE_1__help__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"Permissions\", function() { return __WEBPACK_IMPORTED_MODULE_2__permissions__[\"a\"]; });\n\n\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_node_uuid__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return User; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar User = function User(name, id, adapter) {\n  _classCallCheck(this, User);\n\n  this.name = name;\n  this.id = id || __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_node_uuid__[\"v4\"])();\n  this.roles = {};\n  this.adapters = adapter || {};\n};\n\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__messages_text__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__messages_presence__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__user__ = __webpack_require__(7);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return Adapter; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Adapter = (_temp = _class = function () {\n  function Adapter() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Adapter);\n\n    this.options = options;\n    this.status = Adapter.STATUS.UNINITIALIZED;\n    this.roleMapping = options.roleMapping;\n  }\n\n  _createClass(Adapter, [{\n    key: 'register',\n    value: function register(bot) {\n      if (!bot) {\n        throw new Error('No bot passed to register; fatal.');\n      }\n      if (!this.name) {\n        throw new Error('This adapter has no `name` property; some plugins will not work.');\n      }\n\n      this.bot = bot;\n      this.initUsers();\n      this.status = Adapter.STATUS.CONNECTING;\n      this.listen();\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      if (!this.bot) {\n        throw new Error('No bot to listen on; fatal.');\n      }\n    }\n  }, {\n    key: 'receive',\n    value: function receive(_ref) {\n      var user = _ref.user;\n      var text = _ref.text;\n      var channel = _ref.channel;\n      var whisper = _ref.whisper;\n\n      if (!text) {\n        this.bot.log.warning('Message received with undefined text.');\n        return;\n      }\n\n      var message = new __WEBPACK_IMPORTED_MODULE_0__messages_text__[\"a\" /* default */]({ user: user, text: text, channel: channel, whisper: whisper, adapter: this.name });\n      this.bot.emitter.emit('receive-message', message);\n    }\n  }, {\n    key: 'receiveWhisper',\n    value: function receiveWhisper(_ref2) {\n      var user = _ref2.user;\n      var text = _ref2.text;\n      var channel = _ref2.channel;\n\n      if (!text) {\n        this.bot.log.warning('Message received with undefined text.');\n        return;\n      }\n\n      text = this.bot.prependNameForWhisper(text);\n      this.receive({ user: user, text: text, channel: channel, whisper: true });\n    }\n  }, {\n    key: 'enter',\n    value: function enter(_ref3) {\n      var user = _ref3.user;\n      var channel = _ref3.channel;\n\n      var message = new __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */]({\n        user: user,\n        channel: channel,\n        adapter: this.name,\n        type: __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */].TYPES.ENTER\n      });\n\n      this.bot.emitter.emit('enter', message);\n    }\n  }, {\n    key: 'leave',\n    value: function leave(_ref4) {\n      var user = _ref4.user;\n      var channel = _ref4.channel;\n\n      var message = new __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */]({\n        user: user,\n        channel: channel,\n        adapter: this.name,\n        type: __WEBPACK_IMPORTED_MODULE_1__messages_presence__[\"a\" /* default */].TYPES.LEAVE\n      });\n\n      this.bot.emitter.emit('leave', message);\n    }\n  }, {\n    key: 'send',\n    value: function send(message) {\n      this.bot.log.warning(message.text);\n    }\n  }, {\n    key: 'ping',\n    value: function ping() {\n      this.pong();\n    }\n  }, {\n    key: 'pong',\n    value: function pong() {\n      this.bot.log.warning('Ping received, this.pong() not implemented.');\n    }\n  }, {\n    key: 'getUserIdByUserName',\n    value: function getUserIdByUserName(name) {\n      this.bot.log.warning('getUserIdByUserName not implemented by this adapter.');\n      return name;\n    }\n  }, {\n    key: 'getRoleIdByRoleName',\n    value: function getRoleIdByRoleName(name) {\n      this.bot.log.warning('getRoleIdByRoleName not implemented by this adapter');\n      return name;\n    }\n  }, {\n    key: 'getRolesForUser',\n    value: function getRolesForUser() {\n      return [];\n    }\n  }, {\n    key: 'initUsers',\n    value: function () {\n      var _ref5 = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.databaseInitialized();\n\n              case 2:\n                this.adapterUsers = this.bot.users[this.name];\n\n                if (!this.adapterUsers) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt('return');\n\n              case 5:\n\n                this.bot.users[this.name] = {};\n                this.adapterUsers = this.bot.users[this.name];\n                this.bot.db.write();\n\n              case 8:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initUsers() {\n        return _ref5.apply(this, arguments);\n      }\n\n      return initUsers;\n    }()\n  }, {\n    key: 'getRoles',\n    value: function getRoles() {\n      this.bot.log.warning('getRoles not implemented by this adapter');\n      return false;\n    }\n  }, {\n    key: 'getUser',\n    value: function () {\n      var _ref6 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(adapterUserId, adapterUsername) {\n        var adapterUser = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n        var roles, user;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.databaseInitialized();\n\n              case 2:\n                if (!adapterUserId) {\n                  this.bot.error('Adapter ' + this.name + ' called getUser without adapterUserId');\n                }\n                if (!adapterUsername) {\n                  this.bot.warning('Adapter ' + this.name + ' called getUser without adapterUsername');\n                }\n\n                roles = this.getRoles(adapterUserId, adapterUser);\n\n                if (!this.adapterUsers) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                if (!this.adapterUsers[adapterUserId]) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                if (roles) {\n                  this.adapterUsers[adapterUserId].roles = roles;\n                }\n\n                if (adapterUsername) {\n                  this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId].name = adapterUsername;\n                }\n\n                return _context2.abrupt('return', this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId]);\n\n              case 10:\n                user = new __WEBPACK_IMPORTED_MODULE_2__user__[\"a\" /* default */](adapterUsername);\n\n                user.adapters = _defineProperty({}, this.name, { userId: adapterUserId });\n                this.adapterUsers[adapterUserId] = { name: adapterUsername,\n                  botId: user.id,\n                  roles: roles || [] };\n                this.bot.users.botUsers[user.id] = user;\n                this.bot.db.write();\n                return _context2.abrupt('return', user);\n\n              case 16:\n                return _context2.abrupt('return', new __WEBPACK_IMPORTED_MODULE_2__user__[\"a\" /* default */](adapterUsername, adapterUserId, _defineProperty({}, this.name, adapterUserId)));\n\n              case 17:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getUser(_x2, _x3, _x4) {\n        return _ref6.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }]);\n\n  return Adapter;\n}(), _class.STATUS = {\n  UNINITIALIZED: 0,\n  CONNECTING: 1,\n  CONNECTED: 2,\n  DISCONNECTED: 3,\n  RECONNECTING: 4,\n  ERROR: 5\n}, _temp);\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(3);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return PresenceMessage; });\nvar _class, _temp;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar PresenceMessage = (_temp = _class = function (_Message) {\n  _inherits(PresenceMessage, _Message);\n\n  function PresenceMessage(_ref) {\n    var type = _ref.type;\n\n    _classCallCheck(this, PresenceMessage);\n\n    var _this = _possibleConstructorReturn(this, (PresenceMessage.__proto__ || Object.getPrototypeOf(PresenceMessage)).apply(this, arguments));\n\n    _this.type = type;\n    return _this;\n  }\n\n  return PresenceMessage;\n}(__WEBPACK_IMPORTED_MODULE_0__message__[\"a\" /* default */]), _class.TYPES = {\n  ENTER: 0,\n  LEAVE: 1\n}, _temp);\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapter__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__adapters__ = __webpack_require__(20);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"b\", function() { return adapters; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\"]; });\n\n\n\nvar adapters = __WEBPACK_IMPORTED_MODULE_0__adapters__;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__presence__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__text__ = __webpack_require__(4);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__message__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__presence__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_2__text__[\"a\"]; });\n\n\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugin__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__http__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chat__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugins__ = __webpack_require__(6);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"i\", function() { return plugins; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_1__plugin__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_2__event__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_3__http__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"d\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"e\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"g\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"h\", function() { return __WEBPACK_IMPORTED_MODULE_4__chat__[\"b\"]; });\n\n\n\n\n\n\n\nvar plugins = __WEBPACK_IMPORTED_MODULE_0__plugins__;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"eventemitter3\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lodash\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lodash/array\");\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"log\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"superagent\");\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"superagent-promise-plugin\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"util\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shell__ = __webpack_require__(21);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"Shell\", function() { return __WEBPACK_IMPORTED_MODULE_0__shell__[\"a\"]; });\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_readline__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_readline___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_readline__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapter__ = __webpack_require__(8);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return ShellAdapter; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar SHELL = 'SHELL';\n\nvar EXIT_COMMANDS = ['exit', 'quit', 'q'];\n\nvar ShellAdapter = function (_Adapter) {\n  _inherits(ShellAdapter, _Adapter);\n\n  function ShellAdapter() {\n    _classCallCheck(this, ShellAdapter);\n\n    var _this = _possibleConstructorReturn(this, (ShellAdapter.__proto__ || Object.getPrototypeOf(ShellAdapter)).call(this));\n\n    _this.name = 'shell';\n\n    _this.rl = __WEBPACK_IMPORTED_MODULE_0_readline___default.a.createInterface({\n      input: process.stdin,\n      output: process.stdout\n    });\n\n    return _this;\n  }\n\n  _createClass(ShellAdapter, [{\n    key: 'prompt',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.databaseInitialized();\n\n              case 2:\n                _context.next = 4;\n                return this.getUser('shell', 'shell');\n\n              case 4:\n                this.user = _context.sent;\n\n                this.rl.question('Chat: ', function (answer) {\n                  if (EXIT_COMMANDS.includes(answer)) {\n                    _this2.bot.db.write().then(function () {\n                      return process.exit();\n                    });\n                  }\n\n                  _get(ShellAdapter.prototype.__proto__ || Object.getPrototypeOf(ShellAdapter.prototype), 'receive', _this2).call(_this2, {\n                    text: answer,\n                    channel: SHELL,\n                    user: _this2.user\n                  });\n\n                  _this2.prompt();\n                });\n\n              case 6:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function prompt() {\n        return _ref.apply(this, arguments);\n      }\n\n      return prompt;\n    }()\n  }, {\n    key: 'register',\n    value: function register(bot) {\n      _get(ShellAdapter.prototype.__proto__ || Object.getPrototypeOf(ShellAdapter.prototype), 'register', this).call(this, bot);\n      this.prompt();\n      this.status = __WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\" /* default */].STATUS.CONNECTED;\n    }\n  }, {\n    key: 'getUserIdByUserName',\n    value: function getUserIdByUserName() {\n      return this.user.id;\n    }\n  }]);\n\n  return ShellAdapter;\n}(__WEBPACK_IMPORTED_MODULE_1__adapter__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cryptr__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cryptr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_cryptr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lowdb__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lowdb___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lowdb__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_fs_extra__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_fs_extra___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_fs_extra__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_underscore_db__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_underscore_db___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_underscore_db__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"b\", function() { return deserialize; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"c\", function() { return serialize; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"d\", function() { return read; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"e\", function() { return write; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"f\", function() { return readLocal; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"g\", function() { return writeLocal; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return DB; });\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\n\nvar deserialize = function deserialize(cryptr) {\n  return function (str) {\n    if (!str) {\n      return {};\n    }\n    var decrypted = cryptr.decrypt(str);\n    var obj = JSON.parse(decrypted);\n    return obj;\n  };\n};\n\nvar serialize = function serialize(cryptr) {\n  return function (obj) {\n    var str = JSON.stringify(obj);\n    var encrypted = cryptr.encrypt(str);\n    return encrypted;\n  };\n};\n\nvar read = function read(readFile) {\n  return function (path, deserialize) {\n    return new Promise(function (resolve, reject) {\n      readFile(path).then(function (data) {\n        try {\n          resolve(deserialize(data));\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  };\n};\n\nvar write = function write(writeFile) {\n  return function (path, obj, serialize) {\n    return new Promise(function (resolve, reject) {\n      try {\n        var data = serialize(obj);\n        writeFile(path, data).then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n};\n\nvar readLocal = function readLocal(path) {\n  return new Promise(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.ensureFile(path, function (err) {\n      if (err) {\n        return reject(err);\n      }\n      __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.readFile(path, 'utf8', function (err, data) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nvar writeLocal = function writeLocal(path, data) {\n  return new Promise(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.ensureFile(path, function (err) {\n      if (err) {\n        return reject(err);\n      }\n      __WEBPACK_IMPORTED_MODULE_2_fs_extra___default.a.writeFile(path, data, 'utf8', function (err) {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(data);\n      });\n    });\n  });\n};\n\nvar DB = function () {\n  var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2) {\n    var path = _ref2.path;\n    var key = _ref2.key;\n    var _ref2$readFile = _ref2.readFile;\n    var readFile = _ref2$readFile === undefined ? readLocal : _ref2$readFile;\n    var _ref2$writeFile = _ref2.writeFile;\n    var writeFile = _ref2$writeFile === undefined ? writeLocal : _ref2$writeFile;\n    var cryptr, dbPath, db;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cryptr = new __WEBPACK_IMPORTED_MODULE_0_cryptr___default.a(key || name);\n            dbPath = path || './data/' + name + '.json';\n            _context.next = 4;\n            return new __WEBPACK_IMPORTED_MODULE_1_lowdb___default.a(dbPath, {\n              storage: {\n                read: read(readFile),\n                write: write(writeFile)\n              },\n              format: {\n                deserialize: deserialize(cryptr),\n                serialize: serialize(cryptr)\n              }\n            });\n\n          case 4:\n            db = _context.sent;\n\n\n            db._.mixin(__WEBPACK_IMPORTED_MODULE_3_underscore_db___default.a);\n            return _context.abrupt('return', db);\n\n          case 7:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function DB(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return EventPlugin; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar EventPlugin = function (_Plugin) {\n  _inherits(EventPlugin, _Plugin);\n\n  function EventPlugin() {\n    _classCallCheck(this, EventPlugin);\n\n    return _possibleConstructorReturn(this, (EventPlugin.__proto__ || Object.getPrototypeOf(EventPlugin)).apply(this, arguments));\n  }\n\n  return EventPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugin__ = __webpack_require__(1);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return HTTPPlugin; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar HTTPPlugin = function (_Plugin) {\n  _inherits(HTTPPlugin, _Plugin);\n\n  function HTTPPlugin() {\n    _classCallCheck(this, HTTPPlugin);\n\n    return _possibleConstructorReturn(this, (HTTPPlugin.__proto__ || Object.getPrototypeOf(HTTPPlugin)).apply(this, arguments));\n  }\n\n  return HTTPPlugin;\n}(__WEBPACK_IMPORTED_MODULE_0__plugin__[\"a\" /* default */]);\n\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return Greetings; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _desc, _value, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar GREETINGS = ['hi', 'hello', 'sup', 'greetings', 'yo', 'hey'];\n\nvar FAREWELLS = ['goodbye', 'farwell', 'bye', 'later', 'see ya', 'cya'];\n\nvar shouldGreet = function shouldGreet(m) {\n  return GREETINGS.includes(m.text.toLowerCase());\n};\nvar shouldFarewell = function shouldFarewell(m) {\n  return FAREWELLS.includes(m.text.toLowerCase());\n};\n\nvar Greetings = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('Greets you back when you greet the channel.'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('greetings'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"c\" /* listen */])(shouldGreet), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('Says goodbye when you do.'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('greetings'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"c\" /* listen */])(shouldFarewell), (_class = function (_ChatPlugin) {\n  _inherits(Greetings, _ChatPlugin);\n\n  function Greetings() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Greetings);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Greetings.__proto__ || Object.getPrototypeOf(Greetings)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'greeting', _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Greetings, [{\n    key: 'greeting',\n    value: function greeting(_, message) {\n      var randomGreeting = GREETINGS[parseInt(Math.random() * GREETINGS.length)];\n      return randomGreeting + ', ' + message.user.name + '!';\n    }\n  }, {\n    key: 'farewell',\n    value: function farewell(_, message) {\n      var randomFarewell = FAREWELLS[parseInt(Math.random() * FAREWELLS.length)];\n      return randomFarewell + ', ' + message.user.name + '!';\n    }\n  }]);\n\n  return Greetings;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* ChatPlugin */]), (_applyDecoratedDescriptor(_class.prototype, 'greeting', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'greeting'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'farewell', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'farewell'), _class.prototype)), _class));\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return Help; });\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _desc, _value, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\nvar Help = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/help explains commands.'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('help'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^help$/i), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/help <search> finds information about a specific command.'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('help'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^help (\\w+)$/i), (_class = function (_ChatPlugin) {\n  _inherits(Help, _ChatPlugin);\n\n  function Help() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Help);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Help.__proto__ || Object.getPrototypeOf(Help)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'help', _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Help, [{\n    key: 'pluginHelp',\n    value: function pluginHelp() {\n      return this.bot.plugins.filter(function (p) {\n        return p.help && p.help.length > 0;\n      }).map(function (p) {\n        return p.helpText().join('\\n');\n      }, []).join('\\n');\n    }\n  }, {\n    key: 'pluginHelpSearch',\n    value: function pluginHelpSearch(_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2);\n\n      var search = _ref3[1];\n\n      return this.bot.plugins.filter(function (p) {\n        return p.help && p.help.length > 0;\n      }).map(function (p) {\n        return p.helpText().filter(function (t) {\n          return t.toLowerCase().indexOf(search.toLowerCase()) > -1;\n        }).join('\\n');\n      }, []).join('\\n');\n    }\n  }]);\n\n  return Help;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* ChatPlugin */]), (_applyDecoratedDescriptor(_class.prototype, 'pluginHelp', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'pluginHelp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'pluginHelpSearch', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'pluginHelpSearch'), _class.prototype)), _class));\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chat__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_node_uuid__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_node_uuid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_node_uuid__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return Permissions; });\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _dec22, _dec23, _dec24, _dec25, _dec26, _dec27, _desc, _value, _class, _class2, _temp;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n\n\n\nvar Permissions = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions authorize admin <password> to authorize yourself as an admin'), _dec2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('public'), _dec3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions authorize admin (.+)$/i), _dec4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions add role <role> to <user> to add a role to a user'), _dec5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec6 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions add role (\\w+) to (.+)$/i), _dec7 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view user <user> to view roles given to a user'), _dec8 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec9 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions view user (.+)$/i), _dec10 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view effective user <user> to view all roles assigned to <user>'), _dec11 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec12 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions view effective user (.+)$/i), _dec13 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions remove role <role> from <user> to remove a role from a user'), _dec14 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec15 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions remove role (\\w+) from (.+)$/i), _dec16 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions add role <permissiongroup> <role> to allow access to a permissionGroup'), _dec17 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec18 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions add role (\\S+) (\\w+)$/i), _dec19 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions remove group <permissionGroup> <role> to allow access to a permissionGroup'), _dec20 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec21 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions remove role (\\S+) (\\w+)$/i), _dec22 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/permissions view group <permissionGroup> to view roles with access to ' + 'commands under that permissionGroup'), _dec23 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('role-management'), _dec24 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^permissions view group (\\S+)$/i), _dec25 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"a\" /* help */])('/login to recieve a token to claim your users across chat adapters, ' + '/login <userIdString> <userToken> to login on another adapter'), _dec26 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"b\" /* permissionGroup */])('public'), _dec27 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__chat__[\"e\" /* respond */])(/^login\\s*(\\S+)?\\s*(\\S+)?$/i), (_class = (_temp = _class2 = function (_ChatPlugin) {\n  _inherits(Permissions, _ChatPlugin);\n\n  function Permissions(options) {\n    _classCallCheck(this, Permissions);\n\n    var _this = _possibleConstructorReturn(this, (Permissions.__proto__ || Object.getPrototypeOf(Permissions)).apply(this, arguments));\n\n    _this.name = 'permissions';\n    _this.defaultDatabase = { permissions: {} };\n\n\n    if (options) {\n      _this.adminPassword = options.adminPassword;\n    }\n    return _this;\n  }\n\n  _createClass(Permissions, [{\n    key: 'register',\n    value: function register(bot) {\n      _get(Permissions.prototype.__proto__ || Object.getPrototypeOf(Permissions.prototype), 'register', this).call(this, bot);\n\n      if (!this.adminPassword) {\n        bot.log.error('No adminPassword provided to Permissions plugin');\n      }\n    }\n  }, {\n    key: 'admin',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2, message) {\n        var _ref3 = _slicedToArray(_ref2, 2);\n\n        var adminPassword = _ref3[1];\n        var id;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                if (!(this.adminPassword && adminPassword === this.adminPassword)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                id = Permissions.nameToId(message.user.id);\n\n                this.bot.addRole(id, 'admin');\n                return _context.abrupt('return', 'User authorized as admin.');\n\n              case 6:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function admin(_x, _x2) {\n        return _ref.apply(this, arguments);\n      }\n\n      return admin;\n    }()\n  }, {\n    key: 'addRoleToUser',\n    value: function () {\n      var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref5, message) {\n        var _ref6 = _slicedToArray(_ref5, 3);\n\n        var match = _ref6[0];\n        var role = _ref6[1];\n        var name = _ref6[2];\n        var userIdDirty, userId;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context2.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                userIdDirty = void 0;\n                _context2.prev = 4;\n                _context2.next = 7;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 7:\n                userIdDirty = _context2.sent;\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2['catch'](4);\n\n                this.bot.log.warn(_context2.t0);\n\n              case 13:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                this.bot.addRole(userId, role);\n                return _context2.abrupt('return', name + ' added to role ' + role + '.');\n\n              case 17:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 10]]);\n      }));\n\n      function addRoleToUser(_x3, _x4) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return addRoleToUser;\n    }()\n  }, {\n    key: 'viewUser',\n    value: function () {\n      var _ref7 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref8, message) {\n        var _ref9 = _slicedToArray(_ref8, 2);\n\n        var match = _ref9[0];\n        var name = _ref9[1];\n        var userIdDirty, userId, perms;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                userIdDirty = void 0;\n                _context3.prev = 3;\n                _context3.next = 6;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 6:\n                userIdDirty = _context3.sent;\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3['catch'](3);\n\n                this.bot.log.warn(_context3.t0);\n\n              case 12:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                perms = this.bot.getRoles(userId);\n                return _context3.abrupt('return', perms.join(', '));\n\n              case 16:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 9]]);\n      }));\n\n      function viewUser(_x5, _x6) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return viewUser;\n    }()\n  }, {\n    key: 'viewEffectiveUser',\n    value: function () {\n      var _ref10 = _asyncToGenerator(regeneratorRuntime.mark(function _callee4(_ref11, message) {\n        var _ref12 = _slicedToArray(_ref11, 2);\n\n        var match = _ref12[0];\n        var name = _ref12[1];\n        var userIdDirty, userId, perms;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                userIdDirty = void 0;\n                _context4.prev = 3;\n                _context4.next = 6;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 6:\n                userIdDirty = _context4.sent;\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4['catch'](3);\n\n                this.bot.log.warn(_context4.t0);\n\n              case 12:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                perms = this.bot.getUserRoles(userId);\n                return _context4.abrupt('return', perms.join(', '));\n\n              case 16:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[3, 9]]);\n      }));\n\n      function viewEffectiveUser(_x7, _x8) {\n        return _ref10.apply(this, arguments);\n      }\n\n      return viewEffectiveUser;\n    }()\n  }, {\n    key: 'removeRoleFromUser',\n    value: function () {\n      var _ref13 = _asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref14, message) {\n        var _ref15 = _slicedToArray(_ref14, 3);\n\n        var match = _ref15[0];\n        var role = _ref15[1];\n        var name = _ref15[2];\n        var userIdDirty, userId;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context5.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                userIdDirty = void 0;\n                _context5.prev = 4;\n                _context5.next = 7;\n                return this.bot.adapters[message.adapter].getUserIdByUserName(name);\n\n              case 7:\n                userIdDirty = _context5.sent;\n                _context5.next = 13;\n                break;\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5['catch'](4);\n\n                this.bot.log.warn(_context5.t0);\n\n              case 13:\n                userId = Permissions.nameToId(userIdDirty);\n\n                if (!userId) {\n                  _context5.next = 17;\n                  break;\n                }\n\n                this.bot.removeRole(userId, role);\n                return _context5.abrupt('return', name + ' removed from role ' + role + '.');\n\n              case 17:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[4, 10]]);\n      }));\n\n      function removeRoleFromUser(_x9, _x10) {\n        return _ref13.apply(this, arguments);\n      }\n\n      return removeRoleFromUser;\n    }()\n  }, {\n    key: 'addRoleToGroup',\n    value: function () {\n      var _ref16 = _asyncToGenerator(regeneratorRuntime.mark(function _callee6(_ref17 /*, message*/) {\n        var _ref18 = _slicedToArray(_ref17, 3);\n\n        var permissionGroup = _ref18[1];\n        var role = _ref18[2];\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context6.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n\n                this.bot.db.set('permissions.groups.' + permissionGroup + '.' + role, true).value();\n                this.bot.db.write();\n                return _context6.abrupt('return', 'role \"' + role + '\" given permission to commands under group \"' + permissionGroup + '\".');\n\n              case 6:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function addRoleToGroup(_x11) {\n        return _ref16.apply(this, arguments);\n      }\n\n      return addRoleToGroup;\n    }()\n  }, {\n    key: 'removeRoleFromGroup',\n    value: function () {\n      var _ref19 = _asyncToGenerator(regeneratorRuntime.mark(function _callee7(_ref20 /*, message*/) {\n        var _ref21 = _slicedToArray(_ref20, 3);\n\n        var permissionGroup = _ref21[1];\n        var role = _ref21[2];\n        var group;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                role = Permissions.nameToId(role);\n                _context7.next = 3;\n                return this.databaseInitialized();\n\n              case 3:\n                group = this.bot.db.get('permissions.groups.' + permissionGroup).value();\n\n                delete group[role];\n                this.bot.db.set('permissions.groups.' + permissionGroup, group).value();\n                this.bot.db.write();\n                return _context7.abrupt('return', 'role \"' + role + '\" removed permission to commands under group \"' + permissionGroup + '\".');\n\n              case 8:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function removeRoleFromGroup(_x12) {\n        return _ref19.apply(this, arguments);\n      }\n\n      return removeRoleFromGroup;\n    }()\n  }, {\n    key: 'viewGroup',\n    value: function () {\n      var _ref22 = _asyncToGenerator(regeneratorRuntime.mark(function _callee8(_ref23 /*, message*/) {\n        var _ref24 = _slicedToArray(_ref23, 2);\n\n        var group = _ref24[1];\n        var perms;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                perms = Object.keys(this.bot.db.get('permissions.groups.' + group).value());\n                return _context8.abrupt('return', perms.join(', '));\n\n              case 4:\n              case 'end':\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function viewGroup(_x13) {\n        return _ref22.apply(this, arguments);\n      }\n\n      return viewGroup;\n    }()\n  }, {\n    key: 'multipleAdapterLogin',\n    value: function () {\n      var _ref25 = _asyncToGenerator(regeneratorRuntime.mark(function _callee9(_ref26, message) {\n        var _ref27 = _slicedToArray(_ref26, 3);\n\n        var userId = _ref27[1];\n        var token = _ref27[2];\n        var user;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                if (!(userId && token)) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                user = this.bot.users.botUsers[userId];\n\n                if (!(user && user.id !== message.user.id)) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                if (!(user.token === token)) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                user.token = undefined;\n                return _context9.abrupt('return', this.bot.mergeUsers(user, message.user));\n\n              case 8:\n                return _context9.abrupt('return', 'Wrong userId or token specified');\n\n              case 9:\n                token = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_node_uuid__[\"v4\"])();\n                message.user.token = token;\n                return _context9.abrupt('return', 'Please whisper this to the bot on the other adapter \\n' + ('login ' + message.user.id + ' ' + token));\n\n              case 12:\n              case 'end':\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function multipleAdapterLogin(_x14, _x15) {\n        return _ref25.apply(this, arguments);\n      }\n\n      return multipleAdapterLogin;\n    }()\n  }]);\n\n  return Permissions;\n}(__WEBPACK_IMPORTED_MODULE_0__chat__[\"d\" /* ChatPlugin */]), _class2.nameToId = function (name) {\n  if (name) {\n    return name.replace(/[^\\w-]/g, '').toLowerCase();\n  }\n  return;\n}, _temp), (_applyDecoratedDescriptor(_class.prototype, 'admin', [_dec, _dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'admin'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'addRoleToUser', [_dec4, _dec5, _dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'addRoleToUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewUser', [_dec7, _dec8, _dec9], Object.getOwnPropertyDescriptor(_class.prototype, 'viewUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewEffectiveUser', [_dec10, _dec11, _dec12], Object.getOwnPropertyDescriptor(_class.prototype, 'viewEffectiveUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'removeRoleFromUser', [_dec13, _dec14, _dec15], Object.getOwnPropertyDescriptor(_class.prototype, 'removeRoleFromUser'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'addRoleToGroup', [_dec16, _dec17, _dec18], Object.getOwnPropertyDescriptor(_class.prototype, 'addRoleToGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'removeRoleFromGroup', [_dec19, _dec20, _dec21], Object.getOwnPropertyDescriptor(_class.prototype, 'removeRoleFromGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'viewGroup', [_dec22, _dec23, _dec24], Object.getOwnPropertyDescriptor(_class.prototype, 'viewGroup'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'multipleAdapterLogin', [_dec25, _dec26, _dec27], Object.getOwnPropertyDescriptor(_class.prototype, 'multipleAdapterLogin'), _class.prototype)), _class));\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"cryptr\");\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"fs-extra\");\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"lowdb\");\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"readline\");\n\n/***/ },\n/* 32 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"underscore-db\");\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eventemitter3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_log__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_log___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_log__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_superagent__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_superagent___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_superagent__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash_array__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash_array___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash_array__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_util__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_util___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_util__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugins_plugins__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__db__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__adapters__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__messages__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__plugins__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__user__ = __webpack_require__(7);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"Exobot\", function() { return Exobot; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"LogLevels\", function() { return LogLevels; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"Adapter\", function() { return __WEBPACK_IMPORTED_MODULE_9__adapters__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"adapters\", function() { return __WEBPACK_IMPORTED_MODULE_9__adapters__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"Message\", function() { return __WEBPACK_IMPORTED_MODULE_10__messages__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"PresenceMessage\", function() { return __WEBPACK_IMPORTED_MODULE_10__messages__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"TextMessage\", function() { return __WEBPACK_IMPORTED_MODULE_10__messages__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"Plugin\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"EventPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"HTTPPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"ChatPlugin\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"d\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"respond\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"e\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"listen\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"f\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"help\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"g\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"permissionGroup\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"h\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"plugins\", function() { return __WEBPACK_IMPORTED_MODULE_11__plugins__[\"i\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"deserialize\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"serialize\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"read\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"d\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"write\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"e\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"readLocal\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"f\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"writeLocal\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"g\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(exports, \"DB\", function() { return __WEBPACK_IMPORTED_MODULE_8__db__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, \"User\", function() { return __WEBPACK_IMPORTED_MODULE_12__user__[\"a\"]; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp, _initialiseProps;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default.a.Promise = Promise;\n\n\n\nvar http = __WEBPACK_IMPORTED_MODULE_3_superagent_promise_plugin___default.a.patch(__WEBPACK_IMPORTED_MODULE_2_superagent___default.a);\nvar USERS_DB = 'exobot-users';\n\n\n\nvar Exobot = (_temp = _class = function () {\n  function Exobot(name) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, Exobot);\n\n    _initialiseProps.call(this);\n\n    this.name = name;\n    this.alias = options.alias;\n    this.emitter = new __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default.a();\n    this.http = http;\n    this.requirePermissions = options.requirePermissions;\n\n    this.initLog(options.logLevel || __WEBPACK_IMPORTED_MODULE_1_log___default.a.WARNING);\n    var dbPath = options.dbPath || './data/' + name + '.json';\n    this.initDB(options.key, dbPath, options.readFile, options.writeFile);\n    this.initUsers();\n\n    this.initAdapters(options.adapters);\n    this.initPlugins(options.plugins);\n  }\n\n  _createClass(Exobot, [{\n    key: 'initUsers',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.databaseInitialized();\n\n              case 2:\n                this.users = this.db.get(USERS_DB).value();\n\n                if (!this.users) {\n                  _context.next = 6;\n                  break;\n                }\n\n                this.log.info(Object.keys(this.users.botUsers).length, 'exobot users');\n                return _context.abrupt('return');\n\n              case 6:\n                this.db.set(USERS_DB, { botUsers: {} }).value();\n                this.users = this.db.get(USERS_DB).value();\n\n              case 8:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initUsers() {\n        return _ref.apply(this, arguments);\n      }\n\n      return initUsers;\n    }()\n  }, {\n    key: 'mergeUsers',\n    value: function mergeUsers(destUser, srcUser) {\n      var _this = this;\n\n      if (destUser && srcUser) {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__[\"merge\"])(destUser.roles, srcUser.roles);\n        Object.keys(srcUser.adapters).map(function (adapter) {\n          _this.users[adapter][srcUser.adapters[adapter].userId].botId = destUser.id;\n        });\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__[\"merge\"])(destUser.adapters, srcUser.adapters);\n        delete this.users.botUsers[srcUser.id];\n        this.db.write();\n        return 'Login complete';\n      }\n    }\n  }, {\n    key: 'addRole',\n    value: function addRole(userId, roleName) {\n      this.users.botUsers[userId].roles[roleName] = true;\n      this.db.write();\n    }\n  }, {\n    key: 'getRoles',\n    value: function getRoles(userId) {\n      return Object.keys(this.users.botUsers[userId].roles);\n    }\n  }, {\n    key: 'removeRole',\n    value: function removeRole(userId, roleName) {\n      var roles = this.users.botUsers[userId].roles;\n      delete roles[roleName];\n      this.db.write();\n    }\n  }, {\n    key: 'getUserRoles',\n    value: function getUserRoles(userId) {\n      var _this2 = this;\n\n      var user = this.users.botUsers[userId];\n      var roles = [];\n\n      if (user) {\n        Object.keys(user.adapters).map(function (adapter) {\n          var adapterRoles = _this2.adapters[adapter].getRolesForUser(user.adapters[adapter].userId);\n          if (adapterRoles) {\n            roles = roles.concat(adapterRoles);\n          }\n        });\n        roles = roles.concat(Object.keys(user.roles));\n        return roles;\n      }\n    }\n  }, {\n    key: 'checkPermissions',\n    value: function () {\n      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(userId, commandPermissionGroup) {\n        var roles, groups;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.usePermissions) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 2:\n                if (!(commandPermissionGroup === 'permissions.public')) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 4:\n                _context2.next = 6;\n                return this.databaseInitialized();\n\n              case 6:\n\n                // get user's roles\n                roles = this.getUserRoles(userId);\n                // if user has `admin` role, allow it\n\n                if (!(roles && roles.includes('admin'))) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 9:\n\n                // get roles assigned to the command group\n                groups = this.db.get('permissions.groups.' + commandPermissionGroup).value();\n                // if there are no groups, and requirePermissions is false, allow it\n                // requirePermissions = false == (public by default)\n\n                if (!(!groups || !Object.keys(groups))) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                if (this.requirePermissions) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 13:\n                return _context2.abrupt('return', false);\n\n              case 14:\n                if (!groups.public) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 16:\n                if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_lodash_array__[\"intersection\"])(roles, Object.keys(groups)).length) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                return _context2.abrupt('return', true);\n\n              case 18:\n                return _context2.abrupt('return', false);\n\n              case 19:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function checkPermissions(_x2, _x3) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: 'databaseInitialized',\n    value: function () {\n      var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3() {\n        var _this3 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.db) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                return _context3.abrupt('return', true);\n\n              case 2:\n                return _context3.abrupt('return', new Promise(function (resolve) {\n                  _this3.emitter.on('dbLoaded', resolve);\n                }));\n\n              case 3:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function databaseInitialized() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return databaseInitialized;\n    }()\n  }, {\n    key: 'addPlugin',\n    value: function addPlugin(plugin) {\n      plugin.register(this);\n      this.plugins.push(plugin);\n    }\n  }, {\n    key: 'addAdapter',\n    value: function addAdapter(adapter) {\n      var name = adapter.name;\n\n      if (this.getAdapterByName(name)) {\n        this.log.warning('Multiple \"' + name + '\" adapters were initialized.');\n      }\n\n      adapter.register(this);\n      this.adapters[adapter.name] = adapter;\n    }\n  }, {\n    key: 'prependNameForWhisper',\n    value: function prependNameForWhisper(text) {\n      if (text.slice(0, this.name.length).toLowerCase() !== this.name.toLowerCase() && text.slice(0, this.alias.length).toLowerCase() !== this.alias.toLowerCase()) {\n        text = this.name + ' ' + text;\n      }\n\n      return text;\n    }\n  }, {\n    key: 'send',\n    value: function send(message) {\n      if (!message.text) {\n        return;\n      }\n      var adapter = this.getAdapterByMessage(message);\n\n      if (!adapter) {\n        this.log.warning('Message sent with invalid adapter: ' + message.adapter);\n        return;\n      }\n\n      adapter.send(message);\n    }\n  }, {\n    key: 'getAdapterByMessage',\n    value: function getAdapterByMessage(message) {\n      return this.adapters[message.adapter];\n    }\n  }, {\n    key: 'getAdapterByName',\n    value: function getAdapterByName(name) {\n      var _this4 = this;\n\n      return Object.keys(this.adapters).map(function (id) {\n        return _this4.adapters[id];\n      }).find(function (a) {\n        return a.name.toLowerCase() === name.toLowerCase();\n      });\n    }\n  }]);\n\n  return Exobot;\n}(), _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.plugins = [];\n  this.adapters = {};\n\n  this.initAdapters = function () {\n    var adapters = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    adapters.forEach(function (a) {\n      return _this5.addAdapter(a);\n    });\n  };\n\n  this.initPlugins = function () {\n    var plugins = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    plugins.forEach(function (p) {\n      _this5.addPlugin(p);\n\n      // if the Permissions plugin isn't initialized, we can optimize later on\n      // by not waiting for DB initialization and permissions checking.\n      if (p instanceof __WEBPACK_IMPORTED_MODULE_7__plugins_plugins__[\"Permissions\"]) {\n        _this5.usePermissions = true;\n      }\n    });\n  };\n\n  this.initLog = function (logLevel) {\n    var log = new __WEBPACK_IMPORTED_MODULE_1_log___default.a(logLevel || __WEBPACK_IMPORTED_MODULE_1_log___default.a.WARNING);\n    _this5.log = log;\n    _this5.logLevel = logLevel;\n\n    if (logLevel === __WEBPACK_IMPORTED_MODULE_1_log___default.a.DEBUG) {\n      setInterval(_this5.logProcess, 10000);\n    }\n  };\n\n  this.initDB = function (key, dbPath, readFile, writeFile) {\n    if (!key) {\n      _this5.log.critical('Pass options.key in to bot initializer. Database not initializing.');\n      return;\n    }\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8__db__[\"a\" /* DB */])({\n      key: key,\n      readFile: readFile,\n      writeFile: writeFile,\n      path: dbPath,\n      emitter: _this5.emitter\n    }).then(function (db) {\n      _this5.db = db;\n      _this5.emitter.emit('dbLoaded', db);\n    }, _this5.log.critical.bind(_this5.log));\n  };\n\n  this.logProcess = function () {\n    _this5.log.debug(process.memoryUsage(), process.cpuUsage());\n  };\n}, _temp);\n\n\n\n\n\n\nvar LogLevels = __WEBPACK_IMPORTED_MODULE_1_log___default.a;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// exobot.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8759f8d502159ea67d7e","import Plugin from './plugin';\r\nimport TextMessage from '../messages/text';\r\n\r\n\r\nconst DEFAULT_REGEXP = /.+/;\r\n\r\nexport class ChatPlugin extends Plugin {\r\n  regexp = DEFAULT_REGEXP;\r\n\r\n  respondFunctions = [];\r\n  listenFunctions = [];\r\n  help = [];\r\n\r\n  constructor () {\r\n    super(...arguments);\r\n  }\r\n\r\n  helpText () {\r\n    return this.help.map(n => `[${this[n].permissionGroup}] ${this[n].help}`);\r\n  }\r\n\r\n  register (bot) {\r\n    super.register(bot);\r\n    this.bot = bot;\r\n    this.botNameRegex = new RegExp(`^(?:(?:@?${bot.name}|${bot.alias})[,\\\\s:.-]*)(.+)`, 'i');\r\n\r\n    if (this.postConstructor) {\r\n      this.postConstructor.forEach(([fn, args]) => fn.bind(this)(...args));\r\n    }\r\n\r\n    bot.emitter.on('receive-message', message => {\r\n      // v = [\r\n      //   validation function or regex,\r\n      //   the response function from the plugin,\r\n      //   the name of the function (the class.property name)\r\n      // ];\r\n      // as pushed by the listen/respond functions below\r\n      this.respondFunctions.forEach(v => this.process(...v, message, true));\r\n      this.listenFunctions.forEach(v => this.process(...v, message));\r\n    });\r\n  }\r\n\r\n  async process (validation, response, fnName, message, isResponder=false) {\r\n    try {\r\n      if (isResponder) {\r\n        const text = this.validateBotName(message);\r\n        if (!text) { return; }\r\n\r\n        message = new TextMessage({ ...message, text, direct: true });\r\n      } else if (message.whisper) {\r\n\r\n        // if it's a listener on a whisper, remove the botname first so it still\r\n        // works\r\n        const text = this.validateBotName(message);\r\n        if (!text) { return; }\r\n\r\n        message = new TextMessage({ ...message, text, direct: true });\r\n      } else {\n        const text = message.text;\n        if (!text) { return; }\n\n        message = new TextMessage({ ...message, text, direct: true });\n      }\r\n\r\n      if (validation.exec) { validation = this.validate(validation); }\r\n\r\n      const res = validation(message);\r\n\r\n      if (res) {\r\n        if (await this.checkPermissions(message.user.id, this[fnName].permissionGroup)) {\r\n          const text = response.bind(this)(res, message);\r\n          if (!text) { return; }\r\n\r\n          if (text instanceof Promise) {\r\n            text.then(t => {\r\n              const newMessage = new TextMessage({ ...message, text: t });\r\n              this.bot.send(newMessage);\r\n            });\r\n          } else {\r\n            const newMessage = new TextMessage({ ...message, text });\r\n            this.bot.send(newMessage);\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      this.bot.log.warning(e);\r\n    }\r\n  }\r\n\r\n  async checkPermissions (userId, commandPermissionGroup) {\r\n    return this.bot.checkPermissions(userId, commandPermissionGroup);\r\n  }\r\n\r\n  validate (regex) {\r\n    return message => regex.exec(message.text);\r\n  }\r\n\r\n  validateBotName (message) {\r\n    const exec = this.botNameRegex.exec(message.text);\r\n    if (!exec) { return; }\r\n\r\n    return exec[1];\r\n  }\r\n\r\n  respond (validation, fn, name) {\r\n    this.respondFunctions.push([validation, fn, name]);\r\n  }\r\n\r\n  listen (validation, fn, name) {\r\n    this.listenFunctions.push([validation, fn, name]);\r\n  }\r\n\r\n  setHelp (text, fnName) {\r\n    this.help.push(fnName);\r\n    this[fnName].help = text;\r\n  }\r\n\r\n  setPermissionGroup (fn, name) {\r\n    this[fn].permissionGroup = `${this.name}.${name}`;\r\n  }\r\n}\r\n\r\nexport const listen = (validation) => (target, name, descriptor) => {\r\n  const fn = descriptor.value;\r\n\r\n  if (!fn.permissionGroup) {\r\n    fn.permissionGoup = `${target.name}.${name}`;\r\n  }\r\n\r\n  target.postConstructor = target.postConstructor || [];\r\n  target.postConstructor.push(\r\n    [target.listen, [validation, fn, name]]\r\n  );\r\n};\r\n\r\nexport const respond = (validation) => (target, name, descriptor) => {\r\n  const fn = descriptor.value;\r\n\r\n  if (!fn.permissionGroup) {\r\n    fn.permissionGoup = `${target.name}.${name}`;\r\n  }\r\n\r\n  target.postConstructor = target.postConstructor || [];\r\n  target.postConstructor.push(\r\n    [target.respond, [validation, fn, name]]\r\n  );\r\n};\r\n\r\nexport const help = (text) => (target, fnName) => {\r\n  target.postConstructor.push(\r\n    [target.setHelp, [text, fnName]]\r\n  );\r\n};\r\n\r\nexport const permissionGroup = (name) => (target, fnName) => {\r\n  target.postConstructor.push([target.setPermissionGroup, [fnName, name] ]);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/chat.js","export default class Plugin {\r\n  help = undefined;\r\n  _requiresDatabase = false;\r\n\r\n  constructor (options={}) {\r\n    this.options = options;\r\n  }\r\n\r\n  register (bot) {\r\n    if (!bot) { throw new Error('No bot passed to register; fatal.'); }\r\n\r\n    if (!this.name) {\r\n      throw new Error(\r\n        'This plugin has a missing `name` property; some functionality will not work.'\r\n      );\r\n    }\r\n\r\n    this.bot = bot;\r\n    this.database();\r\n  }\r\n\r\n  listen () {\r\n    if (!this.bot) {\r\n      throw new Error('No bot to listen on; fatal.');\r\n    }\r\n  }\r\n\r\n  async database () {\r\n    if (this.defaultDatabase) {\r\n      await this.databaseInitialized();\r\n\r\n      Object.keys(this.defaultDatabase).forEach(name => {\r\n        const val = this.bot.db.get(name).value();\r\n\r\n        if (typeof val === 'undefined') {\r\n          this.bot.db.set(name, this.defaultDatabase[name]).value();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  async databaseInitialized () {\r\n    this._requiresDatabase = true;\r\n\r\n    if (this._requiresDatabase && this.bot.db) {\r\n      return true;\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      this.bot.emitter.on('dbLoaded', resolve);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugin.js","import { v4 as uuid } from 'node-uuid';\r\n\r\nexport default class Message {\r\n  constructor ({ user, channel, adapter, id=uuid() }) {\r\n    this.user = user;\r\n    this.channel = channel;\r\n    this.adapter = adapter;\r\n    this.id = id;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/message.js","import Message from './message';\r\n\r\nexport default class TextMessage extends Message {\r\n  constructor ({ text, whisper=false }) {\r\n    super(...arguments);\r\n\r\n    if (text) {\r\n      this.text = text.trim();\r\n    }\r\n\r\n    this.whisper = !!whisper;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/text.js","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 5\n// module chunks = 0","import { v4 as uuid } from 'node-uuid';\r\n\r\nexport default class User {\r\n  constructor (name, id, adapter) {\r\n    this.name = name;\r\n    this.id = id || uuid();\r\n    this.roles = {};\r\n    this.adapters = adapter || {};\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/user.js","import TextMessage from '../messages/text';\r\nimport PresenceMessage from '../messages/presence';\r\nimport User from '../user';\r\nexport default class Adapter {\r\n  static STATUS = {\r\n    UNINITIALIZED: 0,\r\n    CONNECTING: 1,\r\n    CONNECTED: 2,\r\n    DISCONNECTED: 3,\r\n    RECONNECTING: 4,\r\n    ERROR: 5,\r\n  }\r\n\r\n  constructor (options={}) {\r\n    this.options = options;\r\n    this.status = Adapter.STATUS.UNINITIALIZED;\r\n    this.roleMapping = options.roleMapping;\r\n  }\r\n\r\n  register (bot) {\r\n    if (!bot) { throw new Error('No bot passed to register; fatal.'); }\r\n    if (!this.name) {\r\n      throw new Error('This adapter has no `name` property; some plugins will not work.');\r\n    }\r\n\r\n    this.bot = bot;\r\n    this.initUsers();\r\n    this.status = Adapter.STATUS.CONNECTING;\r\n    this.listen();\r\n\r\n  }\r\n\r\n  listen () {\r\n    if (!this.bot) { throw new Error('No bot to listen on; fatal.'); }\r\n  }\r\n\r\n  receive ({ user, text, channel, whisper }) {\r\n    if (!text) {\r\n      this.bot.log.warning('Message received with undefined text.');\r\n      return;\r\n    }\r\n\r\n    const message = new TextMessage({ user, text, channel, whisper, adapter: this.name });\r\n    this.bot.emitter.emit('receive-message', message);\r\n  }\r\n\r\n  receiveWhisper ({ user, text, channel }) {\r\n    if (!text) {\r\n      this.bot.log.warning('Message received with undefined text.');\r\n      return;\r\n    }\r\n\r\n    text = this.bot.prependNameForWhisper(text);\r\n    this.receive({ user, text, channel, whisper: true });\r\n  }\r\n\r\n  enter ({ user, channel }) {\r\n    const message = new PresenceMessage({\r\n      user,\r\n      channel,\r\n      adapter: this.name,\r\n      type: PresenceMessage.TYPES.ENTER,\r\n    });\r\n\r\n    this.bot.emitter.emit('enter', message);\r\n  }\r\n\r\n  leave ({ user, channel }) {\r\n    const message = new PresenceMessage({\r\n      user,\r\n      channel,\r\n      adapter: this.name,\r\n      type: PresenceMessage.TYPES.LEAVE,\r\n    });\r\n\r\n    this.bot.emitter.emit('leave', message);\r\n  }\r\n\r\n  send (message) {\r\n    this.bot.log.warning(message.text);\r\n  }\r\n\r\n  ping () {\r\n    this.pong();\r\n  }\r\n\r\n  pong () {\r\n    this.bot.log.warning('Ping received, this.pong() not implemented.');\r\n  }\r\n\r\n  getUserIdByUserName (name) {\r\n    this.bot.log.warning('getUserIdByUserName not implemented by this adapter.');\r\n    return name;\r\n  }\r\n\r\n  getRoleIdByRoleName (name) {\r\n    this.bot.log.warning('getRoleIdByRoleName not implemented by this adapter');\r\n    return name;\r\n  }\r\n\r\n  getRolesForUser () {\r\n    return [];\r\n  }\r\n\r\n  async initUsers() {\r\n    await this.bot.databaseInitialized();\r\n    this.adapterUsers = this.bot.users[this.name];\r\n    if (this.adapterUsers) {\r\n      return;\r\n    }\r\n\r\n    this.bot.users[this.name] = {};\r\n    this.adapterUsers = this.bot.users[this.name];\r\n    this.bot.db.write();\r\n  }\r\n\r\n  getRoles() {\r\n    this.bot.log.warning('getRoles not implemented by this adapter');\r\n    return false;\r\n  }\r\n\r\n  async getUser(adapterUserId, adapterUsername, adapterUser = {}) {\r\n    await this.bot.databaseInitialized();\r\n    if (!adapterUserId) {\r\n      this.bot.error(`Adapter ${this.name} called getUser without adapterUserId`);\r\n    }\r\n    if (!adapterUsername) {\r\n      this.bot.warning(`Adapter ${this.name} called getUser without adapterUsername`);\r\n    }\r\n\r\n    const roles = this.getRoles(adapterUserId, adapterUser);\r\n    if (this.adapterUsers) {\r\n      if (this.adapterUsers[adapterUserId]) {\r\n        if (roles) {\r\n          this.adapterUsers[adapterUserId].roles = roles;\r\n        }\r\n\r\n        if (adapterUsername) {\r\n          this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId].name = adapterUsername;\r\n        }\r\n\r\n        return this.bot.users.botUsers[this.adapterUsers[adapterUserId].botId];\r\n      }\r\n\r\n      const user = new User(adapterUsername);\r\n      user.adapters = {[this.name]: {userId: adapterUserId}};\r\n      this.adapterUsers[adapterUserId] = {name: adapterUsername,\r\n                                          botId: user.id,\r\n                                          roles: roles || []};\r\n      this.bot.users.botUsers[user.id] = user;\r\n      this.bot.db.write();\r\n      return user;\r\n    }\r\n\r\n    return new User(adapterUsername,\r\n                    adapterUserId,\r\n                    {[this.name]: adapterUserId});\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapter.js","import Message from './message';\r\n\r\nexport default class PresenceMessage extends Message {\r\n  static TYPES = {\r\n    ENTER: 0,\r\n    LEAVE: 1,\r\n  }\r\n\r\n  constructor ({ type }) {\r\n    super(...arguments);\r\n    this.type = type;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages/presence.js","export { default as Adapter } from './adapter';\r\n\r\nimport * as a from './adapters';\r\nexport const adapters = a;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/index.js","export { default as Plugin } from './plugin';\r\nexport { default as EventPlugin } from './event';\r\nexport { default as HTTPPlugin } from './http';\r\n\r\nexport { ChatPlugin, respond, listen, help, permissionGroup } from './chat';\r\n\r\nimport * as p from './plugins';\r\nexport const plugins = p;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/index.js","module.exports = require(\"eventemitter3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter3\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"lodash/array\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/array\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"log\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"superagent\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"superagent-promise-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent-promise-plugin\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 19\n// module chunks = 0","import readline from 'readline';\r\n\r\nimport Adapter from '../adapter';\r\n\r\nconst SHELL = 'SHELL';\r\n\r\nconst EXIT_COMMANDS = [\r\n  'exit',\r\n  'quit',\r\n  'q',\r\n];\r\n\r\nexport default class ShellAdapter extends Adapter {\r\n  name = 'shell';\r\n\r\n  constructor () {\r\n    super();\r\n    this.rl = readline.createInterface({\r\n      input: process.stdin,\r\n      output: process.stdout,\r\n    });\r\n\r\n  }\r\n\r\n  async prompt () {\r\n    await this.bot.databaseInitialized();\r\n    this.user = await this.getUser('shell', 'shell');\r\n    this.rl.question('Chat: ', (answer) => {\r\n      if (EXIT_COMMANDS.includes(answer)) {\r\n        this.bot.db.write().then(() => process.exit());\r\n      }\r\n\r\n      super.receive({\r\n        text: answer,\r\n        channel: SHELL,\r\n        user: this.user,\r\n      });\r\n\r\n      this.prompt();\r\n    });\r\n  }\r\n\r\n  register (bot) {\r\n    super.register(bot);\r\n    this.prompt();\r\n    this.status = Adapter.STATUS.CONNECTED;\r\n\r\n  }\r\n\r\n  getUserIdByUserName () {\r\n    return this.user.id;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapters/shell.js","import Cryptr from 'cryptr';\r\nimport Low from 'lowdb';\r\nimport fs from 'fs-extra';\r\nimport underscoredb from 'underscore-db';\r\n\r\nexport const deserialize = cryptr => {\r\n  return str => {\r\n    if (!str) { return {}; }\r\n    const decrypted = cryptr.decrypt(str);\r\n    const obj = JSON.parse(decrypted);\r\n    return obj;\r\n  };\r\n};\r\n\r\nexport const serialize = cryptr => {\r\n  return obj => {\r\n    const str = JSON.stringify(obj);\r\n    const encrypted = cryptr.encrypt(str);\r\n    return encrypted;\r\n  };\r\n};\r\n\r\nexport const read = (readFile) => {\r\n  return (path, deserialize) => {\r\n    return new Promise((resolve, reject) => {\r\n      readFile(path).then(data => {\r\n        try {\r\n          resolve(deserialize(data));\r\n        } catch (e) {\r\n          reject(e);\r\n        }\r\n      });\r\n    });\r\n  };\r\n};\r\n\r\nexport const write = writeFile => {\r\n  return (path, obj, serialize) => {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        const data = serialize(obj);\r\n        writeFile(path, data).then(resolve, reject);\r\n      } catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n  };\r\n};\r\n\r\nexport const readLocal = (path) => {\r\n  return new Promise((resolve, reject) => {\r\n    fs.ensureFile(path, (err) => {\r\n      if (err) { return reject(err); }\r\n      fs.readFile(path, 'utf8', (err, data) => {\r\n        if (err) { return reject(err); }\r\n        return resolve(data);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nexport const writeLocal = (path, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    fs.ensureFile(path, (err) => {\r\n      if (err) { return reject(err); }\r\n      fs.writeFile(path, data, 'utf8', (err) => {\r\n        if (err) { return reject(err); }\r\n        return resolve(data);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nexport async function DB ({ path, key, readFile=readLocal, writeFile=writeLocal }) {\r\n  const cryptr = new Cryptr(key || name);\r\n  const dbPath = path || `./data/${name}.json`;\r\n\r\n  const db = await new Low(dbPath, {\r\n    storage: {\r\n      read: read(readFile),\r\n      write: write(writeFile),\r\n    },\r\n    format: {\r\n      deserialize: deserialize(cryptr),\r\n      serialize: serialize(cryptr),\r\n    },\r\n  });\r\n\r\n  db._.mixin(underscoredb);\r\n  return db;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/db.js","import Plugin from './plugin';\r\n\r\nexport default class EventPlugin extends Plugin {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/event.js","import Plugin from './plugin';\r\n\r\nexport default class HTTPPlugin extends Plugin {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/http.js","import { ChatPlugin, listen, help, permissionGroup } from '../chat';\r\n\r\nconst GREETINGS = [\r\n  'hi',\r\n  'hello',\r\n  'sup',\r\n  'greetings',\r\n  'yo',\r\n  'hey',\r\n];\r\n\r\nconst FAREWELLS = [\r\n  'goodbye',\r\n  'farwell',\r\n  'bye',\r\n  'later',\r\n  'see ya',\r\n  'cya',\r\n];\r\n\r\nconst shouldGreet = (m) => GREETINGS.includes(m.text.toLowerCase());\r\nconst shouldFarewell = (m) => FAREWELLS.includes(m.text.toLowerCase());\r\n\r\nexport class Greetings extends ChatPlugin {\r\n  name = 'greeting';\r\n\r\n  @help('Greets you back when you greet the channel.');\r\n  @permissionGroup('greetings');\r\n  @listen(shouldGreet)\r\n  greeting (_, message) {\r\n    const randomGreeting = GREETINGS[parseInt(Math.random() * GREETINGS.length)];\r\n    return `${randomGreeting}, ${message.user.name}!`;\r\n  }\r\n\r\n  @help('Says goodbye when you do.');\r\n  @permissionGroup('greetings');\r\n  @listen(shouldFarewell)\r\n  farewell (_, message) {\r\n    const randomFarewell = FAREWELLS[parseInt(Math.random() * FAREWELLS.length)];\r\n    return `${randomFarewell}, ${message.user.name}!`;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/greetings.js","import { ChatPlugin, respond, help, permissionGroup } from '../chat';\r\n\r\nexport class Help extends ChatPlugin {\r\n  name = 'help';\r\n\r\n  @help('/help explains commands.');\r\n  @permissionGroup('help');\r\n  @respond(/^help$/i);\r\n  pluginHelp () {\r\n    return this.bot.plugins\r\n                    .filter(p => p.help && p.help.length > 0)\r\n                    .map(p => p.helpText().join('\\n'), [])\r\n                    .join('\\n');\r\n  }\r\n\r\n  @help('/help <search> finds information about a specific command.');\r\n  @permissionGroup('help');\r\n  @respond(/^help (\\w+)$/i);\r\n  pluginHelpSearch ([, search]) {\r\n    return this.bot.plugins\r\n                    .filter(p => p.help && p.help.length > 0)\r\n                    .map(p => {\r\n                      return p.helpText().filter(t => {\r\n                        return t.toLowerCase().indexOf(search.toLowerCase()) > -1;\r\n                      }).join('\\n');\r\n                    }, [])\r\n                    .join('\\n');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/help.js","import { ChatPlugin, respond, help, permissionGroup } from '../chat';\r\nimport { v4 as uuid } from 'node-uuid';\r\n\r\nexport class Permissions extends ChatPlugin {\r\n  name = 'permissions';\r\n  defaultDatabase = { permissions: {} };\r\n\r\n  static nameToId = (name) => {\r\n    if (name) {\r\n      return name.replace(/[^\\w-]/g, '').toLowerCase();\r\n    }\r\n    return;\r\n  }\r\n\r\n  constructor (options) {\r\n    super(...arguments);\r\n\r\n    if (options) {\r\n      this.adminPassword = options.adminPassword;\r\n    }\r\n  }\r\n\r\n  register (bot) {\r\n    super.register(bot);\r\n\r\n    if (!this.adminPassword) {\r\n      bot.log.error('No adminPassword provided to Permissions plugin');\r\n    }\r\n  }\r\n\r\n  @help('/permissions authorize admin <password> to authorize yourself as an admin');\r\n  @permissionGroup('public');\r\n  @respond(/^permissions authorize admin (.+)$/i);\r\n  async admin ([, adminPassword], message) {\r\n    await this.databaseInitialized();\r\n\r\n    // Validate the password - if there is one.\r\n    if (this.adminPassword && adminPassword === this.adminPassword) {\r\n      const id = Permissions.nameToId(message.user.id);\r\n      this.bot.addRole(id, 'admin');\r\n      return 'User authorized as admin.';\r\n    }\r\n  }\r\n\r\n  @help('/permissions add role <role> to <user> to add a role to a user');\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions add role (\\w+) to (.+)$/i);\r\n  async addRoleToUser ([match, role, name], message) {\r\n    role = Permissions.nameToId(role);\r\n    await this.databaseInitialized();\r\n    let userIdDirty;\r\n    try {\r\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\r\n    } catch (err) {\r\n      this.bot.log.warn(err);\r\n    }\r\n    const userId = Permissions.nameToId(userIdDirty);\r\n    if (userId) {\r\n      this.bot.addRole(userId, role);\r\n      return `${name} added to role ${role}.`;\r\n    }\r\n  }\r\n\r\n  @help('/permissions view user <user> to view roles given to a user');\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions view user (.+)$/i);\r\n  async viewUser ([match, name], message) {\r\n    await this.databaseInitialized();\r\n    let userIdDirty;\r\n    try {\r\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\r\n    } catch (err) {\r\n      this.bot.log.warn(err);\r\n    }\r\n    const userId = Permissions.nameToId(userIdDirty);\r\n    if (userId) {\r\n      const perms = this.bot.getRoles(userId);\r\n      return perms.join(', ');\r\n    }\r\n  }\r\n\r\n  @help('/permissions view effective user <user> to view all roles assigned to <user>');\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions view effective user (.+)$/i);\r\n  async viewEffectiveUser ([match, name], message) {\r\n    await this.databaseInitialized();\r\n    let userIdDirty;\r\n    try {\r\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\r\n    } catch (err) {\r\n      this.bot.log.warn(err);\r\n    }\r\n    const userId = Permissions.nameToId(userIdDirty);\r\n    if (userId) {\r\n      const perms = this.bot.getUserRoles(userId);\r\n      return perms.join(', ');\r\n    }\r\n  }\r\n\r\n  @help('/permissions remove role <role> from <user> to remove a role from a user');\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions remove role (\\w+) from (.+)$/i);\r\n  async removeRoleFromUser ([match, role, name], message) {\r\n    role = Permissions.nameToId(role);\r\n    await this.databaseInitialized();\r\n    let userIdDirty;\r\n    try {\r\n      userIdDirty = await this.bot.adapters[message.adapter].getUserIdByUserName(name);\r\n    } catch (err) {\r\n      this.bot.log.warn(err);\r\n    }\r\n    const userId = Permissions.nameToId(userIdDirty);\r\n    if (userId) {\r\n      this.bot.removeRole(userId, role);\r\n      return `${name} removed from role ${role}.`;\r\n    }\r\n  }\r\n\r\n  @help('/permissions add role <permissiongroup> <role> to allow access to a permissionGroup');\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions add role (\\S+) (\\w+)$/i);\r\n  async addRoleToGroup ([, permissionGroup, role]/*, message*/) {\r\n    role = Permissions.nameToId(role);\r\n    await this.databaseInitialized();\r\n\r\n    this.bot.db.set(`permissions.groups.${permissionGroup}.${role}`, true).value();\r\n    this.bot.db.write();\r\n    return `role \"${role}\" given permission to commands under group \"${permissionGroup}\".`;\r\n  }\r\n\r\n  @help('/permissions remove group <permissionGroup> <role> to allow access to a permissionGroup');\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions remove role (\\S+) (\\w+)$/i);\r\n  async removeRoleFromGroup ([, permissionGroup, role]/*, message*/) {\r\n    role = Permissions.nameToId(role);\r\n    await this.databaseInitialized();\r\n\r\n    const group = this.bot.db.get(`permissions.groups.${permissionGroup}`).value();\r\n    delete group[role];\r\n    this.bot.db.set(`permissions.groups.${permissionGroup}`, group).value();\r\n    this.bot.db.write();\r\n    return `role \"${role}\" removed permission to commands under group \"${permissionGroup}\".`;\r\n  }\r\n\r\n  @help(\r\n    '/permissions view group <permissionGroup> to view roles with access to ' +\r\n    'commands under that permissionGroup'\r\n  );\r\n  @permissionGroup('role-management');\r\n  @respond(/^permissions view group (\\S+)$/i);\r\n  async viewGroup ([, group]/*, message*/) {\r\n    await this.databaseInitialized();\r\n\r\n    const perms = Object.keys(this.bot.db.get(`permissions.groups.${group}`).value());\r\n    return perms.join(', ');\r\n  }\r\n\r\n  @help('/login to recieve a token to claim your users across chat adapters, ' +\r\n    '/login <userIdString> <userToken> to login on another adapter');\r\n  @permissionGroup('public');\r\n  @respond(/^login\\s*(\\S+)?\\s*(\\S+)?$/i);\r\n  async multipleAdapterLogin ([, userId, token], message) {\r\n    await this.databaseInitialized();\r\n    if (userId && token) {\r\n      const user = this.bot.users.botUsers[userId];\r\n      if (user && user.id !== message.user.id) {\r\n        if (user.token === token) {\r\n          user.token = undefined;\r\n          return this.bot.mergeUsers(user, message.user);\r\n        }\r\n      }\r\n      return 'Wrong userId or token specified';\r\n    }\r\n    token = uuid();\r\n    message.user.token = token;\r\n    return 'Please whisper this to the bot on the other adapter \\n' +\r\n            `login ${message.user.id} ${token}`;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/plugins/permissions.js","module.exports = require(\"cryptr\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cryptr\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"lowdb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lowdb\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"underscore-db\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore-db\"\n// module id = 32\n// module chunks = 0","import Emitter from 'eventemitter3';\r\nimport Log from 'log';\r\nimport superagent from 'superagent';\r\nimport sapp from 'superagent-promise-plugin';\r\nimport { intersection, union } from 'lodash/array';\r\nimport { merge } from 'lodash';\r\nimport util from 'util';\r\n\r\nsapp.Promise = Promise;\r\n\r\nimport { Permissions } from './plugins/plugins';\r\n\r\nconst http = sapp.patch(superagent);\r\nconst USERS_DB = 'exobot-users';\r\n\r\nimport { DB } from './db';\r\n\r\nexport class Exobot {\r\n  plugins = [];\r\n  adapters = {};\r\n\r\n  constructor (name, options={}) {\r\n    this.name = name;\r\n    this.alias = options.alias;\r\n    this.emitter = new Emitter();\r\n    this.http = http;\r\n    this.requirePermissions = options.requirePermissions;\r\n\r\n    this.initLog(options.logLevel || Log.WARNING);\r\n    const dbPath = options.dbPath || `./data/${name}.json`;\r\n    this.initDB(options.key, dbPath, options.readFile, options.writeFile);\r\n    this.initUsers();\r\n\r\n    this.initAdapters(options.adapters);\r\n    this.initPlugins(options.plugins);\r\n\r\n  }\r\n\r\n  initAdapters = (adapters=[]) => {\r\n    adapters.forEach(a => this.addAdapter(a));\r\n  }\r\n\r\n  initPlugins = (plugins=[]) => {\r\n    plugins.forEach(p => {\r\n      this.addPlugin(p);\r\n\r\n      // if the Permissions plugin isn't initialized, we can optimize later on\r\n      // by not waiting for DB initialization and permissions checking.\r\n      if (p instanceof Permissions) {\r\n        this.usePermissions = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  initLog = (logLevel) => {\r\n    const log = new Log(logLevel || Log.WARNING);\r\n    this.log = log;\r\n    this.logLevel = logLevel;\r\n\r\n    if (logLevel === Log.DEBUG) {\r\n      setInterval(this.logProcess, 10000);\r\n    }\r\n  }\r\n\r\n  initDB = (key, dbPath, readFile, writeFile) => {\r\n    if (!key) {\r\n      this.log.critical('Pass options.key in to bot initializer. Database not initializing.');\r\n      return;\r\n    }\r\n\r\n    DB({\r\n      key,\r\n      readFile,\r\n      writeFile,\r\n      path: dbPath,\r\n      emitter: this.emitter,\r\n    }).then((db) => {\r\n      this.db = db;\r\n      this.emitter.emit('dbLoaded', db);\r\n    }, this.log.critical.bind(this.log));\r\n  }\r\n\r\n  async initUsers () {\r\n    await this.databaseInitialized();\r\n    this.users = this.db.get(USERS_DB).value();\r\n    if (this.users) {\r\n      this.log.info(Object.keys(this.users.botUsers).length, 'exobot users');\r\n      return;\r\n    }\r\n    this.db.set(USERS_DB, {botUsers: {}}).value();\r\n    this.users = this.db.get(USERS_DB).value();\r\n  }\r\n\r\n  mergeUsers (destUser, srcUser) {\r\n    if (destUser && srcUser) {\r\n      merge(destUser.roles, srcUser.roles);\r\n      Object.keys(srcUser.adapters).map(adapter => {\r\n        this.users[adapter][srcUser.adapters[adapter].userId].botId = destUser.id;\r\n      });\r\n      merge(destUser.adapters, srcUser.adapters);\r\n      delete this.users.botUsers[srcUser.id];\r\n      this.db.write();\r\n      return 'Login complete';\r\n    }\r\n\r\n  }\r\n\r\n  addRole(userId, roleName) {\r\n    this.users.botUsers[userId].roles[roleName] = true;\r\n    this.db.write();\r\n  }\r\n\r\n  getRoles(userId) {\r\n    return Object.keys(this.users.botUsers[userId].roles);\r\n  }\r\n\r\n  removeRole(userId, roleName) {\r\n    const roles = this.users.botUsers[userId].roles;\r\n    delete roles[roleName];\r\n    this.db.write();\r\n  }\r\n\r\n  getUserRoles (userId) {\r\n    const user = this.users.botUsers[userId];\r\n    let roles = [];\r\n\r\n    if (user) {\r\n      Object.keys(user.adapters).map(adapter => {\r\n        const adapterRoles = this.adapters[adapter].getRolesForUser(user.adapters[adapter].userId);\r\n        if (adapterRoles) {\r\n          roles = roles.concat(adapterRoles);\r\n        }\r\n      });\r\n      roles = roles.concat(Object.keys(user.roles));\r\n      return roles;\r\n    }\r\n  }\r\n\r\n  async checkPermissions (userId, commandPermissionGroup) {\r\n    if (!this.usePermissions) { return true; }\r\n    // special group for admin authorization - otherwise you could never auth\r\n    // in the first place when public commands are disabled\r\n    if (commandPermissionGroup === 'permissions.public') { return true; }\r\n\r\n    await this.databaseInitialized();\r\n\r\n    // get user's roles\r\n    const roles = this.getUserRoles(userId);\r\n    // if user has `admin` role, allow it\r\n    if (roles && roles.includes('admin')) { return true; }\r\n\r\n    // get roles assigned to the command group\r\n    const groups = this.db.get(`permissions.groups.${commandPermissionGroup}`).value();\r\n    // if there are no groups, and requirePermissions is false, allow it\r\n    // requirePermissions = false == (public by default)\r\n    if (!groups || !Object.keys(groups)) {\r\n      if (!this.requirePermissions) {\r\n        return true;\r\n      }\r\n\r\n      // otherwise, if there are no groups, and we're not an admin, return\r\n      // false.\r\n      return false;\r\n    }\r\n    // if command is in `public`, allow it\r\n    if (groups.public) { return true; }\r\n\r\n    // check user's list of roles against list of groups that have the command\r\n    // if there's a match (user is in a group with the command), allow it\r\n    if (intersection(roles, Object.keys(groups)).length) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  async databaseInitialized () {\r\n    if (this.db) {\r\n      return true;\r\n    }\r\n    return new Promise((resolve) => {\r\n      this.emitter.on('dbLoaded', resolve);\r\n    });\r\n  }\r\n\r\n  logProcess = () => {\r\n    this.log.debug(process.memoryUsage(), process.cpuUsage());\r\n  }\r\n\r\n  addPlugin (plugin) {\r\n    plugin.register(this);\r\n    this.plugins.push(plugin);\r\n  }\r\n\r\n  addAdapter (adapter) {\r\n    const name = adapter.name;\r\n\r\n    if (this.getAdapterByName(name)) {\r\n      this.log.warning(`Multiple \"${name}\" adapters were initialized.`);\r\n    }\r\n\r\n    adapter.register(this);\r\n    this.adapters[adapter.name] = adapter;\r\n  }\r\n\r\n  prependNameForWhisper (text) {\r\n    if (\r\n      text.slice(0, this.name.length).toLowerCase() !== this.name.toLowerCase() &&\r\n      text.slice(0, this.alias.length).toLowerCase() !== this.alias.toLowerCase()\r\n    ) {\r\n      text = `${this.name} ${text}`;\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  send (message) {\r\n    if (!message.text) { return; }\r\n    const adapter = this.getAdapterByMessage(message);\r\n\r\n    if (!adapter) {\r\n      this.log.warning(`Message sent with invalid adapter: ${message.adapter}`);\r\n      return;\r\n    }\r\n\r\n    adapter.send(message);\r\n  }\r\n\r\n  getAdapterByMessage (message) {\r\n    return this.adapters[message.adapter];\r\n  }\r\n\r\n  getAdapterByName (name) {\r\n    return Object\r\n            .keys(this.adapters)\r\n            .map(id => this.adapters[id])\r\n            .find(a => a.name.toLowerCase() === name.toLowerCase());\r\n  }\r\n}\r\n\r\nexport * from './adapters';\r\nexport * from './messages';\r\nexport * from './plugins';\r\nexport * from './db';\r\nexport { default as User } from './user';\r\nexport const LogLevels = Log;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/exobot.js"],"sourceRoot":""}